!function(e,t){var n,r,i=typeof t,a=e.location,o=e.document,u=o.documentElement,l=e.jQuery,s=e.$,c={},f=[],h="2.0.2",d=f.concat,p=f.push,g=f.slice,m=f.indexOf,y=c.toString,v=c.hasOwnProperty,b=h.trim,x=function(e,t){return new x.fn.init(e,t,n)},_=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,M=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^-ms-/,k=/-([\da-z])/gi,N=function(e,t){return t.toUpperCase()},C=function(){o.removeEventListener("DOMContentLoaded",C,!1),e.removeEventListener("load",C,!1),x.ready()};function j(e){var t=e.length,n=x.type(e);return!x.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)))}x.fn=x.prototype={jquery:h,constructor:x,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(!(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e))||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof x?n[0]:n,x.merge(this,x.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),M.test(i[1])&&x.isPlainObject(n))for(i in n)x.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}return(a=o.getElementById(i[2]))&&a.parentNode&&(this.length=1,this[0]=a),this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return g.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,n,r,i,a,o,u=arguments[0]||{},l=1,s=arguments.length,c=!1;for("boolean"==typeof u&&(c=u,u=arguments[1]||{},l=2),"object"==typeof u||x.isFunction(u)||(u={}),s===l&&(u=this,--l);s>l;l++)if(null!=(e=arguments[l]))for(n in e)r=u[n],u!==(i=e[n])&&(c&&i&&(x.isPlainObject(i)||(a=x.isArray(i)))?(a?(a=!1,o=r&&x.isArray(r)?r:[]):o=r&&x.isPlainObject(r)?r:{},u[n]=x.extend(c,o,i)):i!==t&&(u[n]=i));return u},x.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=s),t&&e.jQuery===x&&(e.jQuery=l),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==e&&--x.readyWait>0||(r.resolveWith(o,[x]),x.fn.trigger&&x(o).trigger("ready").off("ready")))},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[y.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!v.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=M.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new DOMParser).parseFromString(e,"text/xml")}catch(e){n=t}return(!n||n.getElementsByTagName("parsererror").length)&&x.error("Invalid XML: "+e),n},noop:function(){},globalEval:function(e){var t,n=eval;(e=x.trim(e))&&(1===e.indexOf("use strict")?((t=o.createElement("script")).text=e,o.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(S,"ms-").replace(k,N)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r=0,i=e.length,a=j(e);if(n){if(a)for(;i>r&&!1!==t.apply(e[r],n);r++);else for(r in e)if(!1===t.apply(e[r],n))break}else if(a)for(;i>r&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":b.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(j(Object(e))?x.merge(n,"string"==typeof e?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:m.call(t,e,n)},merge:function(e,n){var r=n.length,i=e.length,a=0;if("number"==typeof r)for(;r>a;a++)e[i++]=n[a];else for(;n[a]!==t;)e[i++]=n[a++];return e.length=i,e},grep:function(e,t,n){var r=[],i=0,a=e.length;for(n=!!n;a>i;i++)n!==!!t(e[i],i)&&r.push(e[i]);return r},map:function(e,t,n){var r,i=0,a=e.length,o=[];if(j(e))for(;a>i;i++)null!=(r=t(e[i],i,n))&&(o[o.length]=r);else for(i in e)null!=(r=t(e[i],i,n))&&(o[o.length]=r);return d.apply([],o)},guid:1,proxy:function(e,n){var r,i,a;return"string"==typeof n&&(r=e[n],n=e,e=r),x.isFunction(e)?(i=g.call(arguments,2),(a=function(){return e.apply(n||this,i.concat(g.call(arguments)))}).guid=e.guid=e.guid||x.guid++,a):t},access:function(e,n,r,i,a,o,u){var l=0,s=e.length,c=null==r;if("object"===x.type(r))for(l in a=!0,r)x.access(e,n,l,r[l],!0,o,u);else if(i!==t&&(a=!0,x.isFunction(i)||(u=!0),c&&(u?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(x(e),n)})),n))for(;s>l;l++)n(e[l],r,u?i:i.call(e[l],l,n(e[l],r)));return a?e:c?n.call(e):s?n(e[0],r):o},now:Date.now,swap:function(e,t,n,r){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in i=n.apply(e,r||[]),t)e.style[a]=o[a];return i}}),x.ready.promise=function(t){return r||(r=x.Deferred(),"complete"===o.readyState?setTimeout(x.ready):(o.addEventListener("DOMContentLoaded",C,!1),e.addEventListener("load",C,!1))),r.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()}),n=x(o),function(e,t){var n,r,i,a,o,u,l,s,c,f,h,d,p,g,m,y,v,b="sizzle"+-new Date,_=e.document,w=0,T=0,M=ue(),S=ue(),k=ue(),N=!1,C=function(){return 0},j=typeof t,A=1<<31,B={}.hasOwnProperty,E=[],D=E.pop,O=E.push,P=E.push,$=E.slice,F=E.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=I.replace("w","w#"),H="\\["+L+"*("+I+")"+L+"*(?:([*^$|!~]?=)"+L+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+L+"*\\]",z=":("+I+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+H.replace(3,8)+")*)|.*)\\)|)",U=RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),Q=RegExp("^"+L+"*,"+L+"*"),W=RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),Y=RegExp(L+"*[+~]"),V=RegExp("="+L+"*([^\\]'\"]*)"+L+"*\\]","g"),J=RegExp(z),X=RegExp("^"+R+"$"),Z={ID:RegExp("^#("+I+")"),CLASS:RegExp("^\\.("+I+")"),TAG:RegExp("^("+I.replace("w","w*")+")"),ATTR:RegExp("^"+H),PSEUDO:RegExp("^"+z),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:RegExp("^(?:"+q+")$","i"),needsContext:RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},G=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/^(?:input|select|textarea|button)$/i,te=/^h\d$/i,ne=/'|\\/g,re=RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ie=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{P.apply(E=$.call(_.childNodes),_.childNodes),E[_.childNodes.length].nodeType}catch(e){P={apply:E.length?function(e,t){O.apply(e,$.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ae(e,t,n,i){var a,o,u,l,s,c,d,m,y,x;if((t?t.ownerDocument||t:_)!==h&&f(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=(t=t||h).nodeType)&&9!==l)return[];if(p&&!i){if(a=K.exec(e))if(u=a[1]){if(9===l){if(!(o=t.getElementById(u))||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&v(t,o)&&o.id===u)return n.push(o),n}else{if(a[2])return P.apply(n,t.getElementsByTagName(e)),n;if((u=a[3])&&r.getElementsByClassName&&t.getElementsByClassName)return P.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!g||!g.test(e))){if(m=d=b,y=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){for(c=ve(e),(d=t.getAttribute("id"))?m=d.replace(ne,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",s=c.length;s--;)c[s]=m+be(c[s]);y=Y.test(e)&&t.parentNode||t,x=c.join(",")}if(x)try{return P.apply(n,y.querySelectorAll(x)),n}catch(e){}finally{d||t.removeAttribute("id")}}}return ke(e.replace(U,"$1"),t,n,i)}function oe(e){return G.test(e+"")}function ue(){var e=[];return function t(n,r){return e.push(n+=" ")>a.cacheLength&&delete t[e.shift()],t[n]=r}}function le(e){return e[b]=!0,e}function se(e){var t=h.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t,n){for(var r,i=(e=e.split("|")).length,o=n?null:t;i--;)(r=a.attrHandle[e[i]])&&r!==t||(a.attrHandle[e[i]]=o)}function fe(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:!0===e[t]?t.toLowerCase():null}function he(e,t){return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}function de(e){return"input"===e.nodeName.toLowerCase()?e.defaultValue:t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ge(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function me(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ye(e){return le(function(t){return t=+t,le(function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))})})}for(n in u=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},r=ae.support={},f=ae.setDocument=function(e){var n=e?e.ownerDocument||e:_,i=n.parentWindow;return n!==h&&9===n.nodeType&&n.documentElement?(h=n,d=n.documentElement,p=!u(n),i&&i.frameElement&&i.attachEvent("onbeforeunload",function(){f()}),r.attributes=se(function(e){return e.innerHTML="<a href='#'></a>",ce("type|href|height|width",he,"#"===e.firstChild.getAttribute("href")),ce(q,fe,null==e.getAttribute("disabled")),e.className="i",!e.getAttribute("className")}),r.input=se(function(e){return e.innerHTML="<input>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}),ce("value",de,r.attributes&&r.input),r.getElementsByTagName=se(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=se(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=se(function(e){return d.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(a.find.ID=function(e,t){if(typeof t.getElementById!==j&&p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},a.filter.ID=function(e){var t=e.replace(re,ie);return function(e){return e.getAttribute("id")===t}}):(delete a.find.ID,a.filter.ID=function(e){var t=e.replace(re,ie);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}}),a.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==j?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},a.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==j&&p?n.getElementsByClassName(e):t},m=[],g=[],(r.qsa=oe(n.querySelectorAll))&&(se(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||g.push("\\["+L+"*(?:value|"+q+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),se(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&g.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(r.matchesSelector=oe(y=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&se(function(e){r.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),m.push("!=",z)}),g=g.length&&RegExp(g.join("|")),m=m.length&&RegExp(m.join("|")),v=oe(d.contains)||d.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},r.sortDetached=se(function(e){return 1&e.compareDocumentPosition(n.createElement("div"))}),C=d.compareDocumentPosition?function(e,t){if(e===t)return N=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||v(_,e)?-1:t===n||v(_,t)?1:c?F.call(c,e)-F.call(c,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,a=e.parentNode,o=t.parentNode,u=[e],l=[t];if(e===t)return N=!0,0;if(!a||!o)return e===n?-1:t===n?1:a?-1:o?1:c?F.call(c,e)-F.call(c,t):0;if(a===o)return pe(e,t);for(r=e;r=r.parentNode;)u.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;u[i]===l[i];)i++;return i?pe(u[i],l[i]):u[i]===_?-1:l[i]===_?1:0},n):h},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&f(e),t=t.replace(V,"='$1']"),!(!r.matchesSelector||!p||m&&m.test(t)||g&&g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return ae(t,h,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==h&&f(e),v(e,t)},ae.attr=function(e,n){(e.ownerDocument||e)!==h&&f(e);var i=a.attrHandle[n.toLowerCase()],o=i&&B.call(a.attrHandle,n.toLowerCase())?i(e,n,!p):t;return o===t?r.attributes||!p?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ae.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],i=0,a=0;if(N=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(C),N){for(;t=e[a++];)t===e[a]&&(i=n.push(a));for(;i--;)e.splice(n[i],1)}return e},o=ae.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},a=ae.selectors={cacheLength:50,createPseudo:le,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(re,ie),e[3]=(e[4]||e[5]||"").replace(re,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return Z.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&J.test(r)&&(n=ve(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(re,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=M[e+" "];return t||(t=RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&M(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ae.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var s,c,f,h,d,p,g=a!==o?"nextSibling":"previousSibling",m=t.parentNode,y=u&&t.nodeName.toLowerCase(),v=!l&&!u;if(m){if(a){for(;g;){for(f=t;f=f[g];)if(u?f.nodeName.toLowerCase()===y:1===f.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&v){for(d=(s=(c=m[b]||(m[b]={}))[e]||[])[0]===w&&s[1],h=s[0]===w&&s[2],f=d&&m.childNodes[d];f=++d&&f&&f[g]||(h=d=0)||p.pop();)if(1===f.nodeType&&++h&&f===t){c[e]=[w,d,h];break}}else if(v&&(s=(t[b]||(t[b]={}))[e])&&s[0]===w)h=s[1];else for(;(f=++d&&f&&f[g]||(h=d=0)||p.pop())&&((u?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++h||(v&&((f[b]||(f[b]={}))[e]=[w,h]),f!==t)););return(h-=i)===r||0==h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=a.pseudos[e]||a.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],a.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,n){for(var i,a=r(e,t),o=a.length;o--;)e[i=F.call(e,a[o])]=!(n[i]=a[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:le(function(e){var t=[],n=[],r=l(e.replace(U,"$1"));return r[b]?le(function(e,t,n,i){for(var a,o=r(e,null,i,[]),u=e.length;u--;)(a=o[u])&&(e[u]=!(t[u]=a))}):function(e,i,a){return t[0]=e,r(t,null,a,n),!n.pop()}}),has:le(function(e){return function(t){return ae(e,t).length>0}}),contains:le(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:le(function(e){return X.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(re,ie).toLowerCase(),function(t){var n;do{if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!a.pseudos.empty(e)},header:function(e){return te.test(e.nodeName)},input:function(e){return ee.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ye(function(){return[0]}),last:ye(function(e,t){return[t-1]}),eq:ye(function(e,t,n){return[0>n?n+t:n]}),even:ye(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:ye(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:ye(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:ye(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}},{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})a.pseudos[n]=ge(n);for(n in{submit:!0,reset:!0})a.pseudos[n]=me(n);function ve(e,t){var n,r,i,o,u,l,s,c=S[e+" "];if(c)return t?0:c.slice(0);for(u=e,l=[],s=a.preFilter;u;){for(o in(!n||(r=Q.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),l.push(i=[])),n=!1,(r=W.exec(u))&&(n=r.shift(),i.push({value:n,type:r[0].replace(U," ")}),u=u.slice(n.length)),a.filter)!(r=Z[o].exec(u))||s[o]&&!(r=s[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ae.error(e):S(e,l).slice(0)}function be(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function xe(e,t,n){var r=t.dir,a=n&&"parentNode"===r,o=T++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i)}:function(t,n,u){var l,s,c,f=w+" "+o;if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if((s=(c=t[b]||(t[b]={}))[r])&&s[0]===f){if(!0===(l=s[1])||l===i)return!0===l}else if((s=c[r]=[f])[1]=e(t,n,u)||i,!0===s[1])return!0}}function _e(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function we(e,t,n,r,i){for(var a,o=[],u=0,l=e.length,s=null!=t;l>u;u++)(a=e[u])&&(!n||n(a,r,i))&&(o.push(a),s&&t.push(u));return o}function Te(e,t,n,r,i,a){return r&&!r[b]&&(r=Te(r)),i&&!i[b]&&(i=Te(i,a)),le(function(a,o,u,l){var s,c,f,h=[],d=[],p=o.length,g=a||function(e,t,n){for(var r=0,i=t.length;i>r;r++)ae(e,t[r],n);return n}(t||"*",u.nodeType?[u]:u,[]),m=!e||!a&&t?g:we(g,h,e,u,l),y=n?i||(a?e:p||r)?[]:o:m;if(n&&n(m,y,u,l),r)for(s=we(y,d),r(s,[],u,l),c=s.length;c--;)(f=s[c])&&(y[d[c]]=!(m[d[c]]=f));if(a){if(i||e){if(i){for(s=[],c=y.length;c--;)(f=y[c])&&s.push(m[c]=f);i(null,y=[],s,l)}for(c=y.length;c--;)(f=y[c])&&(s=i?F.call(a,f):h[c])>-1&&(a[s]=!(o[s]=f))}}else y=we(y===o?y.splice(p,y.length):y),i?i(null,o,y,l):P.apply(o,y)})}function Me(e){for(var t,n,r,i=e.length,o=a.relative[e[0].type],u=o||a.relative[" "],l=o?1:0,c=xe(function(e){return e===t},u,!0),f=xe(function(e){return F.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==s)||((t=n).nodeType?c(e,n,r):f(e,n,r))}];i>l;l++)if(n=a.relative[e[l].type])h=[xe(_e(h),n)];else{if((n=a.filter[e[l].type].apply(null,e[l].matches))[b]){for(r=++l;i>r&&!a.relative[e[r].type];r++);return Te(l>1&&_e(h),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(U,"$1"),n,r>l&&Me(e.slice(l,r)),i>r&&Me(e=e.slice(r)),i>r&&be(e))}h.push(n)}return _e(h)}function Se(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,l,c,f,d){var p,g,m,y=[],v=0,b="0",x=u&&[],_=null!=d,T=s,M=u||o&&a.find.TAG("*",d&&l.parentNode||l),S=w+=null==T?1:Math.random()||.1;for(_&&(s=l!==h&&l,i=n);null!=(p=M[b]);b++){if(o&&p){for(g=0;m=e[g++];)if(m(p,l,c)){f.push(p);break}_&&(w=S,i=++n)}r&&((p=!m&&p)&&v--,u&&x.push(p))}if(v+=b,r&&b!==v){for(g=0;m=t[g++];)m(x,y,l,c);if(u){if(v>0)for(;b--;)x[b]||y[b]||(y[b]=D.call(f));y=we(y)}P.apply(f,y),_&&!u&&y.length>0&&v+t.length>1&&ae.uniqueSort(f)}return _&&(w=S,s=T),x};return r?le(u):u}function ke(e,t,n,i){var o,u,s,c,f,h=ve(e);if(!i&&1===h.length){if((u=h[0]=h[0].slice(0)).length>2&&"ID"===(s=u[0]).type&&r.getById&&9===t.nodeType&&p&&a.relative[u[1].type]){if(!(t=(a.find.ID(s.matches[0].replace(re,ie),t)||[])[0]))return n;e=e.slice(u.shift().value.length)}for(o=Z.needsContext.test(e)?0:u.length;o--&&(s=u[o],!a.relative[c=s.type]);)if((f=a.find[c])&&(i=f(s.matches[0].replace(re,ie),Y.test(u[0].type)&&t.parentNode||t))){if(u.splice(o,1),!(e=i.length&&be(u)))return P.apply(n,i),n;break}}return l(e,h)(i,t,!p,n,Y.test(e)),n}function Ne(){}l=ae.compile=function(e,t){var n,r=[],i=[],a=k[e+" "];if(!a){for(t||(t=ve(e)),n=t.length;n--;)(a=Me(t[n]))[b]?r.push(a):i.push(a);a=k(e,Se(i,r))}return a},a.pseudos.nth=a.pseudos.eq,Ne.prototype=a.filters=a.pseudos,a.setFilters=new Ne,r.sortStable=b.split("").sort(C).join("")===b,f(),[0,0].sort(C),r.detectDuplicates=N,x.find=ae,x.expr=ae.selectors,x.expr[":"]=x.expr.pseudos,x.unique=ae.uniqueSort,x.text=ae.getText,x.isXMLDoc=ae.isXML,x.contains=ae.contains}(e);var A={};x.Callbacks=function(e){e="string"==typeof e?A[e]||function(e){var t=A[e]={};return x.each(e.match(w)||[],function(e,n){t[n]=!0}),t}(e):x.extend({},e);var n,r,i,a,o,u,l=[],s=!e.once&&[],c=function(t){for(n=e.memory&&t,r=!0,u=a||0,a=0,o=l.length,i=!0;l&&o>u;u++)if(!1===l[u].apply(t[0],t[1])&&e.stopOnFalse){n=!1;break}i=!1,l&&(s?s.length&&c(s.shift()):n?l=[]:f.disable())},f={add:function(){if(l){var t=l.length;(function t(n){x.each(n,function(n,r){var i=x.type(r);"function"===i?e.unique&&f.has(r)||l.push(r):r&&r.length&&"string"!==i&&t(r)})})(arguments),i?o=l.length:n&&(a=t,c(n))}return this},remove:function(){return l&&x.each(arguments,function(e,t){for(var n;(n=x.inArray(t,l,n))>-1;)l.splice(n,1),i&&(o>=n&&o--,u>=n&&u--)}),this},has:function(e){return e?x.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=s=n=t,this},disabled:function(){return!l},lock:function(){return s=t,n||f.disable(),this},locked:function(){return!s},fireWith:function(e,t){return t=[e,(t=t||[]).slice?t.slice():t],!l||r&&!s||(i?s.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,a){var o=a[0],u=x.isFunction(e[t])&&e[t];i[a[1]](function(){var e=u&&u.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,a){var o=a[2],u=a[3];r[a[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[a[0]]=function(){return i[a[0]+"With"](this===i?r:this,arguments),this},i[a[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,a=g.call(arguments),o=a.length,u=1!==o||e&&x.isFunction(e.promise)?o:0,l=1===u?e:x.Deferred(),s=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?g.call(arguments):i,r===t?l.notifyWith(n,r):--u||l.resolveWith(n,r)}};if(o>1)for(t=Array(o),n=Array(o),r=Array(o);o>i;i++)a[i]&&x.isFunction(a[i].promise)?a[i].promise().done(s(i,r,a)).fail(l.reject).progress(s(i,n,t)):--u;return u||l.resolveWith(r,a),l.promise()}}),x.support=function(t){var n=o.createElement("input"),r=o.createDocumentFragment(),i=o.createElement("div"),a=o.createElement("select"),u=a.appendChild(o.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=u.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!u.disabled,(n=o.createElement("input")).value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),r.appendChild(n),t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===i.style.backgroundClip,x(function(){var n,r,a=o.getElementsByTagName("body")[0];a&&((n=o.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(i),i.innerHTML="",i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",x.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===i.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,(r=i.appendChild(o.createElement("div"))).style.cssText=i.style.cssText="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",r.style.marginRight=r.style.width="0",i.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),a.removeChild(n))}),t):t}({});var B,E,D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,O=/([A-Z])/g;function P(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=x.expando+Math.random()}function $(e,n,r){var i;if(r===t&&1===e.nodeType)if(i="data-"+n.replace(O,"-$1").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:D.test(r)?JSON.parse(r):r)}catch(e){}B.set(e,n,r)}else r=t;return r}P.uid=1,P.accepts=function(e){return!e.nodeType||(1===e.nodeType||9===e.nodeType)},P.prototype={key:function(e){if(!P.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=P.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,x.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),a=this.cache[i];if("string"==typeof t)a[t]=n;else if(x.isEmptyObject(a))x.extend(this.cache[i],t);else for(r in t)a[r]=t[r];return a},get:function(e,n){var r=this.cache[this.key(e)];return n===t?r:r[n]},access:function(e,n,r){return n===t||n&&"string"==typeof n&&r===t?this.get(e,n):(this.set(e,n,r),r!==t?r:n)},remove:function(e,n){var r,i,a,o=this.key(e),u=this.cache[o];if(n===t)this.cache[o]={};else{x.isArray(n)?i=n.concat(n.map(x.camelCase)):(a=x.camelCase(n),n in u?i=[n,a]:i=(i=a)in u?[i]:i.match(w)||[]),r=i.length;for(;r--;)delete u[i[r]]}},hasData:function(e){return!x.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},B=new P,E=new P,x.extend({acceptData:P.accepts,hasData:function(e){return B.hasData(e)||E.hasData(e)},data:function(e,t,n){return B.access(e,t,n)},removeData:function(e,t){B.remove(e,t)},_data:function(e,t,n){return E.access(e,t,n)},_removeData:function(e,t){E.remove(e,t)}}),x.fn.extend({data:function(e,n){var r,i,a=this[0],o=0,u=null;if(e===t){if(this.length&&(u=B.get(a),1===a.nodeType&&!E.get(a,"hasDataAttrs"))){for(r=a.attributes;r.length>o;o++)0===(i=r[o].name).indexOf("data-")&&(i=x.camelCase(i.slice(5)),$(a,i,u[i]));E.set(a,"hasDataAttrs",!0)}return u}return"object"==typeof e?this.each(function(){B.set(this,e)}):x.access(this,function(n){var r,i=x.camelCase(e);if(a&&n===t){if((r=B.get(a,e))!==t)return r;if((r=B.get(a,i))!==t)return r;if((r=$(a,i,t))!==t)return r}else this.each(function(){var r=B.get(this,i);B.set(this,i,n),-1!==e.indexOf("-")&&r!==t&&B.set(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){B.remove(this,e)})}}),x.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=E.get(e,n),r&&(!i||x.isArray(r)?i=E.access(e,n,x.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),a=x._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,function(){x.dequeue(e,t)},a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return E.get(e,n)||E.access(e,n,{empty:x.Callbacks("once memory").add(function(){E.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?x.queue(this[0],e):n===t?this:this.each(function(){var t=x.queue(this,e,n);x._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx&&x.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,a=x.Deferred(),o=this,u=this.length,l=function(){--i||a.resolveWith(o,[o])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";u--;)(r=E.get(o[u],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(l));return l(),a.promise(n)}});var F,q=/[\t\r\n\f]/g,L=/\r/g,I=/^(?:input|select|textarea|button)$/i;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})},addClass:function(e){var t,n,r,i,a,o=0,u=this.length,l="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(w)||[];u>o;o++)if(r=1===(n=this[o]).nodeType&&(n.className?(" "+n.className+" ").replace(q," "):" ")){for(a=0;i=t[a++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,a,o=0,u=this.length,l=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(w)||[];u>o;o++)if(r=1===(n=this[o]).nodeType&&(n.className?(" "+n.className+" ").replace(q," "):"")){for(a=0;i=t[a++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var a,o=0,u=x(this),l=t,s=e.match(w)||[];a=s[o++];)l=r?l:!u.hasClass(a),u[l?"addClass":"removeClass"](a);else(n===i||"boolean"===n)&&(this.className&&E.set(this,"__className__",this.className),this.className=this.className||!1===e?"":E.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,a=this[0];return arguments.length?(i=x.isFunction(e),this.each(function(r){var a;1===this.nodeType&&(null==(a=i?e.call(this,r,x(this).val()):e)?a="":"number"==typeof a?a+="":x.isArray(a)&&(a=x.map(a,function(e){return null==e?"":e+""})),(n=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&n.set(this,a,"value")!==t||(this.value=a))})):a?(n=x.valHooks[a.type]||x.valHooks[a.nodeName.toLowerCase()])&&"get"in n&&(r=n.get(a,"value"))!==t?r:"string"==typeof(r=a.value)?r.replace(L,""):null==r?"":r:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,a="select-one"===e.type||0>i,o=a?null:[],u=a?i+1:r.length,l=0>i?u:a?i:0;u>l;l++)if(!(!(n=r[l]).selected&&l!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,r,i=e.options,a=x.makeArray(t),o=i.length;o--;)((r=i[o]).selected=x.inArray(x(r).val(),a)>=0)&&(n=!0);return n||(e.selectedIndex=-1),a}}},attr:function(e,n,r){var a,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?x.prop(e,n,r):(1===u&&x.isXMLDoc(e)||(n=n.toLowerCase(),a=x.attrHooks[n]||(x.expr.match.bool.test(n)?F:void 0)),r===t?a&&"get"in a&&null!==(o=a.get(e,n))?o:null==(o=x.find.attr(e,n))?t:o:null!==r?a&&"set"in a&&(o=a.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r):(x.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,a=t&&t.match(w);if(a&&1===e.nodeType)for(;n=a[i++];)r=x.propFix[n]||n,x.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{for:"htmlFor",class:"className"},prop:function(e,n,r){var i,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!x.isXMLDoc(e))&&(n=x.propFix[n]||n,a=x.propHooks[n]),r!==t?a&&"set"in a&&(i=a.set(e,r,n))!==t?i:e[n]=r:a&&"get"in a&&null!==(i=a.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||I.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),F={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,n){var r=x.expr.attrHandle[n]||x.find.attr;x.expr.attrHandle[n]=function(e,n,i){var a=x.expr.attrHandle[n],o=i?t:(x.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return x.expr.attrHandle[n]=a,o}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,n){return x.isArray(n)?e.checked=x.inArray(x(e).val(),n)>=0:t}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var R=/^key/,H=/^(?:mouse|contextmenu)|click/,z=/^(?:focusinfocus|focusoutblur)$/,U=/^([^.]*)(?:\.(.+)|)$/;function Q(){return!0}function W(){return!1}function Y(){try{return o.activeElement}catch(e){}}x.event={global:{},add:function(e,n,r,a,o){var u,l,s,c,f,h,d,p,g,m,y,v=E.get(e);if(v){for(r.handler&&(r=(u=r).handler,o=u.selector),r.guid||(r.guid=x.guid++),(c=v.events)||(c=v.events={}),(l=v.handle)||((l=v.handle=function(e){return typeof x===i||e&&x.event.triggered===e.type?t:x.event.dispatch.apply(l.elem,arguments)}).elem=e),f=(n=(n||"").match(w)||[""]).length;f--;)g=y=(s=U.exec(n[f])||[])[1],m=(s[2]||"").split(".").sort(),g&&(d=x.event.special[g]||{},g=(o?d.delegateType:d.bindType)||g,d=x.event.special[g]||{},h=x.extend({type:g,origType:y,data:a,handler:r,guid:r.guid,selector:o,needsContext:o&&x.expr.match.needsContext.test(o),namespace:m.join(".")},u),(p=c[g])||((p=c[g]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,a,m,l)||e.addEventListener&&e.addEventListener(g,l,!1)),d.add&&(d.add.call(e,h),h.handler.guid||(h.handler.guid=r.guid)),o?p.splice(p.delegateCount++,0,h):p.push(h),x.event.global[g]=!0);e=null}},remove:function(e,t,n,r,i){var a,o,u,l,s,c,f,h,d,p,g,m=E.hasData(e)&&E.get(e);if(m&&(l=m.events)){for(s=(t=(t||"").match(w)||[""]).length;s--;)if(d=g=(u=U.exec(t[s])||[])[1],p=(u[2]||"").split(".").sort(),d){for(f=x.event.special[d]||{},h=l[d=(r?f.delegateType:f.bindType)||d]||[],u=u[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=h.length;a--;)c=h[a],!i&&g!==c.origType||n&&n.guid!==c.guid||u&&!u.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(a,1),c.selector&&h.delegateCount--,f.remove&&f.remove.call(e,c));o&&!h.length&&(f.teardown&&!1!==f.teardown.call(e,p,m.handle)||x.removeEvent(e,d,m.handle),delete l[d])}else for(d in l)x.event.remove(e,d+t[s],n,r,!0);x.isEmptyObject(l)&&(delete m.handle,E.remove(e,"events"))}},trigger:function(n,r,i,a){var u,l,s,c,f,h,d,p=[i||o],g=v.call(n,"type")?n.type:n,m=v.call(n,"namespace")?n.namespace.split("."):[];if(l=s=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!z.test(g+x.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),f=0>g.indexOf(":")&&"on"+g,(n=n[x.expando]?n:new x.Event(g,"object"==typeof n&&n)).isTrigger=a?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:x.makeArray(r,[n]),d=x.event.special[g]||{},a||!d.trigger||!1!==d.trigger.apply(i,r))){if(!a&&!d.noBubble&&!x.isWindow(i)){for(c=d.delegateType||g,z.test(c+g)||(l=l.parentNode);l;l=l.parentNode)p.push(l),s=l;s===(i.ownerDocument||o)&&p.push(s.defaultView||s.parentWindow||e)}for(u=0;(l=p[u++])&&!n.isPropagationStopped();)n.type=u>1?c:d.bindType||g,(h=(E.get(l,"events")||{})[n.type]&&E.get(l,"handle"))&&h.apply(l,r),(h=f&&l[f])&&x.acceptData(l)&&h.apply&&!1===h.apply(l,r)&&n.preventDefault();return n.type=g,a||n.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),r)||!x.acceptData(i)||f&&x.isFunction(i[g])&&!x.isWindow(i)&&((s=i[f])&&(i[f]=null),x.event.triggered=g,i[g](),x.event.triggered=t,s&&(i[f]=s)),n.result}},dispatch:function(e){e=x.event.fix(e);var n,r,i,a,o,u=[],l=g.call(arguments),s=(E.get(this,"events")||{})[e.type]||[],c=x.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(u=x.event.handlers.call(this,e,s),n=0;(a=u[n++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,r=0;(o=a.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,(i=((x.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,l))!==t&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,a,o,u=[],l=n.delegateCount,s=e.target;if(l&&s.nodeType&&(!e.button||"click"!==e.type))for(;s!==this;s=s.parentNode||this)if(!0!==s.disabled||"click"!==e.type){for(i=[],r=0;l>r;r++)i[a=(o=n[r]).selector+" "]===t&&(i[a]=o.needsContext?x(a,this).index(s)>=0:x.find(a,this,null,[s]).length),i[a]&&i.push(o);i.length&&u.push({elem:s,handlers:i})}return n.length>l&&u.push({elem:this,handlers:n.slice(l)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,u=n.button;return null==e.pageX&&null!=n.clientX&&(i=(r=e.target.ownerDocument||o).documentElement,a=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)),e.which||u===t||(e.which=1&u?1:2&u?3:4&u?2:0),e}},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,a=e,u=this.fixHooks[i];for(u||(this.fixHooks[i]=u=H.test(i)?this.mouseHooks:R.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new x.Event(a),t=r.length;t--;)e[n=r[t]]=a[n];return e.target||(e.target=o),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==Y()&&this.focus?(this.focus(),!1):t},delegateType:"focusin"},blur:{trigger:function(){return this===Y()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&x.nodeName(this,"input")?(this.click(),!1):t},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},x.Event=function(e,n){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?Q:W):this.type=e,n&&x.extend(this,n),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,t):new x.Event(e,n)},x.Event.prototype={isDefaultPrevented:W,isPropagationStopped:W,isImmediatePropagationStopped:W,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Q,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Q,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Q,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return(!r||r!==this&&!x.contains(this,r))&&(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0==n++&&o.addEventListener(e,r,!0)},teardown:function(){0==--n&&o.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,n,r,i,a){var o,u;if("object"==typeof e){for(u in"string"!=typeof n&&(r=r||n,n=t),e)this.on(u,n,r,e[u],a);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),!1===i)i=W;else if(!i)return this;return 1===a&&(o=i,(i=function(e){return x().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=x.guid++)),this.each(function(){x.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,a;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(a in e)this.off(a,n,e[a]);return this}return(!1===n||"function"==typeof n)&&(r=n,n=t),!1===r&&(r=W),this.each(function(){x.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?x.event.trigger(e,n,r,!0):t}});var V=/^.[^:#\[\.,]*$/,J=/^(?:parents|prev(?:Until|All))/,X=x.expr.match.needsContext,Z={children:!0,contents:!0,next:!0,prev:!0};function G(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function K(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(V.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return m.call(t,e)>=0!==n})}x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return(n=this.pushStack(i>1?x.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(x.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(K(this,e||[],!0))},filter:function(e){return this.pushStack(K(this,e||[],!1))},is:function(e){return!!K(this,"string"==typeof e&&X.test(e)?x(e):e||[],!1).length},closest:function(e,t){for(var n,r=0,i=this.length,a=[],o=X.test(e)||"string"!=typeof e?x(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=a.push(n);break}return this.pushStack(a.length>1?x.unique(a):a)},index:function(e){return e?"string"==typeof e?m.call(x(e),this[0]):m.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return e.contentDocument||x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(Z[e]||x.unique(i),J.test(e)&&i.reverse()),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){for(var i=[],a=r!==t;(e=e[n])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&x(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ee=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,te=/<([\w:]+)/,ne=/<|&#?\w+;/,re=/<(?:script|style|link)/i,ie=/^(?:checkbox|radio)$/i,ae=/checked\s*(?:[^=]|=\s*.checked.)/i,oe=/^$|\/(?:java|ecma)script/i,ue=/^true\/(.*)/,le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,se={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ce(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function fe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function he(e){var t=ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function de(e,t){for(var n=e.length,r=0;n>r;r++)E.set(e[r],"globalEval",!t||E.get(t[r],"globalEval"))}function pe(e,t){var n,r,i,a,o,u,l,s;if(1===t.nodeType){if(E.hasData(e)&&(a=E.access(e),o=E.set(t,a),s=a.events))for(i in delete o.handle,o.events={},s)for(n=0,r=s[i].length;r>n;n++)x.event.add(t,i,s[i][n]);B.hasData(e)&&(u=B.access(e),l=x.extend({},u),B.set(t,l))}}function ge(e,n){var r=e.getElementsByTagName?e.getElementsByTagName(n||"*"):e.querySelectorAll?e.querySelectorAll(n||"*"):[];return n===t||n&&x.nodeName(e,n)?x.merge([e],r):r}function me(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ie.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}se.optgroup=se.option,se.tbody=se.tfoot=se.colgroup=se.caption=se.thead,se.th=se.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===t?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ce(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ce(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?x.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(ge(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&de(ge(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof e&&!re.test(e)&&!se[(te.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ee,"<$1></$2>");try{for(;i>r;r++)1===(n=this[r]||{}).nodeType&&(x.cleanData(ge(n,!1)),n.innerHTML=e);n=0}catch(e){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=d.apply([],e);var r,i,a,o,u,l,s=0,c=this.length,f=this,h=c-1,p=e[0],g=x.isFunction(p);if(g||!(1>=c||"string"!=typeof p||x.support.checkClone)&&ae.test(p))return this.each(function(r){var i=f.eq(r);g&&(e[0]=p.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(i=(r=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this)).firstChild,1===r.childNodes.length&&(r=i),i)){for(o=(a=x.map(ge(r,"script"),fe)).length;c>s;s++)u=r,s!==h&&(u=x.clone(u,!0,!0),o&&x.merge(a,ge(u,"script"))),t.call(this[s],u,s);if(o)for(l=a[a.length-1].ownerDocument,x.map(a,he),s=0;o>s;s++)u=a[s],oe.test(u.type||"")&&!E.access(u,"globalEval")&&x.contains(l,u)&&(u.src?x._evalUrl(u.src):x.globalEval(u.textContent.replace(le,"")))}return this}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=[],i=x(e),a=i.length-1,o=0;a>=o;o++)n=o===a?this:this.clone(!0),x(i[o])[t](n),p.apply(r,n.get());return this.pushStack(r)}}),x.extend({clone:function(e,t,n){var r,i,a,o,u=e.cloneNode(!0),l=x.contains(e.ownerDocument,e);if(!(x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(o=ge(u),r=0,i=(a=ge(e)).length;i>r;r++)me(a[r],o[r]);if(t)if(n)for(a=a||ge(e),o=o||ge(u),r=0,i=a.length;i>r;r++)pe(a[r],o[r]);else pe(e,u);return(o=ge(u,"script")).length>0&&de(o,!l&&ge(e,"script")),u},buildFragment:function(e,t,n,r){for(var i,a,o,u,l,s,c=0,f=e.length,h=t.createDocumentFragment(),d=[];f>c;c++)if((i=e[c])||0===i)if("object"===x.type(i))x.merge(d,i.nodeType?[i]:i);else if(ne.test(i)){for(a=a||h.appendChild(t.createElement("div")),o=(te.exec(i)||["",""])[1].toLowerCase(),u=se[o]||se._default,a.innerHTML=u[1]+i.replace(ee,"<$1></$2>")+u[2],s=u[0];s--;)a=a.firstChild;x.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(t.createTextNode(i));for(h.textContent="",c=0;i=d[c++];)if((!r||-1===x.inArray(i,r))&&(l=x.contains(i.ownerDocument,i),a=ge(h.appendChild(i),"script"),l&&de(a),n))for(s=0;i=a[s++];)oe.test(i.type||"")&&n.push(i);return h},cleanData:function(e){for(var n,r,i,a,o,u,l=x.event.special,s=0;(r=e[s])!==t;s++){if(P.accepts(r)&&((o=r[E.expando])&&(n=E.cache[o]))){if((i=Object.keys(n.events||{})).length)for(u=0;(a=i[u])!==t;u++)l[a]?x.event.remove(r,a):x.removeEvent(r,a,n.handle);E.cache[o]&&delete E.cache[o]}delete B.cache[r[B.expando]]}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),x.fn.extend({wrapAll:function(e){var t;return x.isFunction(e)?this.each(function(t){x(this).wrapAll(e.call(this,t))}):(this[0]&&(t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var ye,ve,be=/^(none|table(?!-c[ea]).+)/,xe=/^margin/,_e=RegExp("^("+_+")(.*)$","i"),we=RegExp("^("+_+")(?!px)[a-z%]+$","i"),Te=RegExp("^([+-])=("+_+")","i"),Me={BODY:"block"},Se={position:"absolute",visibility:"hidden",display:"block"},ke={letterSpacing:0,fontWeight:400},Ne=["Top","Right","Bottom","Left"],Ce=["Webkit","O","Moz","ms"];function je(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Ce.length;i--;)if((t=Ce[i]+n)in e)return t;return r}function Ae(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function Be(t){return e.getComputedStyle(t,null)}function Ee(e,t){for(var n,r,i,a=[],o=0,u=e.length;u>o;o++)(r=e[o]).style&&(a[o]=E.get(r,"olddisplay"),n=r.style.display,t?(a[o]||"none"!==n||(r.style.display=""),""===r.style.display&&Ae(r)&&(a[o]=E.access(r,"olddisplay",$e(r.nodeName)))):a[o]||(i=Ae(r),(n&&"none"!==n||!i)&&E.set(r,"olddisplay",i?n:x.css(r,"display"))));for(o=0;u>o;o++)(r=e[o]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?a[o]||"":"none"));return e}function De(e,t,n){var r=_e.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Oe(e,t,n,r,i){for(var a=n===(r?"border":"content")?4:"width"===t?1:0,o=0;4>a;a+=2)"margin"===n&&(o+=x.css(e,n+Ne[a],!0,i)),r?("content"===n&&(o-=x.css(e,"padding"+Ne[a],!0,i)),"margin"!==n&&(o-=x.css(e,"border"+Ne[a]+"Width",!0,i))):(o+=x.css(e,"padding"+Ne[a],!0,i),"padding"!==n&&(o+=x.css(e,"border"+Ne[a]+"Width",!0,i)));return o}function Pe(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,a=Be(e),o=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,a);if(0>=i||null==i){if((0>(i=ye(e,t,a))||null==i)&&(i=e.style[t]),we.test(i))return i;r=o&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+Oe(e,t,n||(o?"border":"content"),r,a)+"px"}function $e(e){var t=o,n=Me[e];return n||("none"!==(n=Fe(e,t))&&n||((t=((ve=(ve||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement))[0].contentWindow||ve[0].contentDocument).document).write("<!doctype html><html><body>"),t.close(),n=Fe(e,t),ve.detach()),Me[e]=n),n}function Fe(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}x.fn.extend({css:function(e,n){return x.access(this,function(e,n,r){var i,a,o={},u=0;if(x.isArray(n)){for(i=Be(e),a=n.length;a>u;u++)o[n[u]]=x.css(e,n[u],!1,i);return o}return r!==t?x.style(e,n,r):x.css(e,n)},e,n,arguments.length>1)},show:function(){return Ee(this,!0)},hide:function(){return Ee(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:Ae(this))?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ye(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,u,l=x.camelCase(n),s=e.style;return n=x.cssProps[l]||(x.cssProps[l]=je(s,l)),u=x.cssHooks[n]||x.cssHooks[l],r===t?u&&"get"in u&&(a=u.get(e,!1,i))!==t?a:s[n]:("string"===(o=typeof r)&&(a=Te.exec(r))&&(r=(a[1]+1)*a[2]+parseFloat(x.css(e,n)),o="number"),null==r||"number"===o&&isNaN(r)||("number"!==o||x.cssNumber[l]||(r+="px"),x.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(s[n]="inherit"),u&&"set"in u&&(r=u.set(e,r,i))===t||(s[n]=r)),t)}},css:function(e,n,r,i){var a,o,u,l=x.camelCase(n);return n=x.cssProps[l]||(x.cssProps[l]=je(e.style,l)),(u=x.cssHooks[n]||x.cssHooks[l])&&"get"in u&&(a=u.get(e,!0,r)),a===t&&(a=ye(e,n,i)),"normal"===a&&n in ke&&(a=ke[n]),""===r||r?(o=parseFloat(a),!0===r||x.isNumeric(o)?o||0:a):a}}),ye=function(e,n,r){var i,a,o,u=r||Be(e),l=u?u.getPropertyValue(n)||u[n]:t,s=e.style;return u&&(""!==l||x.contains(e.ownerDocument,e)||(l=x.style(e,n)),we.test(l)&&xe.test(n)&&(i=s.width,a=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=l,l=u.width,s.width=i,s.minWidth=a,s.maxWidth=o)),l},x.each(["height","width"],function(e,n){x.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&be.test(x.css(e,"display"))?x.swap(e,Se,function(){return Pe(e,n,i)}):Pe(e,n,i):t},set:function(e,t,r){var i=r&&Be(e);return De(0,t,r?Oe(e,n,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,n){return n?x.swap(e,{display:"inline-block"},ye,[e,"marginRight"]):t}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,n){x.cssHooks[n]={get:function(e,r){return r?(r=ye(e,n),we.test(r)?x(e).position()[n]+"px":r):t}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Ne[r]+t]=a[r]||a[r-2]||a[0];return i}},xe.test(e)||(x.cssHooks[e+t].set=De)});var qe=/%20/g,Le=/\[\]$/,Ie=/\r?\n/g,Re=/^(?:submit|button|image|reset|file)$/i,He=/^(?:input|select|textarea|keygen)/i;function ze(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||Le.test(e)?r(e,i):ze(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)ze(e+"["+i+"]",t[i],n,r)}x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&He.test(this.nodeName)&&!Re.test(e)&&(this.checked||!ie.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(Ie,"\r\n")}}):{name:t.name,value:n.replace(Ie,"\r\n")}}).get()}}),x.param=function(e,n){var r,i=[],a=function(e,t){t=x.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){a(this.name,this.value)});else for(r in e)ze(r,e[r],n,a);return i.join("&").replace(qe,"+")},x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Ue,Qe,We=x.now(),Ye=/\?/,Ve=/#.*$/,Je=/([?&])_=[^&]*/,Xe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ze=/^(?:GET|HEAD)$/,Ge=/^\/\//,Ke=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,et=x.fn.load,tt={},nt={},rt="*/".concat("*");try{Qe=a.href}catch(e){(Qe=o.createElement("a")).href="",Qe=Qe.href}function it(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(w)||[];if(x.isFunction(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function at(e,n,r,i){var a={},o=e===nt;function u(l){var s;return a[l]=!0,x.each(e[l]||[],function(e,l){var c=l(n,r,i);return"string"!=typeof c||o||a[c]?o?!(s=c):t:(n.dataTypes.unshift(c),u(c),!1)}),s}return u(n.dataTypes[0])||!a["*"]&&u("*")}function ot(e,n){var r,i,a=x.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((a[r]?e:i||(i={}))[r]=n[r]);return i&&x.extend(!0,e,i),e}Ue=Ke.exec(Qe.toLowerCase())||[],x.fn.load=function(e,n,r){if("string"!=typeof e&&et)return et.apply(this,arguments);var i,a,o,u=this,l=e.indexOf(" ");return l>=0&&(i=e.slice(l),e=e.slice(0,l)),x.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),u.length>0&&x.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,u.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Qe,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ue[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ot(ot(e,x.ajaxSettings),t):ot(x.ajaxSettings,e)},ajaxPrefilter:it(tt),ajaxTransport:it(nt),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,a,o,u,l,s,c,f=x.ajaxSetup({},n),h=f.context||f,d=f.context&&(h.nodeType||h.jquery)?x(h):x.event,p=x.Deferred(),g=x.Callbacks("once memory"),m=f.statusCode||{},y={},v={},b=0,_="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o)for(o={};t=Xe.exec(a);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||_;return r&&r.abort(t),M(0,t),this}};if(p.promise(T).complete=g.add,T.success=T.done,T.error=T.fail,f.url=((e||f.url||Qe)+"").replace(Ve,"").replace(Ge,Ue[1]+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=x.trim(f.dataType||"*").toLowerCase().match(w)||[""],null==f.crossDomain&&(l=Ke.exec(f.url.toLowerCase()),f.crossDomain=!(!l||l[1]===Ue[1]&&l[2]===Ue[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(Ue[3]||("http:"===Ue[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=x.param(f.data,f.traditional)),at(tt,f,n,T),2===b)return T;for(c in(s=f.global)&&0==x.active++&&x.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ze.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(Ye.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(f.url=Je.test(i)?i.replace(Je,"$1_="+We++):i+(Ye.test(i)?"&":"?")+"_="+We++)),f.ifModified&&(x.lastModified[i]&&T.setRequestHeader("If-Modified-Since",x.lastModified[i]),x.etag[i]&&T.setRequestHeader("If-None-Match",x.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+rt+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(!1===f.beforeSend.call(h,T,f)||2===b))return T.abort();for(c in _="abort",{success:1,error:1,complete:1})T[c](f[c]);if(r=at(nt,f,n,T)){T.readyState=1,s&&d.trigger("ajaxSend",[T,f]),f.async&&f.timeout>0&&(u=setTimeout(function(){T.abort("timeout")},f.timeout));try{b=1,r.send(y,M)}catch(e){if(!(2>b))throw e;M(-1,e)}}else M(-1,"No Transport");function M(e,n,o,l){var c,y,v,_,w,M=n;2!==b&&(b=2,u&&clearTimeout(u),r=t,a=l||"",T.readyState=e>0?4:0,c=e>=200&&300>e||304===e,o&&(_=function(e,n,r){var i,a,o,u,l=e.contents,s=e.dataTypes;for(;"*"===s[0];)s.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("Content-Type"));if(i)for(a in l)if(l[a]&&l[a].test(i)){s.unshift(a);break}if(s[0]in r)o=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){o=a;break}u||(u=a)}o=o||u}return o?(o!==s[0]&&s.unshift(o),r[o]):t}(f,T,o)),_=function(e,t,n,r){var i,a,o,u,l,s={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)s[o.toLowerCase()]=e.converters[o];a=c.shift();for(;a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=s[l+" "+a]||s["* "+a]))for(i in s)if((u=i.split(" "))[1]===a&&(o=s[l+" "+u[0]]||s["* "+u[0]])){!0===o?o=s[i]:!0!==s[i]&&(a=u[0],c.unshift(u[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(f,_,T,c),c?(f.ifModified&&((w=T.getResponseHeader("Last-Modified"))&&(x.lastModified[i]=w),(w=T.getResponseHeader("etag"))&&(x.etag[i]=w)),204===e||"HEAD"===f.type?M="nocontent":304===e?M="notmodified":(M=_.state,y=_.data,c=!(v=_.error))):(v=M,(e||!M)&&(M="error",0>e&&(e=0))),T.status=e,T.statusText=(n||M)+"",c?p.resolveWith(h,[y,M,T]):p.rejectWith(h,[T,M,v]),T.statusCode(m),m=t,s&&d.trigger(c?"ajaxSuccess":"ajaxError",[T,f,c?y:v]),g.fireWith(h,[T,M]),s&&(d.trigger("ajaxComplete",[T,f]),--x.active||x.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,n){return x.get(e,t,n,"script")}}),x.each(["get","post"],function(e,n){x[n]=function(e,r,i,a){return x.isFunction(r)&&(a=a||i,i=r,r=t),x.ajax({url:e,type:n,dataType:a,data:r,success:i})}}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,i){t=x("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){n&&n()}}});var ut=[],lt=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ut.pop()||x.expando+"_"+We++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(n,r,i){var a,o,u,l=!1!==n.jsonp&&(lt.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&lt.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(a=n.jsonpCallback=x.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(lt,"$1"+a):!1!==n.jsonp&&(n.url+=(Ye.test(n.url)?"&":"?")+n.jsonp+"="+a),n.converters["script json"]=function(){return u||x.error(a+" was not called"),u[0]},n.dataTypes[0]="json",o=e[a],e[a]=function(){u=arguments},i.always(function(){e[a]=o,n[a]&&(n.jsonpCallback=r.jsonpCallback,ut.push(a)),u&&x.isFunction(o)&&o(u[0]),u=o=t}),"script"):t}),x.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var st=x.ajaxSettings.xhr(),ct={0:200,1223:204},ft=0,ht={};e.ActiveXObject&&x(e).on("unload",function(){for(var e in ht)ht[e]();ht=t}),x.support.cors=!!st&&"withCredentials"in st,x.support.ajax=st=!!st,x.ajaxTransport(function(e){var n;return x.support.cors||st&&!e.crossDomain?{send:function(r,i){var a,o,u=e.xhr();if(u.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)u[a]=e.xhrFields[a];for(a in e.mimeType&&u.overrideMimeType&&u.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)u.setRequestHeader(a,r[a]);n=function(e){return function(){n&&(delete ht[o],n=u.onload=u.onerror=null,"abort"===e?u.abort():"error"===e?i(u.status||404,u.statusText):i(ct[u.status]||u.status,u.statusText,"string"==typeof u.responseText?{text:u.responseText}:t,u.getAllResponseHeaders()))}},u.onload=n(),u.onerror=n("error"),n=ht[o=ft++]=n("abort"),u.send(e.hasContent&&e.data||null)},abort:function(){n&&n()}}:t});var dt,pt,gt=/^(?:toggle|show|hide)$/,mt=RegExp("^(?:([+-])=|)("+_+")([a-z%]*)$","i"),yt=/queueHooks$/,vt=[function(e,n,r){var i,a,o,u,l,s,c=this,f={},h=e.style,d=e.nodeType&&Ae(e),p=E.get(e,"fxshow");for(i in r.queue||(null==(l=x._queueHooks(e,"fx")).unqueued&&(l.unqueued=0,s=l.empty.fire,l.empty.fire=function(){l.unqueued||s()}),l.unqueued++,c.always(function(){c.always(function(){l.unqueued--,x.queue(e,"fx").length||l.empty.fire()})})),1===e.nodeType&&("height"in n||"width"in n)&&(r.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(h.display="inline-block")),r.overflow&&(h.overflow="hidden",c.always(function(){h.overflow=r.overflow[0],h.overflowX=r.overflow[1],h.overflowY=r.overflow[2]})),n)if(a=n[i],gt.exec(a)){if(delete n[i],o=o||"toggle"===a,a===(d?"hide":"show")){if("show"!==a||!p||p[i]===t)continue;d=!0}f[i]=p&&p[i]||x.style(e,i)}if(!x.isEmptyObject(f))for(i in p?"hidden"in p&&(d=p.hidden):p=E.access(e,"fxshow",{}),o&&(p.hidden=!d),d?x(e).show():c.done(function(){x(e).hide()}),c.done(function(){var t;for(t in E.remove(e,"fxshow"),f)x.style(e,t,f[t])}),f)u=_t(d?p[i]:0,i,c),i in p||(p[i]=u.start,d&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}],bt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=mt.exec(t),a=i&&i[3]||(x.cssNumber[e]?"":"px"),o=(x.cssNumber[e]||"px"!==a&&+r)&&mt.exec(x.css(n.elem,e)),u=1,l=20;if(o&&o[3]!==a){a=a||o[3],i=i||[],o=+r||1;do{o/=u=u||".5",x.style(n.elem,e,o+a)}while(u!==(u=n.cur()/r)&&1!==u&&--l)}return i&&(o=n.start=+o||+r||0,n.unit=a,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};function xt(){return setTimeout(function(){dt=t}),dt=x.now()}function _t(e,t,n){for(var r,i=(bt[t]||[]).concat(bt["*"]),a=0,o=i.length;o>a;a++)if(r=i[a].call(n,t,e))return r}function wt(e,t,n){var r,i,a=0,o=vt.length,u=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=dt||xt(),n=Math.max(0,s.startTime+s.duration-t),r=1-(n/s.duration||0),a=0,o=s.tweens.length;o>a;a++)s.tweens[a].run(r);return u.notifyWith(e,[s,r,n]),1>r&&o?n:(u.resolveWith(e,[s]),!1)},s=u.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:dt||xt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,s.opts,t,n,s.opts.specialEasing[t]||s.opts.easing);return s.tweens.push(r),r},stop:function(t){var n=0,r=t?s.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)s.tweens[n].run(1);return t?u.resolveWith(e,[s,t]):u.rejectWith(e,[s,t]),this}}),c=s.props;for(function(e,t){var n,r,i,a,o;for(n in e)if(r=x.camelCase(n),i=t[r],a=e[n],x.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=x.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(c,s.opts.specialEasing);o>a;a++)if(r=vt[a].call(s,e,c,s.opts))return r;return x.map(c,_t,s),x.isFunction(s.opts.start)&&s.opts.start.call(e,s),x.fx.timer(x.extend(l,{elem:e,anim:s,queue:s.opts.queue})),s.progress(s.opts.progress).done(s.opts.done,s.opts.complete).fail(s.opts.fail).always(s.opts.always)}function Tt(e,t,n,r,i){return new Tt.prototype.init(e,t,n,r,i)}function Mt(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)r["margin"+(n=Ne[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function St(e){return x.isWindow(e)?e:9===e.nodeType&&e.defaultView}x.Animation=x.extend(wt,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],bt[n]=bt[n]||[],bt[n].unshift(t)},prefilter:function(e,t){t?vt.unshift(e):vt.push(e)}}),x.Tween=Tt,Tt.prototype={constructor:Tt,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(x.cssNumber[n]?"":"px")},cur:function(){var e=Tt.propHooks[this.prop];return e&&e.get?e.get(this):Tt.propHooks._default.get(this)},run:function(e){var t,n=Tt.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Tt.propHooks._default.set(this),this}},Tt.prototype.init.prototype=Tt.prototype,Tt.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Tt.propHooks.scrollTop=Tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Mt(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),a=x.speed(t,n,r),o=function(){var t=wt(this,x.extend({},e),a);(i||E.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",a=x.timers,o=E.get(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&yt.test(n)&&i(o[n]);for(n=a.length;n--;)a[n].elem!==this||null!=e&&a[n].queue!==e||(a[n].anim.stop(r),t=!1,a.splice(n,1));(t||!r)&&x.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=E.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=x.timers,o=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),x.each({slideDown:Mt("show"),slideUp:Mt("hide"),slideToggle:Mt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||!0===r.queue)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=Tt.prototype.init,x.fx.tick=function(){var e,n=x.timers,r=0;for(dt=x.now();n.length>r;r++)(e=n[r])()||n[r]!==e||n.splice(r--,1);n.length||x.fx.stop(),dt=t},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){pt||(pt=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(pt),pt=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){x.offset.setOffset(this,e,t)});var n,r,a=this[0],o={top:0,left:0},u=a&&a.ownerDocument;return u?(n=u.documentElement,x.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=St(u),{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}):o):void 0},x.offset={setOffset:function(e,t,n){var r,i,a,o,u,l,s=x.css(e,"position"),c=x(e),f={};"static"===s&&(e.style.position="relative"),u=c.offset(),a=x.css(e,"top"),l=x.css(e,"left"),("absolute"===s||"fixed"===s)&&(a+l).indexOf("auto")>-1?(o=(r=c.position()).top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(l)||0),x.isFunction(t)&&(t=t.call(e,n,u)),null!=t.top&&(f.top=t.top-u.top+o),null!=t.left&&(f.left=t.left-u.left+i),"using"in t?t.using.call(e,f):c.css(f)}},x.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===x.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(r=e.offset()),r.top+=x.css(e[0],"borderTopWidth",!0),r.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-x.css(n,"marginTop",!0),left:t.left-r.left-x.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||u;e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position");)e=e.offsetParent;return e||u})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,r){var i="pageYOffset"===r;x.fn[n]=function(a){return x.access(this,function(n,a,o){var u=St(n);return o===t?u?u[r]:n[a]:(u?u.scrollTo(i?e.pageXOffset:o,i?o:e.pageYOffset):n[a]=o,t)},n,a,arguments.length,null)}}),x.each({Height:"height",Width:"width"},function(e,n){x.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){x.fn[i]=function(i,a){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(!0===i||!0===a?"margin":"border");return x.access(this,function(n,r,i){var a;return x.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(a=n.documentElement,Math.max(n.body["scroll"+e],a["scroll"+e],n.body["offset"+e],a["offset"+e],a["client"+e])):i===t?x.css(n,r,u):x.style(n,r,i,u)},n,o?i:t,o,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=x)}(window);var Core={init:function(){Core.setOnlyNum()},Delete:function(e,t){jQuery.SmartMessageBox({title:phrase["Удалить?"],content:phrase["Эту операцию нельзя будет отменить."],buttons:"["+phrase["Нет"]+"]["+phrase["Да"]+"]"},function(n){n===phrase["Да"]&&jQuery.ajax({type:"POST",url:"/admin/delete",data:{id:e,table:t},dataType:"json",success:function(t){t.status?(TableBuilder.showSuccessNotification("Удалено успешно"),$(".tr_"+e).remove()):TableBuilder.showErrorNotification(phrase["Что-то пошло не так, попробуйте позже"])}})})},delPrm:function(e){var t=window.location.href,n=t.split("?"),r=new RegExp("(\\?|&)"+e+"=[^&]+","g"),i=""==(t=(t=("?"+n[1]).replace(r,"")).replace(/^&|\?/,""))?"":"?";return void 0===n[1]?n[0]:n[0]+i+t},setAttr:function(e,t){var n="",r=location.href.split("#")[0].split("?"),i=r[0],a=r[1];if(a)for(var o=a.split("&"),u=0;u<o.length;u++){o[u].split("=")[0]!=e&&(n+=o[u]+"&")}return i+"?"+(n+=e+"="+t)},urlParam:function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:t[1]||0},setOnlyNum:function(){$(document).on("keyup",".only_num",function(){var e=String($(this).val()).replace(/[^0-9]/gi,"");$(this).val(e)})}};function slug_gen(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toLowerCase()).replace(/ж/g,"zh")).replace(/ё/g,"yo")).replace(/й/g,"i")).replace(/ю/g,"yu")).replace(/ь/g,"")).replace(/ч/g,"ch")).replace(/щ/g,"sh")).replace(/ц/g,"c")).replace(/у/g,"u")).replace(/к/g,"k")).replace(/е/g,"e")).replace(/н/g,"n")).replace(/г/g,"g")).replace(/ш/g,"sh")).replace(/з/g,"z")).replace(/х/g,"h")).replace(/ъ/g,"")).replace(/ф/g,"f")).replace(/ы/g,"y")).replace(/в/g,"v")).replace(/а/g,"a")).replace(/п/g,"p")).replace(/р/g,"r")).replace(/о/g,"o")).replace(/л/g,"l")).replace(/д/g,"d")).replace(/э/g,"e")).replace(/я/g,"ja")).replace(/с/g,"s")).replace(/м/g,"m")).replace(/и/g,"i")).replace(/т/g,"t")).replace(/б/g,"b")).replace(/Ё/g,"yo")).replace(/Й/g,"i")).replace(/Ю/g,"yu")).replace(/Ч/g,"ch")).replace(/і/g,"i")).replace(/є/g,"e")).replace(/ї/g,"i")).replace(/ґ/g,"g")).replace(/:/g,"")).replace(/;/g,"")).replace(/@/g,"")).replace(/#/g,"")).replace(/\$/g,"")).replace(/\^/g,"")).replace(/\*/g,"")).replace(/\%/g,"")).replace(/\+/g,"")).replace(/=/g,"")).replace(/®/g,"")).replace(/\(/g,"")).replace(/\)/g,"")).replace(/ /g,"-")).replace(/\./g,"_")).replace(/,/g,"_")).replace(/«/g,"")).replace(/!/g,"")).replace(/&/g,"")).replace(/\|/g,"")).replace(/\?/g,"_")).replace(/»/g,"")).replace(/'/g,"")).replace(/"/g,"")).replace(/\[/g,"")).replace(/\]/g,"")).replace(/’/g,"")).replace(/</g,"")).replace(/—/g,"")).replace(/–/g,"-")).replace(/€/g,"")).replace(/>/g,"")).replace(/`/g,"")).replace(/~/g,"")).replace(/}/g,"")).replace(/{/g,"")).replace(/№/g,"")).replace(/\//g,"")).replace(/\\/g,"")}jQuery(document).ready(function(){Core.init(),$.getQuery=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null!==n&&n[1]}});var TableBuilder={options:null,files:{},admin_prefix:"",action_url:"",table:"#widget-grid",preloader:"#table-preloader",form_preloader:".form-preloader",form:"#modal_form",form_edit:"#modal_form_edit",form_label:"#modal_form_edit_label",form_wrapper:"#modal_wrapper",create_form:"#create_form",edit_form:"#edit_form",filter:"#filters-row :input",is_page_form:!1,thisFileElementInGroup:null,thisPictureElementInGroup:null,onDoEdit:null,onDoCreate:null,onDoDelete:null,handlerCreate:null,tableEditorImg:null,sort:!0,init:function(e){TableBuilder.options=TableBuilder.getOptions(e),TableBuilder.initSelect2Hider()},optionsInit:function(e){TableBuilder.options=TableBuilder.getOptions(e)},afterLoadPage:function(){$(".selectable").editable(),$(".tb-sort-me-gently",".tb-table").on("mousedown",function(){$(".widget-body",".table-builder").css("overflow-x","visible")}),$(".tb-sort-me-gently",".tb-table").on("mouseup",function(){$(".widget-body",".table-builder").css("overflow-x","scroll")}),$("tbody","#datatable_fixed_column").sortable({scroll:!0,axis:"y",handle:".tb-sort",update:function(){var e=$("tbody","#datatable_fixed_column").sortable("serialize");TableBuilder.saveOrder(e)}})},initFroalaEditor:function(e){var t;t="ua"==langCms?"uk":langCms,$(null==e?".text_block":".modal_form_"+e+" .text_block").each(function(e){var n=$("meta[name=csrf-token]").attr("content"),r={initOnClick:!0,inlineMode:!1,imageUploadURL:"/admin/upload_image?_token="+n,imageManagerDeleteURL:"/admin/delete_image?_token="+n,heightMin:100,heightMax:500,fileMaxSize:1e8,fileUploadURL:"/admin/upload_file?_token="+n,imageManagerLoadURL:"/admin/load_image?_token="+n,imageDeleteURL:"/admin/delete_image?_token="+n,language:t,imageEditButtons:["imageReplace","imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize","crop"]};if($(this).attr("toolbar")){var i=$(this).attr("toolbar").split(",");i=$.map(i,$.trim),r.toolbarButtons=i,r.toolbarButtonsMD=i,r.toolbarButtonsSM=i,r.toolbarButtonsXS=i}if($(this).attr("inlinestyles")&&(r.inlineStyles=JSON.parse($(this).attr("inlinestyles"))),$(this).attr("options")){var a=JSON.parse($(this).attr("options"));for(var o in a)r[o]=a[o]}$(this).froalaEditor(r)}),$(".text_block").on("froalaEditor.initialized",function(e,t){$(this).parent().removeClass("no_active_froala")}),$(".group").on("keyup, blur","[data-multi=multi]",function(){TableBuilder.multiInputAction($(this))}),$(".group [data-multi=multi]").each(function(){TableBuilder.multiInputAction($(this))})},multiInputAction:function(e){var t=e.parents(".input_content").find("input"),n=[],r=e.parents(".tabs_section").find("input[type=hidden]");$(t).each(function(e){n.push($(this).val())}),r.val(JSON.stringify(n))},getActionUrl:function(e){return null!=e?e.parents("form").attr("action"):TableBuilder.action_url?TableBuilder.action_url:"/admin/tree"},initSearchOnEnterPressed:function(){$(document).on("keypress",".filters-row input",function(e){"13"==(e.keyCode?e.keyCode:e.which)&&(TableBuilder.search(),e.preventDefault())})},getOptions:function(e){e=jQuery.extend({lang:{},ident:null,table_ident:null,form_ident:null,action_url:null,list_url:null,is_page_form:!1,onSearchResponse:null,onFastEditResponse:null,onShowEditFormResponse:null},e);return TableBuilder.checkOptions(e),e},checkOptions:function(e){jQuery.each(["ident","table_ident","form_ident","action_url"],function(t,n){null===typeof e[n]&&alert("TableBuilder: ["+n+"] is required option.")})},lang:function(e){return void 0!==TableBuilder.options.lang[e]?TableBuilder.options.lang[e]:e},search:function(){TableBuilder.showProgressBar();var e=$("form[target=submiter]"),t=e.serializeArray();t.push({name:"query_type",value:"search"}),t.push({name:"__node",value:TableBuilder.getUrlParameter("node")}),t=t.concat(e.find("input[type=checkbox]:not(:checked)").map(function(){return{name:this.name,value:0}}).get());var n=TableBuilder.getActionUrl();jQuery.post(n,t).done(function(e){doAjaxLoadContent(location.pathname)})},showProgressBar:function(){console.log(TableBuilder.options),jQuery("#"+TableBuilder.options.ident).find(".ui-overlay").fadeIn()},hideProgressBar:function(){jQuery("#"+TableBuilder.options.ident).find(".ui-overlay").fadeOut()},showFastEdit:function(e){$(".fast-edit-buttons").hide(),$(e).parent().find(".fast-edit-buttons").show()},closeFastEdit:function(e,t,n){$(e).parent().hide()},saveFastEdit:function(e,t,n){var r=$(e).parent().parent().find(".dblclick-edit-input").val();$("tr[id-row="+t+"] .element_"+n).text(r),TableBuilder.closeFastEdit(e);var i=[{name:"query_type",value:"fast_save"},{name:"id",value:t},{name:"name",value:n},{name:"value",value:r}];jQuery.post(TableBuilder.getActionUrl(),i)},activeToggle:function(e,t,n){var r=[{name:"query_type",value:"fast_save"},{name:"id",value:e},{name:"name",value:t},{name:"value",value:n?1:0}];$.post(TableBuilder.getActionUrl(),r)},getUrlParameter:function(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]==e)return r[1]}},getCreateForm:function(){jQuery(TableBuilder.form_edit).remove(),jQuery(TableBuilder.form).remove(),TableBuilder.showPreloader(),jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(),data:{query_type:"show_add_form"},dataType:"json",success:function(e){$(".table_form_create").html(e),jQuery(TableBuilder.form).modal("show"),TableBuilder.initFroalaEditor(),TableBuilder.hidePreloader(),TableBuilder.handleActionSelect(),TableBuilder.refreshMask()},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText),i=r.errors;i.each(function(e,t){console.log(i[e])}),TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},refreshMask:function(){jQuery("#modal_form_edit form, #modal_form form").find("input[data-mask]").each(function(){var e=jQuery(this);e.mask(e.attr("data-mask"))})},initSelect2Hider:function(){jQuery(".modal-dialog").on("click",function(){jQuery('.select2-enabled[id^="many2many"]').select2("close"),jQuery(".select2-hidden-accessible").hide()})},getCloneForm:function(e,t){$.post(TableBuilder.getActionUrl(t),{query_type:"clone_record",id:e}).done(function(e){doAjaxLoadContent(location.href)}).fail(function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()})},handleStartLoad:function(){var e=Core.urlParam("id");$.isNumeric(e)&&TableBuilder.getEditForm(e);var t=Core.urlParam("revision_page");$.isNumeric(t)&&TableBuilder.getRevisions(t);var n=Core.urlParam("views_statistic");$.isNumeric(n)&&TableBuilder.getViewsStatistic(n)},doCustomAction:function(e){TableBuilder.showPreloader(),jQuery.ajax({type:"POST",url:e,data:{},dataType:"json",success:function(e){!0===e.status?jQuery.smallBox({title:e.message,content:"",color:"#659265",iconSmall:"fa fa-check fa-2x fadeInRight animated",timeout:4e3}):jQuery.smallBox({title:null!=e.message?e.message:"Something went wrong, try again later",content:"",color:"#C46A69",iconSmall:"fa fa-times fa-2x fadeInRight animated",timeout:4e3}),TableBuilder.hidePreloader()},error:function(){jQuery.smallBox({title:"Something went wrong, try again later",content:"",color:"#C46A69",iconSmall:"fa fa-times fa-2x fadeInRight animated",timeout:4e3})}})},getEditForm:function(e,t){var n="?id="+e;window.history.pushState(n,"",n),TableBuilder.showPreloader(),jQuery("#wid-id-1").find('tr[data-editing="true"]').removeAttr("data-editing");var r=[{name:"query_type",value:"show_edit_form"},{name:"id",value:e},{name:"__node",value:TableBuilder.getUrlParameter("node")}];jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(t),data:r,dataType:"json",success:function(e){e.status?($(TableBuilder.form_wrapper).html(e.html),$(TableBuilder.form_edit).modal("show").css("top",$(window).scrollTop()),TableBuilder.initFroalaEditor(),TableBuilder.handleActionSelect()):TableBuilder.showErrorNotification("Что-то пошло не так, попробуйте позже"),TableBuilder.hidePreloader()},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},getViewsStatistic:function(e,t){var n="?views_statistic="+e;window.history.pushState(n,"",n),TableBuilder.showPreloader();var r=[{name:"query_type",value:"show_views_statistic"},{name:"id",value:e}];jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl($(t)),data:r,dataType:"json",success:function(e){e.status?(jQuery(TableBuilder.form_wrapper).html(e.html),jQuery(TableBuilder.form_edit).modal("show").css("top",$(window).scrollTop())):TableBuilder.showErrorNotification("Что-то пошло не так, попробуйте позже"),TableBuilder.hidePreloader()},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},getRevisions:function(e,t){var n="?revision_page="+e;window.history.pushState(n,"",n),TableBuilder.showPreloader();var r=[{name:"query_type",value:"show_revisions"},{name:"id",value:e}];jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(t),data:r,dataType:"json",success:function(e){e.status?(jQuery(TableBuilder.form_wrapper).html(e.html),jQuery(TableBuilder.form_edit).modal("show").css("top",$(window).scrollTop())):TableBuilder.showErrorNotification("Что-то пошло не так, попробуйте позже"),TableBuilder.hidePreloader()},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},getReturnHistory:function(e){var t=[{name:"query_type",value:"return_revisions"},{name:"id",value:e}];jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(),data:t,dataType:"json",success:function(e){if(e.status)return TableBuilder.showSuccessNotification("Сохранено"),jQuery(TableBuilder.form_edit).modal("hide"),void window.history.back();TableBuilder.showErrorNotification("Что-то пошло не так, попробуйте позже"),TableBuilder.hidePreloader()},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},doDelete:function(e,t){jQuery.SmartMessageBox({title:phrase["Удалить?"],content:phrase["Эту операцию нельзя будет отменить."],buttons:"["+phrase["Нет"]+"]["+phrase["Да"]+"]"},function(n){n===phrase["Да"]&&(TableBuilder.showPreloader(),jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(t),data:{id:e,query_type:"delete_row",__node:TableBuilder.getUrlParameter("node")},dataType:"json",success:function(t){t.status?(TableBuilder.showSuccessNotification(phrase["Поле удалено успешно"]),jQuery('tr[id-row="'+e+'"]').remove()):TableBuilder.showErrorNotification(phrase["Что-то пошло не так, попробуйте позже"]),TableBuilder.onDoDelete&&TableBuilder.onDoDelete(TableBuilder.getActionUrl()),TableBuilder.hidePreloader()},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}}))})},getHtmlFroala:function(e,t){return $(t+" .text_block").each(function(t){var n=$(this).attr("name");try{var r=$(this).froalaEditor("codeView.get")}catch(e){r=$(this).froalaEditor("html.get")}e.push({name:n,value:r})}),e},doEdit:function(e,t,n,r){var i="#edit_form_"+t;TableBuilder.edit_form=i,TableBuilder.action_url=$(i).attr("action"),TableBuilder.showPreloader(),TableBuilder.showFormPreloader(TableBuilder.form_edit),$(".fr-popup").remove();var a=$(TableBuilder.edit_form).serializeArray();if((a=TableBuilder.getHtmlFroala(a,i)).push({name:"id",value:e}),a.push({name:"query_type",value:"save_edit_form"}),a.push({name:"__node",value:TableBuilder.getUrlParameter("node")}),0!=$(".file_multi").size())for(var o in TableBuilder.buildFiles(),TableBuilder.files){var u=TableBuilder.files[o],l=JSON.stringify(u);a.push({name:o,value:l})}a=a.concat(jQuery(TableBuilder.edit_form).find("input[type=checkbox]:not(:checked)").map(function(){return{name:this.name,value:0}}).get());var s=[];jQuery(TableBuilder.edit_form).find('select[multiple="multiple"]').each(function(e,t){$(this).val()||s.push({name:this.name,value:""})}),jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(),data:a,dataType:"json",success:function(i){if(TableBuilder.hideFormPreloader(TableBuilder.form_edit),i.id){if(""!=n&&""!=r)return r=r.replace(/\\/g,"\\\\"),ForeignDefinition.callbackForeignDefinition(n,r),void TableBuilder.doClosePopup(t);TableBuilder.showSuccessNotification(phrase["Сохранено"]),$(document).height($(window).height()),$(TableBuilder.form_edit).modal("hide"),$(document).height($(window).height()),$("#wid-id-1").find('tr[id-row="'+e+'"]').replaceWith(i.html),TableBuilder.onDoEdit&&TableBuilder.onDoEdit(TableBuilder.getActionUrl()),TableBuilder.clearParamsWithUrl(),TableBuilder.doClosePopup(t)}else{var a="";$(i.errors).each(function(e,t){a+=t+"<br>"}),TableBuilder.showBigErrorNotification(a)}TableBuilder.hidePreloader()},error:function(e,t,n){var r=$.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader(),TableBuilder.hideFormPreloader(TableBuilder.form_edit)}})},buildFiles:function(){$(".file_multi").each(function(e){var t=$(this).attr("nameident");TableBuilder.files[t]={}});var e=0;$(".file_multi").each(function(t){var n=$(this).attr("nameident");TableBuilder.files[n][e]=$(this).attr("value"),e++})},removeInputValues:function(e){jQuery(":input",e).removeAttr("checked").removeAttr("selected").not(':button, :submit, :reset, input[type="hidden"], :radio, :checkbox').val(""),jQuery("textarea",e).text(""),jQuery("input, textarea",e).removeClass("valid").removeClass("invalid"),jQuery(".state-success, .state-error",e).removeClass("state-success").removeClass("state-error")},doCreate:function(e,t,n){TableBuilder.create_form=e,TableBuilder.action_url=$(e).attr("action"),TableBuilder.showPreloader(),TableBuilder.showFormPreloader(TableBuilder.form),$(".fr-popup").remove();var r=jQuery(TableBuilder.create_form).serializeArray();if(r.push({name:"query_type",value:"save_add_form"}),r.push({name:"__node",value:TableBuilder.getUrlParameter("node")}),0!=$(".file_multi").size())for(var i in TableBuilder.buildFiles(),TableBuilder.files){var a=TableBuilder.files[i],o=JSON.stringify(a);r.push({name:i,value:o})}var u=[];jQuery(TableBuilder.create_form).find('select[multiple="multiple"]').each(function(e,t){$(this).val()||u.push({name:this.name,value:""})}),r=r.concat(u),TableBuilder.onDoCreate&&(r=TableBuilder.onDoCreate(r)),r=r.concat(jQuery(TableBuilder.create_form).find("input[type=checkbox]:not(:checked)").map(function(){return{name:this.name,value:0}}).get()),jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(),data:r,dataType:"json",success:function(r){if(TableBuilder.hideFormPreloader(TableBuilder.form),r.id){if(""!=t&&""!=n)return n=n.replace(/\\/g,"\\\\"),void ForeignDefinition.callbackForeignDefinition(t,n);if(TableBuilder.handlerCreate)return void TableBuilder.handlerCreate(TableBuilder.getActionUrl(),r.id);TableBuilder.showSuccessNotification(phrase["Сохранено"]);var i=$(e).parents("#modal_form");TableBuilder.removeInputValues(i),i.modal("hide"),"foreign_popup"==i.parent().attr("class")?i.remove():jQuery("#wid-id-1 .widget-body").find("tbody").prepend(r.html),TableBuilder.onDoCreate&&TableBuilder.onDoCreate(TableBuilder.getActionUrl()),r.isTree&&doAjaxLoadContent(location.href)}else{var a="";jQuery(r.errors).each(function(e,t){a+=t+"<br>"}),TableBuilder.showBigErrorNotification(a)}TableBuilder.hidePreloader()},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader(),TableBuilder.hideFormPreloader(TableBuilder.form)}})},showPreloader:function(){$(TableBuilder.preloader).show()},hidePreloader:function(){$(TableBuilder.preloader).hide()},showFormPreloader:function(e){jQuery(TableBuilder.form_preloader,e).show()},hideFormPreloader:function(e){$(TableBuilder.form_preloader,e).hide()},uploadImage:function(e,t,n){var r=new FormData;r.append("image",e.files[0]),r.append("ident",t),r.append("type","single_photo"),r.append("path_model",e.getAttribute("data-name-model"));var i=$(e).parents(".picture_block").find(".progress-bar");jQuery.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(console.log(e),e.lengthComputable){var t=e.loaded/e.total;t*=100,t+="%",i.width(t)}},!1),e.addEventListener("progress",function(e){if(e.lengthComputable)e.loaded,e.total},!1),e},data:r,type:"POST",url:"/admin/photo/upload",cache:!1,contentType:!1,processData:!1,success:function(t){t.status?(i.width("0%"),$(e).parents(".picture_block").find(".tb-uploaded-image-container").html(t.html),$(e).parents(".picture_block").find("[type=hidden]").val(t.data.sizes.original)):TableBuilder.showErrorNotification(phrase["Ошибка при загрузке изображения"])},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},uploadMultipleImages:function(e,t,n){$(".no_photo").hide();for(var r=e.files,i=0;i<r.length;++i){var a=new FormData;a.append("image",e.files[i]),a.append("ident",t),a.append("baseIdent",n),a.append("path_model",e.getAttribute("data-name-model")),a.append("query_type","upload_photo"),null!=TableBuilder.getUrlParameter("id_tree")&&a.append("page_id",TableBuilder.getUrlParameter("id_tree")),null!=TableBuilder.getUrlParameter("id")&&a.append("page_id",TableBuilder.getUrlParameter("id"));var o=jQuery(e).parent().parent().parent().parent().parent().find(".progress-bar");jQuery.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(console.log(e),e.lengthComputable){var t=e.loaded/e.total;t*=100,t+="%",o.width(t)}},!1),e.addEventListener("progress",function(e){if(e.lengthComputable)e.loaded,e.total},!1),e},data:a,type:"POST",url:"/admin/photo/upload",cache:!1,contentType:!1,processData:!1,success:function(t){t.status?(o.width("0%"),$(e).parents(".multi_pictures").find(".tb-uploaded-image-container ul").append(t.html),TableBuilder.setInputImages(e)):TableBuilder.showErrorNotification(phrase["Ошибка при загрузке изображения"])},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})}},setInputImages:function(e){var t=new Array;$(e).parents(".multi_pictures").find(".tb-uploaded-image-container ul li img").each(function(e){t.push($(this).attr("data_src_original"))});var n=JSON.stringify(t);$(e).parents(".multi_pictures").find("[type=hidden]").val(n)},deleteImage:function(e){var t=$(e).parents(".multi_pictures").find("[type=file]");$(e).parent().parent().remove(),TableBuilder.setInputImages(t)},deleteSingleImage:function(e,t){var n=$(t).parent().parent(),r=$(t).parents(".picture_block").find("input[type=hidden]");n.hide(),r.val("")},doChangeSortingDirection:function(e,t){if(this.sort){var n=[{name:"query_type",value:"change_direction"},{name:"direction",value:$(t).hasClass("sorting_asc")?"desc":"asc"},{name:"field",value:e},{name:"__node",value:TableBuilder.getUrlParameter("node")}];jQuery.ajax({data:n,type:"POST",url:TableBuilder.getActionUrl(),cache:!1,dataType:"json",success:function(e){doAjaxLoadContent(window.location.href)},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message)}})}},doClearOrder:function(){this.sort=!1,jQuery.ajax({data:[{name:"query_type",value:"clear_order_by"}],type:"POST",url:TableBuilder.getActionUrl(),cache:!1,dataType:"json",success:function(e){doAjaxLoadContent(window.location.href),TableBuilder.sort=!0},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.sort=!0}})},uploadFile:function(e,t){var n=new FormData;n.append("file",e.files[0]),n.append("ident",t),n.append("path_model",e.getAttribute("data-name-model")),jQuery.ajax({data:n,type:"POST",url:"/admin/file/upload",cache:!1,contentType:!1,processData:!1,success:function(t){if(t.status){var n='<a href="'+t.link+'" target="_blank">Скачать</a>';$(e).parents(".input-file").next().html(n);var r=$(e).parents(".files_type_fields").find("input[type=text]");r.val(t.long_link),r.trigger("change")}else TableBuilder.showErrorNotification("Ошибка при загрузке файла")},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},uploadFileMulti:function(e,t){for(var n=e.files,r=0;r<n.length;++r){var i=new FormData;i.append("file",e.files[r]),i.append("query_type","upload_file"),i.append("ident",t),i.append("__node",TableBuilder.getUrlParameter("id_tree"));var a=jQuery(e).parent().parent().parent().parent().parent().find(".progress-bar");jQuery.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(console.log(e),e.lengthComputable){var t=e.loaded/e.total;t*=100,t+="%",a.width(t)}},!1),e.addEventListener("progress",function(e){if(e.lengthComputable)e.loaded,e.total},!1),e},data:i,type:"POST",url:TableBuilder.getActionUrl(),cache:!1,contentType:!1,processData:!1,success:function(t){if(t.status){a.width("0%");var n="<li>"+t.short_link+'<a href="'+t.link+'" target="_blank" path="'+t.long_link+'">Скачать</a> <a class="delete" onclick="TableBuilder.doDeleteFile(this)">Удалить</a></li>';$(e).parents(".multi_files").find(".uploaded-files ul").append(n),TableBuilder.doSetInputFiles($(e).parents(".multi_files").find(".uploaded-files ul")),TableBuilder.doSortFileUpload()}else TableBuilder.showErrorNotification("Ошибка при загрузке файла")},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})}},selectImgInStorage:function(e){"one_file"==e.parents("tbody").attr("data-type")&&e.parents("tbody").find(".one_img_uploaded").removeClass("selected"),e.hasClass("selected")?e.removeClass("selected"):e.addClass("selected")},selectWithUploaded:function(e,t,n){var r=n.parents(".files_type_fields");r.find("#files_uploaded_table_"+e).show(),TableBuilder.thisFileElementInGroup=n;var i={query_type:"select_with_uploaded",ident:e,model_definitions:n.attr("data-name-model")};r.find("#files_uploaded_table_"+e+" tbody").html('<tr><td colspan="5" style="text-align: center">Загрузка...</td></tr>'),$.post(TableBuilder.getActionUrl(n),i,function(e){r.find("tbody").html(e.data),r.find("tbody").attr("data-type",t)},"json")},selectWithUploadedImages:function(e,t,n,r,i){TableBuilder.thisPictureElementInGroup=n;var a=n.parents(".pictures_input_field");a.find("#files_uploaded_table_"+r).show();var o={query_type:"select_with_uploaded_images",ident:e,baseName:r,page_id:i,path_model:n.attr("data-name-model")};a.find("#files_uploaded_table_"+r+" tbody").html('<tr><td colspan="5" style="text-align: center">Загрузка...</td></tr>'),$.post("/admin/photo/select_photos",o,function(e){a.find("#files_uploaded_table_"+r+" tbody").html(e.data),a.find("#files_uploaded_table_"+r+" tbody").attr("data-type",t)},"json")},selectFilesUploaded:function(e,t){if("multi"==t)$("#files_uploaded_table_"+e+" input:checked").each(function(t){var n="<li> "+$(this).attr("data-basename")+' <a href="'+$(this).val()+'" target="_blank" path ="'+$(this).val()+'">Скачать</a> <a class="delete" onclick="TableBuilder.doDeleteFile(this)">Удалить</a></li>';$(".tb-uploaded-file-container-"+e+" .ui-sortable").append(n)}),TableBuilder.doSetInputFiles($(".tb-uploaded-file-container-"+e+" ul")),TableBuilder.doSortFileUpload();else{var n=$("#files_uploaded_table_"+e+" input:checked").val(),r=TableBuilder.thisFileElementInGroup.parent().find("input[type=text]");r.val(n),r.trigger("change"),r.parents(".input-file").next().html('<a href="'+n+'" target="_blank">Скачать</a> | <a class="delete" style="color:red;" onclick="$(this).parents(\'.files_type_fields\').find(\'input[type=text]\').val(\'\'); $(this).parent().hide()">Удалить</a>')}$(".files_uploaded_table").hide()},selectImageUploaded:function(e,t){var n=TableBuilder.thisPictureElementInGroup.parents(".pictures_input_field");if("multi"==t)n.find("#files_uploaded_table_"+e+" .one_img_uploaded.selected img").each(function(t){var r=$(this).attr("data-path"),i='<li><img src="'+r+'" data_src_original = "'+r+'" width="120px"><div class="tb-btn-delete-wrap"><button class="btn2 btn-default btn-sm tb-btn-image-delete" type="button" onclick="TableBuilder.deleteImage(this);"><i class="fa fa-times"></i></button></div></li>';n.find(".tb-uploaded-image-container_"+e+" ul").append(i),TableBuilder.setInputImages(".tb-uploaded-image-container_"+e),$(".no_photo").hide()});else{var r=n.find("#files_uploaded_table_"+e+" .one_img_uploaded.selected img").attr("data-path");null!=r&&(n.find("[type=hidden]").val(r),n.find(".image-container_"+e).html('<div style="position: relative; display: inline-block;"><img src="'+r+'" width="200px"><div class="tb-btn-delete-wrap"><button class="btn btn-default btn-sm tb-btn-image-delete" type="button" onclick="TableBuilder.deleteSingleImage(\'picture\', this);"><i class="fa fa-times"></i></button></div></div>'))}n.find("tbody").html(""),$(".files_uploaded_table").hide()},closeWindowWithPictures:function(){$(".files_uploaded_table tbody").html(""),$(".files_uploaded_table").hide()},doSetInputFiles:function(e){var t=new Array;$(e).find("li a").each(function(e){null!=$(this).attr("path")&&t.push($(this).attr("path"))});var n=JSON.stringify(t);"[]"==n&&(n=""),$(e).parent().parent().parent().find("[type=hidden]").val(n)},doDeleteFile:function(e){var t=$(e).parent().parent();return $(e).parent().remove(),TableBuilder.doSetInputFiles(t),!1},changeGalleryAndTags:function(e){var t=e.parents(".filter_gallary_images").find("[name=id_gallery]").val(),n=e.parents(".filter_gallary_images").find("[name=id_tag]").val(),r=e.parents(".filter_gallary_images").find("[name=q]").val(),i={ident:e.parents(".filter_gallary_images").find("[name=ident]").val(),tag:n,gallary:t,q:r,path_model:e.parents(".filter_gallary_images").find("[name=path_model]").val()},a=e.parents("tbody");$.post("/admin/photo/select_photos",i,function(e){a.html(e.data)})},doSortFileUpload:function(){$(".uploaded-files ul").sortable({items:"> li",update:function(e,t){TableBuilder.doSetInputFiles($(this))}})},showErrorNotification:function(e){jQuery.smallBox({title:e,content:"",color:"#C46A69",iconSmall:"fa fa-times fa-2x fadeInRight animated",timeout:1e4,class:"error"})},showSuccessNotification:function(e){jQuery.smallBox({title:e,content:"",color:"#659265",iconSmall:"fa fa-check fadeInRight animated",timeout:3e3})},setPerPageAmount:function(e){TableBuilder.showProgressBar();var t={query_type:"set_per_page",per_page:e,__node:TableBuilder.getUrlParameter("node")};jQuery.post(TableBuilder.getActionUrl(),t).done(function(e){doAjaxLoadContent(location.href)})},flushStorage:function(){TableBuilder.storage={}},showBigErrorNotification:function(e){jQuery.bigBox({content:e,color:"#C46A69",icon:"fa fa-warning shake animated"})},doImport:function(e,t,n){null==n&&(n=TableBuilder.getActionUrl()),TableBuilder.showPreloader();var r=new FormData;r.append("file",e.files[0]),r.append("type",t),r.append("query_type","import"),jQuery.SmartMessageBox({title:"Произвести импорт?",content:"Результат импорта нельзя отменить",buttons:"[Нет][Да]"},function(e){"Да"===e?jQuery.ajax({data:r,type:"POST",url:n,cache:!1,contentType:!1,processData:!1,success:function(e){if(e.status)e.callback&&window[e.callback]?window[e.callback](e):TableBuilder.showSuccessNotification("Импорт прошел успешно");else if(void 0===e.errors)TableBuilder.showErrorNotification("Что-то пошло не так");else{var t="";jQuery(e.errors).each(function(e,n){t+=n+"<br>"}),TableBuilder.showBigErrorNotification(t)}TableBuilder.hidePreloader()},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}}):TableBuilder.hidePreloader()})},doDownloadImportTemplate:function(e){TableBuilder.showPreloader();var t=jQuery("#submiter"),n=new Array;n.push("type="+e),n.push("query_type=get_import_template");var r=document.location.pathname+"?"+n.join("&");t.attr("src",r),TableBuilder.hidePreloader()},doSelectAllMultiCheckboxes:function(e){var t=jQuery("input",e).is(":checked");jQuery(".multi-checkbox input").prop("checked",t)},doMultiActionCall:function(e){TableBuilder.showPreloader();var t=[];$("tbody .multi-checkbox [type=checkbox]:checked").each(function(){t.push($(this).val())});var n=[];n.push({name:"type",value:e}),n.push({name:"query_type",value:"multi_action"}),n.push({name:"__node",value:TableBuilder.getUrlParameter("node")}),n.push({name:"multi_ids",value:t}),jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(),data:n,dataType:"json",success:function(e){if(e.status)e.is_hide_rows&&$(e.ids).each(function(e,t){$('tr[id-row="'+t+'"]').remove()}),TableBuilder.showSuccessNotification(e.message);else if(void 0===e.errors)TableBuilder.showErrorNotification("Что-то пошло не так");else{var t="";jQuery(e.errors).each(function(e,n){t+=n+"<br>"}),TableBuilder.showBigErrorNotification(t)}TableBuilder.hidePreloader()},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},doMultiActionCallWithOption:function(e,t,n){TableBuilder.showPreloader();var r=jQuery("#"+TableBuilder.options.table_ident).serializeArray();r.push({name:"type",value:t}),r.push({name:"option",value:n}),r.push({name:"query_type",value:"multi_action_with_option"}),r.push({name:"__node",value:TableBuilder.getUrlParameter("node")}),jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(),data:r,dataType:"json",success:function(t){if(jQuery(e).parent().parent().parent().removeClass("open"),t.status)t.is_hide_rows&&jQuery(t.ids).each(function(e,t){jQuery('tr[id-row="'+t+'"]',"#"+TableBuilder.options.table_ident).remove()}),TableBuilder.showSuccessNotification(t.message);else if(void 0===t.errors)TableBuilder.showErrorNotification(phrase["Что-то пошло не так, попробуйте позже"]);else{var n="";jQuery(t.errors).each(function(e,t){n+=t+"<br>"}),TableBuilder.showBigErrorNotification(n)}TableBuilder.hidePreloader()},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},saveOrder:function(e){jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(),data:{order:e,params:TableBuilder.getUrlParameter("page"),query_type:"change_order"},dataType:"json",success:function(e){e.status?TableBuilder.showSuccessNotification(phrase["Порядок следования изменен"]):e.message?TableBuilder.showErrorNotification(e.message):TableBuilder.showErrorNotification(phrase["Что-то пошло не так, попробуйте позже"])},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},openImageStorageModal:function(e,t){jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(),data:{query_type:"image_storage",storage_type:"show_modal",__node:TableBuilder.getUrlParameter("node"),storage_type_select:t},dataType:"json",success:function(n){n.status?($(TableBuilder.image_storage_wrapper).html(n.html),$(".image_storage_wrapper").show(),$(".tb-modal:visible").addClass("superbox-modal-hide").hide(),Superbox.input=$(e).parent().parent().find("input"),Superbox.type_select=t):TableBuilder.showErrorNotification(phrase["Что-то пошло не так, попробуйте позже"])},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},closeImageStorageModal:function(){$(".image_storage_wrapper").hide(),$(".superbox-modal-hide").removeClass("superbox-modal-hide").show()},openFileStorageModal:function(e){jQuery.ajax({type:"POST",url:TableBuilder.getActionUrl(),data:{query_type:"file_storage",storage_type:"show_modal",__node:TableBuilder.getUrlParameter("node")},dataType:"json",success:function(t){t.status?($(TableBuilder.image_storage_wrapper).html(t.html),$(".image_storage_wrapper").show(),$(".tb-modal:visible").addClass("superbox-modal-hide").hide(),FileStorage.input=$(e).parent().parent().find("input")):TableBuilder.showErrorNotification(phrase["Что-то пошло не так, попробуйте позже"])},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message),TableBuilder.hidePreloader()}})},reLoadTable:function(){},addGroup:function(e){var t=$(e).parent().find(".section_group").first().clone();$(t).find("input[data-multi=multi]").size()>1&&$(t).find("input[data-multi=multi]").not(":first").remove(),$(t).find("input, textarea").val(""),$(t).find(".tb-uploaded-image-container").html("<ul class='dop_foto'></ul>"),$(t).find(".uploaded-files").html("<ul class='ui-sortable'></ul>"),$(t).find(".tb-uploaded-file-container").html(""),$(e).parent().find(".other_section").append(t),TableBuilder.refreshMask()},deleteGroup:function(e){var t=$(e).parents(".group").find(".section_group").size(),n=$(e).parents(".section_group");1==t?($(n).find("input, textarea").val(""),$(n).find(".tb-uploaded-image-container").html("")):$(n).remove()},handleActionSelect:function(){var e=$("select.action");if(0!=e.size()){var t=e.val();TableBuilder.checkActionSelect(t),e.change(function(){var t=e.val();TableBuilder.checkActionSelect(t)})}},checkActionSelect:function(e){$("section.section_field").hide(),e&&$("section.section_field."+e).show()},doActiveMenu:function(){var e=window.location.pathname;$('nav a[href="'+e+'"]').parent().addClass("active"),$('nav a[href="'+e+'"]').parents(".level1").hasClass("active")||$('nav a[href="'+e+'"]').parents(".level1").addClass("open"),$('nav a[href="'+e+'"]').parents(".level1").find("ul").show()},urlRusLat:function(e){e=e.toLowerCase();for(var t=new Array(["а","a"],["б","b"],["в","v"],["г","g"],["д","d"],["е","e"],["є","ye"],["ё","yo"],["ж","zh"],["з","z"],["і","i"],["и","i"],["й","y"],["к","k"],["л","l"],["м","m"],["н","n"],["о","o"],["п","p"],["р","r"],["с","s"],["т","t"],["у","u"],["ф","f"],["х","h"],["ц","c"],["ч","ch"],["ш","sh"],["щ","shch"],["ъ",""],["ы","y"],["ь",""],["э","e"],["ю","yu"],["я","ya"],["А","A"],["Б","B"],["В","V"],["Г","G"],["Д","D"],["Е","E"],["Ё","YO"],["Ж","ZH"],["З","Z"],["И","I"],["Й","Y"],["К","K"],["Л","L"],["М","M"],["Н","N"],["О","O"],["П","P"],["Р","R"],["С","S"],["Т","T"],["У","U"],["Ф","F"],["Х","H"],["Ц","C"],["Ч","CH"],["Ш","SH"],["Щ","SHCH"],["Ъ",""],["Ы","Y"],["Ь",""],["Э","E"],["Ю","YU"],["Я","YA"],["a","a"],["b","b"],["c","c"],["d","d"],["e","e"],["f","f"],["g","g"],["h","h"],["i","i"],["j","j"],["k","k"],["l","l"],["m","m"],["n","n"],["o","o"],["p","p"],["q","q"],["r","r"],["s","s"],["t","t"],["u","u"],["v","v"],["w","w"],["x","x"],["y","y"],["z","z"],["A","A"],["B","B"],["C","C"],["D","D"],["E","E"],["F","F"],["G","G"],["H","H"],["I","I"],["J","J"],["K","K"],["L","L"],["M","M"],["N","N"],["O","O"],["P","P"],["Q","Q"],["R","R"],["S","S"],["T","T"],["U","U"],["V","V"],["W","W"],["X","X"],["Y","Y"],["Z","Z"],[" ","-"],["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["-","-"]),n=new String,r=0;r<e.length;r++){for(var i=e.charAt(r),a="",o=0;o<t.length;o++)i==t[o][0]&&(a=t[o][1]);n+=a}return n.replace(/[_]{2,}/gim,"_").replace(/\n/gim,"")},doClosePopup:function(e){$(".modal_form_"+e).parent().hasClass("modal_popup_first")&&TableBuilder.hideBackgroundForm();try{TableBuilder.destroyFroala(e)}catch(e){}$(".modal_form_"+e).remove()},destroyFroala:function(e){$(".modal_form_"+e+" .text_block").each(function(e){$(this).froalaEditor("destroy")})},hideBackgroundForm:function(){$("body").removeClass("modal-open").css("padding-right","0"),$(".modal-backdrop").remove(),$("#table-preloader").hide(),TableBuilder.clearParamsWithUrl()},clearParamsWithUrl:function(){var e=Core.delPrm("id");null!=e&&window.history.pushState(e,"",e)},initSortableValue:function(e){e.length&&e.find(".sortable-values").sortable({items:".sortable-item",handle:".sortable-handler",axis:"y",update:function(t,n){TableBuilder.updateSortableValue(e)}}).disableSelection()},updateSortableValue:function(e){var t=e.find(".sortable-item"),n=[],r=e.find("[data-sortable-result]");t.each(function(){var e=$(this).find("input[data-option-activation]");e.length?e.is(":checked")&&n.push(this.getAttribute("data-value")):n.push(this.getAttribute("data-value"))}),r.val(n.join(","))},sendInlineEditForm:function(e,t,n){var r=$(e).closest(".tb-inline-edit-container").find("select, textarea, input").serializeArray();r.push({name:"id",value:n}),r.push({name:"name",value:t}),r.push({name:"query_type",value:"fast_save"});var i=null==TableBuilder.getActionUrl($(e))?"/admin/tree":TableBuilder.getActionUrl($(e));jQuery.ajax({type:"POST",url:i,data:r,dataType:"json",success:function(e){e.status?TableBuilder.showSuccessNotification("Сохранено успешно"):TableBuilder.showErrorNotification("Что-то пошло не так")}})},editFastSetField:function(e){var t=e.attr("data-is-json")?JSON.stringify(e.val()):e.val();$.post(TableBuilder.getActionUrl(e),{name:e.attr("data-name"),id:e.attr("data-id"),value:t,query_type:"fast_save"})}};$(document).on("change",'[data-interface="sortable"] [data-option-activation]',function(){var e=$(this).closest('[data-interface="sortable"]');TableBuilder.updateSortableValue(e)}),$(window).load(function(){TableBuilder.handleStartLoad(),TableBuilder.initSearchOnEnterPressed(),$(document).on("click","a.node_link",function(e){var t=$(this).attr("href");doAjaxLoadContent(t),e.preventDefault()})}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var Export={form:"#tb-export-form",download:function(e){var t=$(Export.form).serializeArray(),n=new Array;t.push({name:"model",value:e}),$.each(t,function(e,t){n.push(t.name+"="+t.value)});var r=TableBuilder.options.action_url+"/export?"+n.join("&");location.href=r}},ForeignDefinition={createDefinition:function(e,t,n,r){var i=jQuery.parseJSON(n),a=i.definition,o=i.foreign_field;if(null==r){var u=e.parent().find(".loader_create_definition");return u.removeClass("hide").text("Сохранение данных.."),e.parents("form").submit(),void(TableBuilder.handlerCreate=function(r,i){jQuery.ajax({type:"POST",url:r,data:{id:i,query_type:"show_edit_form"},dataType:"json",success:function(r){$(".table_form_create").html(r.html),$(".table_form_create #modal_form_edit").addClass("in").show(),e=$(".table_form_create #"+e.attr("id")),TableBuilder.initFroalaEditor(),TableBuilder.refreshMask(),TableBuilder.handleActionSelect(),u.addClass("hide"),ForeignDefinition.sendRequestForShowDefinition(e,t,a,i,o,n)},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message)}})})}ForeignDefinition.sendRequestForShowDefinition(e,t,a,r,o,n)},sendRequestForShowDefinition:function(e,t,n,r,i,a){var o=e.parent().find(".loader_create_definition");o.removeClass("hide").text("Загрузка окна..."),jQuery.ajax({type:"POST",url:"/admin/actions/"+n,data:{query_type:"show_add_form",foreign_field_id:r,foreign_field:i,foreign_attributes:a},success:function(e){$(".foreign_popups").append(e),o.addClass("hide"),ForeignDefinition.afterOpenPopup(t)},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message)}})},callbackForeignDefinition:function(e,t){var n=jQuery.parseJSON(t);TableBuilder.doClosePopup(n.table),$(".definition_"+n.name+" .loader_definition").show();var r="/admin/actions/"+n.definition_parent;jQuery.ajax({type:"POST",url:r,data:{id:e,paramsJson:t,query_type:"get_html_foreign_definition"},dataType:"json",success:function(e){e.html&&($(".definition_"+n.name).html(e.html),null!=n.sortable?$(".definition_"+n.name+" tbody").sortable({handle:".handle",update:function(e,n){ForeignDefinition.changePosition($(this),t)}}):$(".definition_"+n.name+" .col_sort").hide(),null!=n.only_once&&(e.count_records?$(".definition_"+n.name).parent().find(".btn-success").hide():$(".definition_"+n.name).parent().find(".btn-success").show()))},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message)}})},clone:function(e,t,n,r="handle"){n=n.replace(/\\/g,"\\\\");var i=jQuery.parseJSON(n);$(".definition_"+i.name+" .loader_definition").show(),"handle"==r&&(r="/admin/"+r+"/"+i.definition),jQuery.ajax({type:"POST",url:r,data:{id:e,foreign_attributes:n,paramsJson:n,query_type:"clone_foreign_row"},dataType:"json",success:function(e){e.html&&$(".definition_"+i.name).html(e.html)},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message)}})},delete:function(e,t,n,r="handle"){n=n.replace(/\\/g,"\\\\"),jQuery.SmartMessageBox({title:phrase["Удалить?"],content:phrase["Эту операцию нельзя будет отменить."],buttons:"["+phrase["Нет"]+"]["+phrase["Да"]+"]"},function(i){if(i===phrase["Да"]){var a=jQuery.parseJSON(n);$(".definition_"+a.name+" .loader_definition").show(),"handle"==r&&(r="/admin/"+r+"/"+a.definition),jQuery.ajax({type:"POST",url:r,data:{idDelete:e,id:t,paramsJson:n,query_type:"delete_foreign_row"},dataType:"json",success:function(e){e.html&&($(".definition_"+a.name).html(e.html),TableBuilder.showSuccessNotification("Удалено"),null!=a.only_once&&(e.count_records?$(".definition_"+a.name).parent().find(".btn-success").hide():$(".definition_"+a.name).parent().find(".btn-success").show()))},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message)}})}})},edit:function(e,t,n,r="handle"){n=n.replace(/\\/g,"\\\\");var i=jQuery.parseJSON(n),a=$(".loader_definition_"+i.name);a.removeClass("hide").text("Загрузка окна..."),jQuery.ajax({type:"POST",url:"/admin/"+r+"/"+i.definition,data:{id:e,idUpdate:t,foreign_attributes:n,foreign_field:i.foreign_field,foreign_field_id:t,query_type:"show_edit_form"},dataType:"json",success:function(e){$(".foreign_popups").append(e.html),a.addClass("hide"),ForeignDefinition.afterOpenPopup(i.table)},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message)}})},afterOpenPopup:function(e){$(".foreign_popups .fade").addClass("in").show(),$(".modal_form_"+e).css("top",$(window).scrollTop()+50),$(".modal-dialog").draggable({handle:".modal-header"}),TableBuilder.initFroalaEditor(e),TableBuilder.handleActionSelect(),$(".datepicker").datepicker({changeMonth:!0,numberOfMonths:1,prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>',dateFormat:"yy-mm-dd",regional:["ru"],onClose:function(e){}})},changePosition:function(e,t){var n=new Array,r=(JSON.stringify(n),jQuery.parseJSON(t)),i=$(".definition_"+r.name+" tbody").sortable("serialize");console.log(i),console.log(".definition_"+r.name+" tbody"),jQuery.ajax({type:"POST",url:"/admin/actions/"+r.definition,data:{order:i,query_type:"change_order",foreign_attributes:t},dataType:"json",success:function(e){TableBuilder.showSuccessNotification("Порядок сохранен")},error:function(e,t,n){var r=jQuery.parseJSON(e.responseText);TableBuilder.showErrorNotification(r.message)}})}};!function(){Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(n){var e=CSSStyleDeclaration.prototype,t=e.setProperty;e.setProperty=function(e,n,r){t.call(this,e,n+"",r)}}var n={};var r=function(e){return Array.prototype.slice.call(e)};try{r(document.documentElement.childNodes)[0].nodeType}catch(e){r=function(e){for(var t=-1,n=e.length,r=[];++t<n;)r.push(e[t]);return r}}var i=[].__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function a(){}n.map=function(e){var t=new a;for(var n in e)t.set(n,e[n]);return t},function(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(n){e.prototype=t}}(a,{has:function(e){return o+e in this},get:function(e){return this[o+e]},set:function(e,t){return this[o+e]=t},remove:function(e){return(e=o+e)in this&&delete this[e]},keys:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===u&&e.call(this,t.substring(1),this[t])}});var o="\0",u=o.charCodeAt(0);function l(e){return e}function s(){return this}function c(){return!0}function f(e){return"function"==typeof e?e:function(){return e}}function h(e,t,n){return function(){var r=n.apply(t,arguments);return arguments.length?e:r}}function d(e){return null!=e&&!isNaN(e)}function p(e){return e.length}n.functor=f,n.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=h(e,t,t[n]);return e},n.ascending=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},n.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},n.mean=function(e,t){var n,r=e.length,i=0,a=-1,o=0;if(1===arguments.length)for(;++a<r;)d(n=e[a])&&(i+=(n-i)/++o);else for(;++a<r;)d(n=t.call(e,e[a],a))&&(i+=(n-i)/++o);return o?i:void 0},n.median=function(e,t){return arguments.length>1&&(e=e.map(t)),(e=e.filter(d)).length?n.quantile(e.sort(n.ascending),.5):void 0},n.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a&&(null==(n=e[i])||n!=n);)n=void 0;for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a&&(null==(n=t.call(e,e[i],i))||n!=n);)n=void 0;for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},n.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a&&(null==(n=e[i])||n!=n);)n=void 0;for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a&&(null==(n=t.call(e,e[i],i))||n!=n);)n=void 0;for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},n.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o&&(null==(n=i=e[a])||n!=n);)n=i=void 0;for(;++a<o;)null!=(r=e[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o&&(null==(n=i=t.call(e,e[a],a))||n!=n);)n=void 0;for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},n.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(e,t){var r=arguments.length;r<2&&(t=1),r<1&&(e=0);var i=n.random.normal();return function(){return Math.exp(e+t*i())}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t/e}}},n.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)isNaN(n=+e[a])||(r+=n);else for(;++a<i;)isNaN(n=+t.call(e,e[a],a))||(r+=n);return r},n.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=e[r-1],a=n-r;return a?i+a*(e[r]-i):i},n.transpose=function(e){return n.zip.apply(n,e)},n.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=n.min(arguments,p),r=new Array(t);++e<t;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=arguments[a][e];return r},n.bisector=function(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e.call(t,t[a],a)<n?r=a+1:i=a}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;n<e.call(t,t[a],a)?i=a:r=a+1}return r}}};var g=n.bisector(function(e){return e});function m(e){return null==e}function y(e){return e.trim().replace(/\s+/g," ")}n.bisectLeft=g.left,n.bisect=n.bisectRight=g.right,n.first=function(e,t){var r,i=0,a=e.length,o=e[0];for(1===arguments.length&&(t=n.ascending);++i<a;)t.call(e,o,r=e[i])>0&&(o=r);return o},n.last=function(e,t){var r,i=0,a=e.length,o=e[0];for(1===arguments.length&&(t=n.ascending);++i<a;)t.call(e,o,r=e[i])<=0&&(o=r);return o},n.nest=function(){var e,t,n={},r=[],i=[];function o(i,u){if(u>=r.length)return t?t.call(n,i):e?i.sort(e):i;for(var l,s,c,f=-1,h=i.length,d=r[u++],p=new a,g={};++f<h;)(c=p.get(l=d(s=i[f])))?c.push(s):p.set(l,[s]);return p.forEach(function(e){g[e]=o(p.get(e),u)}),g}return n.map=function(e){return o(e,0)},n.entries=function(e){return function e(t,n){if(n>=r.length)return t;var a,o=[],u=i[n++];for(a in t)o.push({key:a,values:e(t[a],n)});return u&&o.sort(function(e,t){return u(e.key,t.key)}),o}(o(e,0),0)},n.key=function(e){return r.push(e),n},n.sortKeys=function(e){return i[r.length-1]=e,n},n.sortValues=function(t){return e=t,n},n.rollup=function(e){return t=e,n},n},n.keys=function(e){var t=[];for(var n in e)t.push(n);return t},n.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},n.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},n.permute=function(e,t){for(var n=[],r=-1,i=t.length;++r<i;)n[r]=e[t[r]];return n},n.merge=function(e){return Array.prototype.concat.apply([],e)},n.split=function(e,t){var n,r=[],i=[],a=-1,o=e.length;for(arguments.length<2&&(t=m);++a<o;)t.call(i,n=e[a],a)?i=[]:(i.length||r.push(i),i.push(n));return r},n.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],a=function(e){var t=1;for(;e*t%1;)t*=10;return t}(Math.abs(n)),o=-1;if(e*=a,t*=a,(n*=a)<0)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},n.requote=function(e){return e.replace(v,"\\$&")};var v=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;n.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},n.xhr=function(e,t,n){var r=new XMLHttpRequest;arguments.length<3?(n=t,t=null):t&&r.overrideMimeType&&r.overrideMimeType(t),r.open("GET",e,!0),t&&r.setRequestHeader("Accept",t),r.onreadystatechange=function(){if(4===r.readyState){var e=r.status;n(!e&&r.response||e>=200&&e<300||304===e?r:null)}},r.send(null)},n.text=function(e,t,r){arguments.length<3&&(r=t,t=null),n.xhr(e,t,function(e){r(e&&e.responseText)})},n.json=function(e,t){n.text(e,"application/json",function(e){t(e?JSON.parse(e):null)})},n.html=function(e,t){n.text(e,"text/html",function(e){if(null!=e){var n=document.createRange();n.selectNode(document.body),e=n.createContextualFragment(e)}t(e)})},n.xml=function(e,t,r){arguments.length<3&&(r=t,t=null),n.xhr(e,t,function(e){r(e&&e.responseXML)})};var b={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function x(){}function _(e){var t=[],n=new a;function r(){for(var n,r=t,i=-1,a=r.length;++i<a;)(n=r[i].on)&&n.apply(this,arguments);return e}return r.on=function(r,i){var a,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,t=t.slice(0,a=t.indexOf(o)).concat(t.slice(a+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}n.ns={prefix:b,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),b.hasOwnProperty(n)?{space:b[n],local:e}:e}},n.dispatch=function(){for(var e=new x,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=_(e);return e},x.prototype.on=function(e,t){var n=e.indexOf("."),r="";return n>0&&(r=e.substring(n+1),e=e.substring(0,n)),arguments.length<2?this[e].on(r):this[e].on(r,t)},n.format=function(e){var t=w.exec(e),r=t[1]||" ",i=t[3]||"",a=t[5],o=+t[6],u=t[7],l=t[8],s=t[9],c=1,f="",h=!1;switch(l&&(l=+l.substring(1)),a&&(r="0",u&&(o-=Math.floor((o-1)/4))),s){case"n":u=!0,s="g";break;case"%":c=100,f="%",s="f";break;case"p":c=100,f="%",s="r";break;case"d":h=!0,l=0;break;case"s":c=-1,s="r"}return"r"!=s||l||(s="g"),s=T.get(s)||S,function(e){if(h&&e%1)return"";var t,d=e<0&&(e=-e)?"-":i;if(c<0){var p=n.formatPrefix(e,l);e=p.scale(e),f=p.symbol}else e*=c;(e=s(e,l),a)?((t=e.length+d.length)<o&&(e=new Array(o-t+1).join(r)+e),u&&(e=k(e)),e=d+e):(u&&(e=k(e)),(t=(e=d+e).length)<o&&(e=new Array(o-t+1).join(r)+e));return e+f}};var w=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,T=n.map({g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return n.round(e,t=M(e,t)).toFixed(Math.max(0,Math.min(20,t)))}});function M(e,t){return t-(e?1+Math.floor(Math.log(e+Math.pow(10,1+Math.floor(Math.log(e)/Math.LN10)-t))/Math.LN10):1)}function S(e){return e+""}function k(e){for(var t=e.lastIndexOf("."),n=t>=0?e.substring(t):(t=e.length,""),r=[];t>0;)r.push(e.substring(t-=3,t+3));return r.reverse().join(",")+n}var N=["y","z","a","f","p","n","μ","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*Math.abs(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}});n.formatPrefix=function(e,t){var r=0;return e&&(e<0&&(e*=-1),t&&(e=n.round(e,M(e,t))),r=1+Math.floor(1e-12+Math.log(e)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r<=0?r+1:r-1)/3)))),N[8+r/3]};var C=$(2),j=$(3),A=function(){return P},B=n.map({linear:A,poly:$,quad:function(){return C},cubic:function(){return j},sin:function(){return F},exp:function(){return q},circle:function(){return L},elastic:function(e,t){var n;arguments.length<2&&(t=.45);arguments.length<1?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e);return function(r){return 1+e*Math.pow(2,10*-r)*Math.sin(2*(r-n)*Math.PI/t)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return I}}),E=n.map({in:P,out:D,"in-out":O,"out-in":function(e){return O(D(e))}});function D(e){return function(t){return 1-e(1-t)}}function O(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function P(e){return e}function $(e){return function(t){return Math.pow(t,e)}}function F(e){return 1-Math.cos(e*Math.PI/2)}function q(e){return Math.pow(2,10*(e-1))}function L(e){return 1-Math.sqrt(1-e*e)}function I(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function R(){n.event.stopPropagation(),n.event.preventDefault()}function H(){for(var e,t=n.event;e=t.sourceEvent;)t=e;return t}function z(e){for(var t=new x,r=0,i=arguments.length;++r<i;)t[arguments[r]]=_(t);return t.of=function(r,i){return function(a){try{var o=a.sourceEvent=n.event;a.target=e,n.event=a,t[a.type].apply(r,i)}finally{n.event=o}}},t}function U(e){var t,n,r,i=[e.a,e.b],a=[e.c,e.d],o=W(i),u=Q(i,a),l=W(((t=a)[0]+=(r=-u)*(n=i)[0],t[1]+=r*n[1],t))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,u*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*Y,this.translate=[e.e,e.f],this.scale=[o,l],this.skew=l?Math.atan2(u,l)*Y:0}function Q(e,t){return e[0]*t[0]+e[1]*t[1]}function W(e){var t=Math.sqrt(Q(e,e));return t&&(e[0]/=t,e[1]/=t),t}n.ease=function(e){var t,n=e.indexOf("-"),r=n>=0?e.substring(0,n):e,i=n>=0?e.substring(n+1):"in";return r=B.get(r)||A,i=E.get(i)||P,t=i(r.apply(null,Array.prototype.slice.call(arguments,1))),function(e){return e<=0?0:e>=1?1:t(e)}},n.event=null,n.transform=function(e){var t=document.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate();return new U(n?n.matrix:V)})(e)},U.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Y=180/Math.PI,V={a:1,b:0,c:0,d:1,e:0,f:0};n.interpolate=function(e,t){for(var r,i=n.interpolators.length;--i>=0&&!(r=n.interpolators[i](e,t)););return r},n.interpolateNumber=function(e,t){return t-=e,function(n){return e+t*n}},n.interpolateRound=function(e,t){return t-=e,function(n){return Math.round(e+t*n)}},n.interpolateString=function(e,t){var r,i,a,o,u,l=0,s=[],c=[];for(J.lastIndex=0,i=0;r=J.exec(t);++i)r.index&&s.push(t.substring(l,r.index)),c.push({i:s.length,x:r[0]}),s.push(null),l=J.lastIndex;for(l<t.length&&s.push(t.substring(l)),i=0,o=c.length;(r=J.exec(e))&&i<o;++i)if((u=c[i]).x==r[0]){if(u.i)if(null==s[u.i+1])for(s[u.i-1]+=u.x,s.splice(u.i,1),a=i+1;a<o;++a)c[a].i--;else for(s[u.i-1]+=u.x+s[u.i+1],s.splice(u.i,2),a=i+1;a<o;++a)c[a].i-=2;else if(null==s[u.i+1])s[u.i]=u.x;else for(s[u.i]=u.x+s[u.i+1],s.splice(u.i+1,1),a=i+1;a<o;++a)c[a].i--;c.splice(i,1),o--,i--}else u.x=n.interpolateNumber(parseFloat(r[0]),parseFloat(u.x));for(;i<o;)u=c.pop(),null==s[u.i+1]?s[u.i]=u.x:(s[u.i]=u.x+s[u.i+1],s.splice(u.i+1,1)),o--;return 1===s.length?null==s[0]?c[0].x:function(){return t}:function(e){for(i=0;i<o;++i)s[(u=c[i]).i]=u.x(e);return s.join("")}},n.interpolateTransform=function(e,t){var r,i=[],a=[],o=n.transform(e),u=n.transform(t),l=o.translate,s=u.translate,c=o.rotate,f=u.rotate,h=o.skew,d=u.skew,p=o.scale,g=u.scale;return l[0]!=s[0]||l[1]!=s[1]?(i.push("translate(",null,",",null,")"),a.push({i:1,x:n.interpolateNumber(l[0],s[0])},{i:3,x:n.interpolateNumber(l[1],s[1])})):s[0]||s[1]?i.push("translate("+s+")"):i.push(""),c!=f?(c-f>180?f+=360:f-c>180&&(c+=360),a.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:n.interpolateNumber(c,f)})):f&&i.push(i.pop()+"rotate("+f+")"),h!=d?a.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:n.interpolateNumber(h,d)}):d&&i.push(i.pop()+"skewX("+d+")"),p[0]!=g[0]||p[1]!=g[1]?(r=i.push(i.pop()+"scale(",null,",",null,")"),a.push({i:r-4,x:n.interpolateNumber(p[0],g[0])},{i:r-2,x:n.interpolateNumber(p[1],g[1])})):1==g[0]&&1==g[1]||i.push(i.pop()+"scale("+g+")"),r=a.length,function(e){for(var t,n=-1;++n<r;)i[(t=a[n]).i]=t.x(e);return i.join("")}},n.interpolateRgb=function(e,t){e=n.rgb(e),t=n.rgb(t);var r=e.r,i=e.g,a=e.b,o=t.r-r,u=t.g-i,l=t.b-a;return function(e){return"#"+te(Math.round(r+o*e))+te(Math.round(i+u*e))+te(Math.round(a+l*e))}},n.interpolateHsl=function(e,t){e=n.hsl(e),t=n.hsl(t);var r=e.h,i=e.s,a=e.l,o=t.h-r,u=t.s-i,l=t.l-a;return o>180?o-=360:o<-180&&(o+=360),function(e){return ce(r+o*e,i+u*e,a+l*e)+""}},n.interpolateLab=function(e,t){e=n.lab(e),t=n.lab(t);var r=e.l,i=e.a,a=e.b,o=t.l-r,u=t.a-i,l=t.b-a;return function(e){return xe(r+o*e,i+u*e,a+l*e)+""}},n.interpolateHcl=function(e,t){e=n.hcl(e),t=n.hcl(t);var r=e.h,i=e.c,a=e.l,o=t.h-r,u=t.c-i,l=t.l-a;return o>180?o-=360:o<-180&&(o+=360),function(e){return de(r+o*e,i+u*e,a+l*e)+""}},n.interpolateArray=function(e,t){var r,i=[],a=[],o=e.length,u=t.length,l=Math.min(e.length,t.length);for(r=0;r<l;++r)i.push(n.interpolate(e[r],t[r]));for(;r<o;++r)a[r]=e[r];for(;r<u;++r)a[r]=t[r];return function(e){for(r=0;r<l;++r)a[r]=i[r](e);return a}},n.interpolateObject=function(e,t){var n,r={},i={};for(n in e)n in t?r[n]=X(n)(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}};var J=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;function X(e){return"transform"==e?n.interpolateTransform:n.interpolate}function Z(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function G(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function K(e,t,n){return new ee(e,t,n)}function ee(e,t,n){this.r=e,this.g=t,this.b=n}function te(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ne(e,t,n){var r,i,a,o=0,u=0,l=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(oe(i[0]),oe(i[1]),oe(i[2]))}return(a=ue.get(e))?t(a.r,a.g,a.b):(null!=e&&"#"===e.charAt(0)&&(4===e.length?(o=e.charAt(1),o+=o,u=e.charAt(2),u+=u,l=e.charAt(3),l+=l):7===e.length&&(o=e.substring(1,3),u=e.substring(3,5),l=e.substring(5,7)),o=parseInt(o,16),u=parseInt(u,16),l=parseInt(l,16)),t(o,u,l))}function re(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),u=o-a,l=(o+a)/2;return u?(i=l<.5?u/(o+a):u/(2-o-a),r=e==o?(t-n)/u+(t<n?6:0):t==o?(n-e)/u+2:(e-t)/u+4,r*=60):i=r=0,le(r,i,l)}function ie(e,t,n){var r=Te((.4124564*(e=ae(e))+.3575761*(t=ae(t))+.1804375*(n=ae(n)))/ye),i=Te((.2126729*e+.7151522*t+.072175*n)/ve);return pe(116*i-16,500*(r-i),200*(i-Te((.0193339*e+.119192*t+.9503041*n)/be)))}function ae(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function oe(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}n.interpolators=[n.interpolateObject,function(e,t){return t instanceof Array&&n.interpolateArray(e,t)},function(e,t){return("string"==typeof e||"string"==typeof t)&&n.interpolateString(e+"",t+"")},function(e,t){return("string"==typeof t?ue.has(t)||/^(#|rgb\(|hsl\()/.test(t):t instanceof ee||t instanceof se)&&n.interpolateRgb(e,t)},function(e,t){return!isNaN(e=+e)&&!isNaN(t=+t)&&n.interpolateNumber(e,t)}],n.rgb=function(e,t,n){return 1===arguments.length?e instanceof ee?K(e.r,e.g,e.b):ne(""+e,K,ce):K(~~e,~~t,~~n)},ee.prototype.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),K(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(r/e)))):K(i,i,i)},ee.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),K(Math.floor(e*this.r),Math.floor(e*this.g),Math.floor(e*this.b))},ee.prototype.hsl=function(){return re(this.r,this.g,this.b)},ee.prototype.toString=function(){return"#"+te(this.r)+te(this.g)+te(this.b)};var ue=n.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});function le(e,t,n){return new se(e,t,n)}function se(e,t,n){this.h=e,this.s=t,this.l=n}function ce(e,t,n){var r,i;function a(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}(e))}return(e%=360)<0&&(e+=360),t=t<0?0:t>1?1:t,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),K(a(e+120),a(e),a(e-120))}function fe(e,t,n){return new he(e,t,n)}function he(e,t,n){this.h=e,this.c=t,this.l=n}function de(e,t,n){return pe(n,Math.cos(e*=Math.PI/180)*t,Math.sin(e)*t)}function pe(e,t,n){return new ge(e,t,n)}function ge(e,t,n){this.l=e,this.a=t,this.b=n}ue.forEach(function(e,t){ue.set(e,ne(t,K,ce))}),n.hsl=function(e,t,n){return 1===arguments.length?e instanceof se?le(e.h,e.s,e.l):ne(""+e,re,le):le(+e,+t,+n)},se.prototype.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),le(this.h,this.s,this.l/e)},se.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),le(this.h,this.s,e*this.l)},se.prototype.rgb=function(){return ce(this.h,this.s,this.l)},se.prototype.toString=function(){return this.rgb().toString()},n.hcl=function(e,t,r){return 1===arguments.length?e instanceof he?fe(e.h,e.c,e.l):_e(e instanceof ge?e.l:(e=ie((e=n.rgb(e)).r,e.g,e.b)).l,e.a,e.b):fe(+e,+t,+r)},he.prototype.brighter=function(e){return fe(this.h,this.c,Math.min(100,this.l+me*(arguments.length?e:1)))},he.prototype.darker=function(e){return fe(this.h,this.c,Math.max(0,this.l-me*(arguments.length?e:1)))},he.prototype.rgb=function(){return de(this.h,this.c,this.l).rgb()},he.prototype.toString=function(){return this.rgb()+""},n.lab=function(e,t,r){return 1===arguments.length?e instanceof ge?pe(e.l,e.a,e.b):e instanceof he?de(e.l,e.c,e.h):ie((e=n.rgb(e)).r,e.g,e.b):pe(+e,+t,+r)};var me=18,ye=.95047,ve=1,be=1.08883;function xe(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return K(Me(3.2404542*(i=we(i)*ye)-1.5371385*(r=we(r)*ve)-.4985314*(a=we(a)*be)),Me(-.969266*i+1.8760108*r+.041556*a),Me(.0556434*i-.2040259*r+1.0572252*a))}function _e(e,t,n){return fe(Math.atan2(n,t)/Math.PI*180,Math.sqrt(t*t+n*n),e)}function we(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function Te(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function Me(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function Se(e){return i(e,Be),e}ge.prototype.brighter=function(e){return pe(Math.min(100,this.l+me*(arguments.length?e:1)),this.a,this.b)},ge.prototype.darker=function(e){return pe(Math.max(0,this.l-me*(arguments.length?e:1)),this.a,this.b)},ge.prototype.rgb=function(){return xe(this.l,this.a,this.b)},ge.prototype.toString=function(){return this.rgb()+""};var ke=function(e,t){return t.querySelector(e)},Ne=function(e,t){return t.querySelectorAll(e)},Ce=document.documentElement,je=Ce.matchesSelector||Ce.webkitMatchesSelector||Ce.mozMatchesSelector||Ce.msMatchesSelector||Ce.oMatchesSelector,Ae=function(e,t){return je.call(e,t)};"function"==typeof Sizzle&&(ke=function(e,t){return Sizzle(e,t)[0]||null},Ne=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},Ae=Sizzle.matchesSelector);var Be=[];function Ee(e){return function(){return ke(e,this)}}function De(e){return function(){return Ne(e,this)}}function Oe(e,t){return e=n.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function Pe(e){return new RegExp("(?:^|\\s+)"+n.requote(e)+"(?:\\s+|$)","g")}function $e(e,t){var n=(e=e.trim().split(/\s+/).map(Fe)).length;return"function"==typeof t?function(){for(var r=-1,i=t.apply(this,arguments);++r<n;)e[r](this,i)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function Fe(e){var t=Pe(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.className,a=null!=i.baseVal,o=a?i.baseVal:i;r?(t.lastIndex=0,t.test(o)||(o=y(o+" "+e),a?i.baseVal=o:n.className=o)):o&&(o=y(o.replace(t," ")),a?i.baseVal=o:n.className=o)}}function qe(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function Le(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function Ie(e){return{__data__:e}}function Re(e){return function(){return Ae(this,e)}}function He(e,t,r){var i="__on"+e,a=e.indexOf(".");function o(){var t=this[i];t&&(this.removeEventListener(e,t,t.$),delete this[i])}return a>0&&(e=e.substring(0,a)),t?function(){var a=this,u=arguments;function l(e){var r=n.event;n.event=e,u[0]=a.__data__;try{t.apply(a,u)}finally{n.event=r}}o.call(this),this.addEventListener(e,this[i]=l,l.$=r),l._=t}:o}function ze(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,a=e[n],o=0,u=a.length;o<u;o++)(i=a[o])&&t(i,o,n);return e}n.selection=function(){return Ue},n.selection.prototype=Be,Be.select=function(e){var t,n,r,i,a=[];"function"!=typeof e&&(e=Ee(e));for(var o=-1,u=this.length;++o<u;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,s=r.length;++l<s;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return Se(a)},Be.selectAll=function(e){var t,n,i=[];"function"!=typeof e&&(e=De(e));for(var a=-1,o=this.length;++a<o;)for(var u=this[a],l=-1,s=u.length;++l<s;)(n=u[l])&&(i.push(t=r(e.call(n,n.__data__,l))),t.parentNode=n);return Se(i)},Be.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var r=this.node();return(e=n.ns.qualify(e)).local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(t in e)this.each(Oe(t,e[t]));return this}return this.each(Oe(e,t))},Be.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=e.trim().split(/^|\s+/g)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(null!=(t=n.className).baseVal&&(t=t.baseVal);++i<r;)if(!Pe(e[i]).test(t))return!1;return!0}for(t in e)this.each($e(t,e[t]));return this}return this.each($e(e,t))},Be.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(qe(n,e[n],t));return this}if(r<2)return window.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(qe(e,t,n))},Be.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(Le(t,e[t]));return this}return this.each(Le(e,t))},Be.text=function(e){return arguments.length<1?this.node().textContent:this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e})},Be.html=function(e){return arguments.length<1?this.node().innerHTML:this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e})},Be.append=function(e){return e=n.ns.qualify(e),this.select(e.local?function(){return this.appendChild(document.createElementNS(e.space,e.local))}:function(){return this.appendChild(document.createElementNS(this.namespaceURI,e))})},Be.insert=function(e,t){return e=n.ns.qualify(e),this.select(e.local?function(){return this.insertBefore(document.createElementNS(e.space,e.local),ke(t,this))}:function(){return this.insertBefore(document.createElementNS(this.namespaceURI,e),ke(t,this))})},Be.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},Be.data=function(e,t){var n,r,i=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(n=this[0]).length);++i<o;)(r=n[i])&&(e[i]=r.__data__);return e}function u(e,n){var r,i,o,u=e.length,f=n.length,h=Math.min(u,f),d=Math.max(u,f),p=[],g=[],m=[];if(t){var y,v=new a,b=[],x=n.length;for(r=-1;++r<u;)y=t.call(i=e[r],i.__data__,r),v.has(y)?m[x++]=i:v.set(y,i),b.push(y);for(r=-1;++r<f;)y=t.call(n,o=n[r],r),v.has(y)?(p[r]=i=v.get(y),i.__data__=o,g[r]=m[r]=null):(g[r]=Ie(o),p[r]=m[r]=null),v.remove(y);for(r=-1;++r<u;)v.has(b[r])&&(m[r]=e[r])}else{for(r=-1;++r<h;)i=e[r],o=n[r],i?(i.__data__=o,p[r]=i,g[r]=m[r]=null):(g[r]=Ie(o),p[r]=m[r]=null);for(;r<f;++r)g[r]=Ie(n[r]),p[r]=m[r]=null;for(;r<d;++r)m[r]=e[r],g[r]=p[r]=null}g.update=p,g.parentNode=p.parentNode=m.parentNode=e.parentNode,l.push(g),s.push(p),c.push(m)}var l=Qe([]),s=Se([]),c=Se([]);if("function"==typeof e)for(;++i<o;)u(n=this[i],e.call(n,n.parentNode.__data__,i));else for(;++i<o;)u(n=this[i],e);return s.enter=function(){return l},s.exit=function(){return c},s},Be.datum=Be.map=function(e){return arguments.length<1?this.property("__data__"):this.property("__data__",e)},Be.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=Re(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var u=0,l=n.length;u<l;u++)(r=n[u])&&e.call(r,r.__data__,u)&&t.push(r)}return Se(i)},Be.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Be.sort=function(e){e=function(e){arguments.length||(e=n.ascending);return function(t,n){return e(t&&t.__data__,n&&n.__data__)}}.apply(this,arguments);for(var t=-1,r=this.length;++t<r;)this[t].sort(e);return this.order()},Be.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(He(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(He(e,t,n))},Be.each=function(e){return ze(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Be.call=function(e){return e.apply(this,(arguments[0]=this,arguments)),this},Be.empty=function(){return!this.node()},Be.node=function(e){for(var t=0,n=this.length;t<n;t++)for(var r=this[t],i=0,a=r.length;i<a;i++){var o=r[i];if(o)return o}return null},Be.transition=function(){for(var e,t,n=[],r=-1,i=this.length;++r<i;){n.push(e=[]);for(var a=this[r],o=-1,u=a.length;++o<u;)e.push((t=a[o])?{node:t,delay:Ge,duration:Ke}:null)}return Ye(n,Xe||++Je,Date.now())};var Ue=Se([[document]]);function Qe(e){return i(e,We),e}Ue[0].parentNode=Ce,n.select=function(e){return"string"==typeof e?Ue.select(e):Se([[e]])},n.selectAll=function(e){return"string"==typeof e?Ue.selectAll(e):Se([r(e)])};var We=[];function Ye(e,t,r){i(e,Ve);var o=new a,u=n.dispatch("start","end"),l=et;return e.id=t,e.time=r,e.tween=function(t,n){return arguments.length<2?o.get(t):(null==n?o.remove(t):o.set(t,n),e)},e.ease=function(t){return arguments.length?(l="function"==typeof t?t:n.ease.apply(n,arguments),e):l},e.each=function(t,n){return arguments.length<2?function(e){var t=Xe,n=et,r=Ge,i=Ke;return Xe=this.id,et=this.ease(),ze(this,function(t,n,r){Ge=t.delay,Ke=t.duration,e.call(t=t.node,t.__data__,n,r)}),Xe=t,et=n,Ge=r,Ke=i,this}.call(e,t):(u.on(t,n),e)},n.timer(function(i){return ze(e,function(e,a,s){var c=[],f=e.delay,h=e.duration,d=(e=e.node).__transition__||(e.__transition__={active:0,count:0}),p=e.__data__;function g(i){return d.active>t?y():(d.active=t,o.forEach(function(t,n){(n=n.call(e,p,a))&&c.push(n)}),u.start.call(e,p,a),m(i)||n.timer(m,0,r),1)}function m(n){if(d.active!==t)return y();for(var r=(n-f)/h,i=l(r),o=c.length;o>0;)c[--o].call(e,i);return r>=1?(y(),Xe=t,u.end.call(e,p,a),Xe=0,1):void 0}function y(){return--d.count||delete e.__transition__,1}++d.count,f<=i?g(i):n.timer(g,f,r)})},0,r),e}n.selection.enter=Qe,n.selection.enter.prototype=We,We.append=Be.append,We.insert=Be.insert,We.empty=Be.empty,We.node=Be.node,We.select=function(e){for(var t,n,r,i,a,o=[],u=-1,l=this.length;++u<l;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var s=-1,c=i.length;++s<c;)(a=i[s])?(t.push(r[s]=n=e.call(i.parentNode,a.__data__,s)),n.__data__=a.__data__):t.push(null)}return Se(o)};var Ve=[],Je=0,Xe=0,Ze=n.ease("cubic-in-out"),Ge=0,Ke=250,et=Ze;Ve.call=Be.call,n.transition=function(e){return arguments.length?Xe?e.transition():e:Ue.transition()},n.transition.prototype=Ve,Ve.select=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=Ee(e));for(var a=-1,o=this.length;++a<o;){i.push(t=[]);for(var u=this[a],l=-1,s=u.length;++l<s;)(r=u[l])&&(n=e.call(r.node,r.node.__data__,l))?("__data__"in r.node&&(n.__data__=r.node.__data__),t.push({node:n,delay:r.delay,duration:r.duration})):t.push(null)}return Ye(i,this.id,this.time).ease(this.ease())},Ve.selectAll=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=De(e));for(var a=-1,o=this.length;++a<o;)for(var u=this[a],l=-1,s=u.length;++l<s;)if(r=u[l]){n=e.call(r.node,r.node.__data__,l),i.push(t=[]);for(var c=-1,f=n.length;++c<f;)t.push({node:n[c],delay:r.delay,duration:r.duration})}return Ye(i,this.id,this.time).ease(this.ease())},Ve.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=Re(e));for(var i=0,a=this.length;i<a;i++){r.push(t=[]);for(var o,u=0,l=(o=this[i]).length;u<l;u++)(n=o[u])&&e.call(n.node,n.node.__data__,u)&&t.push(n)}return Ye(r,this.id,this.time).ease(this.ease())},Ve.attr=function(e,t){if(arguments.length<2){for(t in e)this.attrTween(t,rt(e[t],t));return this}return this.attrTween(e,rt(t,e))},Ve.attrTween=function(e,t){var r=n.ns.qualify(e);return this.tween("attr."+e,r.local?function(e,n){var i=t.call(this,e,n,this.getAttributeNS(r.space,r.local));return i===tt?(this.removeAttributeNS(r.space,r.local),null):i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}:function(e,n){var i=t.call(this,e,n,this.getAttribute(r));return i===tt?(this.removeAttribute(r),null):i&&function(e){this.setAttribute(r,i(e))}})},Ve.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.styleTween(n,rt(e[n],n),t);return this}n=""}return this.styleTween(e,rt(t,e),n)},Ve.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(r,i){var a=t.call(this,r,i,window.getComputedStyle(this,null).getPropertyValue(e));return a===tt?(this.style.removeProperty(e),null):a&&function(t){this.style.setProperty(e,a(t),n)}})},Ve.text=function(e){return this.tween("text",function(t,n){this.textContent="function"==typeof e?e.call(this,t,n):e})},Ve.remove=function(){return this.each("end.transition",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})},Ve.delay=function(e){return ze(this,"function"==typeof e?function(t,n,r){t.delay=0|e.call(t=t.node,t.__data__,n,r)}:(e|=0,function(t){t.delay=e}))},Ve.duration=function(e){return ze(this,"function"==typeof e?function(t,n,r){t.duration=Math.max(1,0|e.call(t=t.node,t.__data__,n,r))}:(e=Math.max(1,0|e),function(t){t.duration=e}))},Ve.transition=function(){return this.select(s)},n.tween=function(e,t){return"function"==typeof e?function(n,r,i){var a=e.call(this,n,r);return null==a?""!=i&&tt:i!=a&&t(i,a)}:null==e?nt:(e+="",function(n,r,i){return i!=e&&t(i,e)})};var tt={};function nt(e,t,n){return""!=n&&tt}function rt(e,t){return n.tween(e,X(t))}var it,at,ot=null;function ut(){for(var e,t=Date.now(),n=ot;n;)(e=t-n.then)>=n.delay&&(n.flush=n.callback(e)),n=n.next;var r=lt()-t;r>24?(isFinite(r)&&(clearTimeout(at),at=setTimeout(ut,r)),it=0):(it=1,st(ut))}function lt(){for(var e=null,t=ot,n=1/0;t;)t.flush?t=e?e.next=t.next:ot=t.next:(n=Math.min(n,t.then+t.delay),t=(e=t).next);return n}n.timer=function(e,t,n){var r=!1,i=ot;if(arguments.length<3){if(arguments.length<2)t=0;else if(!isFinite(t))return;n=Date.now()}for(;i;){if(i.callback===e){i.then=n,i.delay=t,r=!0;break}i,i=i.next}r||(ot={callback:e,then:n,delay:t,next:ot}),it||(at=clearTimeout(at),it=1,st(ut))},n.timer.flush=function(){for(var e,t=Date.now(),n=ot;n;)e=t-n.then,n.delay||(n.flush=n.callback(e)),n=n.next;lt()};var st=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,17)};n.mouse=function(e){return ft(e,H())};var ct=/WebKit/.test(navigator.userAgent)?-1:0;function ft(e,t){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(ct<0&&(window.scrollX||window.scrollY)){var a=(r=n.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0))[0][0].getScreenCTM();ct=!(a.f||a.e),r.remove()}return ct?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}function ht(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function dt(e){return e.rangeExtent?e.rangeExtent():ht(e.range())}function pt(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),(t=t(o-a))&&(e[r]=t.floor(a),e[i]=t.ceil(o)),e}function gt(){return Math}function mt(e,t){return n.rebind(e,t,"range","rangeRound","interpolate","clamp")}function yt(e){return(e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1))&&{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}}function vt(e,t){var n=ht(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function bt(e,t){return n.range.apply(n,vt(e,t))}function xt(e,t){return n.format(",."+Math.max(0,-Math.floor(Math.log(vt(e,t)[2])/Math.LN10+.01))+"f")}function _t(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function wt(e,t,r,i){var a=[],o=[],u=0,l=Math.min(e.length,t.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<=l;)a.push(r(e[u-1],e[u])),o.push(i(t[u-1],t[u]));return function(t){var r=n.bisect(e,t,1,l)-1;return o[r](a[r](t))}}n.touches=function(e,t){return arguments.length<2&&(t=H().touches),t?r(t).map(function(t){var n=ft(e,t);return n.identifier=t.identifier,n}):[]},n.scale={},n.scale.linear=function(){return function e(t,r,i,a){var o,u;function l(){var e=Math.min(t.length,r.length)>2?wt:_t,l=a?G:Z;return o=e(t,r,l,i),u=e(r,t,l,n.interpolate),s}function s(e){return o(e)}s.invert=function(e){return u(e)};s.domain=function(e){return arguments.length?(t=e.map(Number),l()):t};s.range=function(e){return arguments.length?(r=e,l()):r};s.rangeRound=function(e){return s.range(e).interpolate(n.interpolateRound)};s.clamp=function(e){return arguments.length?(a=e,l()):a};s.interpolate=function(e){return arguments.length?(i=e,l()):i};s.ticks=function(e){return bt(t,e)};s.tickFormat=function(e){return xt(t,e)};s.nice=function(){return pt(t,yt),l()};s.copy=function(){return e(t,r,i,a)};return l()}([0,1],[0,1],n.interpolate,!1)},n.scale.log=function(){return function e(t,n){var r=n.pow;function i(e){return t(n(e))}i.invert=function(e){return r(t.invert(e))};i.domain=function(e){return arguments.length?(n=e[0]<0?St:Mt,r=n.pow,t.domain(e.map(n)),i):t.domain().map(r)};i.nice=function(){return t.domain(pt(t.domain(),gt)),i};i.ticks=function(){var e=ht(t.domain()),i=[];if(e.every(isFinite)){var a=Math.floor(e[0]),o=Math.ceil(e[1]),u=r(e[0]),l=r(e[1]);if(n===St)for(i.push(r(a));a++<o;)for(var s=9;s>0;s--)i.push(r(a)*s);else{for(;a<o;a++)for(var s=1;s<10;s++)i.push(r(a)*s);i.push(r(a))}for(a=0;i[a]<u;a++);for(o=i.length;i[o-1]>l;o--);i=i.slice(a,o)}return i};i.tickFormat=function(e,t){if(arguments.length<2&&(t=Tt),arguments.length<1)return t;var a,o=Math.max(.1,e/i.ticks().length),u=n===St?(a=-1e-12,Math.floor):(a=1e-12,Math.ceil);return function(e){return e/r(u(n(e)+a))<=o?t(e):""}};i.copy=function(){return e(t.copy(),n)};return mt(i,t)}(n.scale.linear(),Mt)};var Tt=n.format(".0e");function Mt(e){return Math.log(e<0?0:e)/Math.LN10}function St(e){return-Math.log(e>0?0:-e)/Math.LN10}function kt(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}Mt.pow=function(e){return Math.pow(10,e)},St.pow=function(e){return-Math.pow(10,-e)},n.scale.pow=function(){return function e(t,n){var r=kt(n),i=kt(1/n);function a(e){return t(r(e))}a.invert=function(e){return i(t.invert(e))};a.domain=function(e){return arguments.length?(t.domain(e.map(r)),a):t.domain().map(i)};a.ticks=function(e){return bt(a.domain(),e)};a.tickFormat=function(e){return xt(a.domain(),e)};a.nice=function(){return a.domain(pt(a.domain(),yt))};a.exponent=function(e){if(!arguments.length)return n;var t=a.domain();return r=kt(n=e),i=kt(1/n),a.domain(t)};a.copy=function(){return e(t.copy(),n)};return mt(a,t)}(n.scale.linear(),1)},n.scale.sqrt=function(){return n.scale.pow().exponent(.5)},n.scale.ordinal=function(){return function e(t,r){var i,o,u;function l(e){return o[((i.get(e)||i.set(e,t.push(e)))-1)%o.length]}function s(e,r){return n.range(t.length).map(function(t){return e+r*t})}l.domain=function(e){if(!arguments.length)return t;t=[],i=new a;for(var n,o=-1,u=e.length;++o<u;)i.has(n=e[o])||i.set(n,t.push(n));return l[r.t].apply(l,r.a)};l.range=function(e){return arguments.length?(o=e,u=0,r={t:"range",a:arguments},l):o};l.rangePoints=function(e,n){arguments.length<2&&(n=0);var i=e[0],a=e[1],c=(a-i)/(t.length-1+n);return o=s(t.length<2?(i+a)/2:i+c*n/2,c),u=0,r={t:"rangePoints",a:arguments},l};l.rangeBands=function(e,n,i){arguments.length<2&&(n=0),arguments.length<3&&(i=n);var a=e[1]<e[0],c=e[a-0],f=e[1-a],h=(f-c)/(t.length-n+2*i);return o=s(c+h*i,h),a&&o.reverse(),u=h*(1-n),r={t:"rangeBands",a:arguments},l};l.rangeRoundBands=function(e,n,i){arguments.length<2&&(n=0),arguments.length<3&&(i=n);var a=e[1]<e[0],c=e[a-0],f=e[1-a],h=Math.floor((f-c)/(t.length-n+2*i)),d=f-c-(t.length-n)*h;return o=s(c+Math.round(d/2),h),a&&o.reverse(),u=Math.round(h*(1-n)),r={t:"rangeRoundBands",a:arguments},l};l.rangeBand=function(){return u};l.rangeExtent=function(){return ht(r.a[0])};l.copy=function(){return e(t,r)};return l.domain(t)}([],{t:"range",a:[[]]})},n.scale.category10=function(){return n.scale.ordinal().range(Nt)},n.scale.category20=function(){return n.scale.ordinal().range(Ct)},n.scale.category20b=function(){return n.scale.ordinal().range(jt)},n.scale.category20c=function(){return n.scale.ordinal().range(At)};var Nt=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Ct=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],jt=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],At=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];n.scale.quantile=function(){return function e(t,r){var i;function a(){var e=0,a=(t.length,r.length);for(i=[];++e<a;)i[e-1]=n.quantile(t,e/a);return o}function o(e){return isNaN(e=+e)?NaN:r[n.bisect(i,e)]}o.domain=function(e){return arguments.length?(t=e.filter(function(e){return!isNaN(e)}).sort(n.ascending),a()):t};o.range=function(e){return arguments.length?(r=e,a()):r};o.quantiles=function(){return i};o.copy=function(){return e(t,r)};return a()}([],[])},n.scale.quantize=function(){return function e(t,n,r){var i,a;function o(e){return r[Math.max(0,Math.min(a,Math.floor(i*(e-t))))]}function u(){return i=r.length/(n-t),a=r.length-1,o}o.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],u()):[t,n]};o.range=function(e){return arguments.length?(r=e,u()):r};o.copy=function(){return e(t,n,r)};return u()}(0,1,[0,1])},n.scale.threshold=function(){return function e(t,r){function i(e){return r[n.bisect(t,e)]}i.domain=function(e){return arguments.length?(t=e,i):t};i.range=function(e){return arguments.length?(r=e,i):r};i.copy=function(){return e(t,r)};return i}([.5],[0,1])},n.scale.identity=function(){return function e(t){function n(e){return+e}n.invert=n;n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t};n.ticks=function(e){return bt(t,e)};n.tickFormat=function(e){return xt(t,e)};n.copy=function(){return e(t)};return n}([0,1])},n.svg={},n.svg.arc=function(){var e=Dt,t=Ot,n=Pt,r=$t;function i(){var i=e.apply(this,arguments),a=t.apply(this,arguments),o=n.apply(this,arguments)+Bt,u=r.apply(this,arguments)+Bt,l=(u<o&&(l=o,o=u,u=l),u-o),s=l<Math.PI?"0":"1",c=Math.cos(o),f=Math.sin(o),h=Math.cos(u),d=Math.sin(u);return l>=Et?i?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+i+"A"+i+","+i+" 0 1,0 0,"+-i+"A"+i+","+i+" 0 1,0 0,"+i+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":i?"M"+a*c+","+a*f+"A"+a+","+a+" 0 "+s+",1 "+a*h+","+a*d+"L"+i*h+","+i*d+"A"+i+","+i+" 0 "+s+",0 "+i*c+","+i*f+"Z":"M"+a*c+","+a*f+"A"+a+","+a+" 0 "+s+",1 "+a*h+","+a*d+"L0,0Z"}return i.innerRadius=function(t){return arguments.length?(e=f(t),i):e},i.outerRadius=function(e){return arguments.length?(t=f(e),i):t},i.startAngle=function(e){return arguments.length?(n=f(e),i):n},i.endAngle=function(e){return arguments.length?(r=f(e),i):r},i.centroid=function(){var i=(e.apply(this,arguments)+t.apply(this,arguments))/2,a=(n.apply(this,arguments)+r.apply(this,arguments))/2+Bt;return[Math.cos(a)*i,Math.sin(a)*i]},i};var Bt=-Math.PI/2,Et=2*Math.PI-1e-6;function Dt(e){return e.innerRadius}function Ot(e){return e.outerRadius}function Pt(e){return e.startAngle}function $t(e){return e.endAngle}function Ft(e){var t=qt,n=Lt,r=c,i=Rt,a=i.key,o=.7;function u(a){var u,l=[],s=[],c=-1,h=a.length,d=f(t),p=f(n);function g(){l.push("M",i(e(s),o))}for(;++c<h;)r.call(this,u=a[c],c)?s.push([+d.call(this,u,c),+p.call(this,u,c)]):s.length&&(g(),s=[]);return s.length&&g(),l.length?l.join(""):null}return u.x=function(e){return arguments.length?(t=e,u):t},u.y=function(e){return arguments.length?(n=e,u):n},u.defined=function(e){return arguments.length?(r=e,u):r},u.interpolate=function(e){return arguments.length?(a="function"==typeof e?i=e:(i=It.get(e)||Rt).key,u):a},u.tension=function(e){return arguments.length?(o=e,u):o},u}function qt(e){return e[0]}function Lt(e){return e[1]}n.svg.line=function(){return Ft(l)};var It=n.map({linear:Rt,"linear-closed":function(e){return Rt(e)+"Z"},"step-before":Ht,"step-after":zt,basis:Wt,"basis-open":function(e){if(e.length<4)return Rt(e);var t,n=[],r=-1,i=e.length,a=[0],o=[0];for(;++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);n.push(Yt(Xt,a)+","+Yt(Xt,o)),--r;for(;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Zt(n,a,o);return n.join("")},"basis-closed":function(e){var t,n,r=-1,i=e.length,a=i+4,o=[],u=[];for(;++r<4;)n=e[r%i],o.push(n[0]),u.push(n[1]);t=[Yt(Xt,o),",",Yt(Xt,u)],--r;for(;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),Zt(t,o,u);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],u=e[n][0]-a,l=e[n][1]-o,s=-1;++s<=n;)r=e[s],i=s/n,r[0]=t*r[0]+(1-t)*(a+i*u),r[1]=t*r[1]+(1-t)*(o+i*l);return Wt(e)},cardinal:function(e,t,n){return e.length<3?Rt(e):e[0]+Ut(e,Qt(e,t))},"cardinal-open":function(e,t){return e.length<4?Rt(e):e[1]+Ut(e.slice(1,e.length-1),Qt(e,t))},"cardinal-closed":function(e,t){return e.length<3?Rt(e):e[0]+Ut((e.push(e[0]),e),Qt([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?Rt(e):e[0]+Ut(e,function(e){var t,n,r,i,a=[],o=function(e){var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=Gt(i,a);for(;++t<n;)r[t]=(o+(o=Gt(i=a,a=e[t+1])))/2;return r[t]=o,r}(e),u=-1,l=e.length-1;for(;++u<l;)t=Gt(e[u],e[u+1]),Math.abs(t)<1e-6?o[u]=o[u+1]=0:(n=o[u]/t,r=o[u+1]/t,(i=n*n+r*r)>9&&(i=3*t/Math.sqrt(i),o[u]=i*n,o[u+1]=i*r));u=-1;for(;++u<=l;)i=(e[Math.min(l,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),a.push([i||0,o[u]*i||0]);return a}(e))}});function Rt(e){return e.join("L")}function Ht(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function zt(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Ut(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Rt(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],u=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],l=2),t.length>1){u=t[1],a=e[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1];for(var s=2;s<t.length;s++,l++)a=e[l],u=t[s],r+="S"+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1]}if(n){var c=e[l];r+="Q"+(a[0]+2*u[0]/3)+","+(a[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function Qt(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],u=1,l=e.length;++u<l;)n=a,a=o,o=e[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Wt(e){if(e.length<3)return Rt(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],u=[a,a,a,r[1]],l=[i,",",a];for(Zt(l,o,u);++t<n;)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Zt(l,o,u);for(t=-1;++t<2;)o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Zt(l,o,u);return l.join("")}function Yt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}It.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Vt=[0,2/3,1/3,0],Jt=[0,1/3,2/3,0],Xt=[0,1/6,2/3,1/6];function Zt(e,t,n){e.push("C",Yt(Vt,t),",",Yt(Vt,n),",",Yt(Jt,t),",",Yt(Jt,n),",",Yt(Xt,t),",",Yt(Xt,n))}function Gt(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Kt(e){for(var t,n,r,i=-1,a=e.length;++i<a;)n=(t=e[i])[0],r=t[1]+Bt,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function en(e){var t=qt,n=qt,r=0,i=Lt,a=c,o=Rt,u=o.key,l=o,s="L",h=.7;function d(u){var c,d,p,g=[],m=[],y=[],v=-1,b=u.length,x=f(t),_=f(r),w=t===n?function(){return d}:f(n),T=r===i?function(){return p}:f(i);function M(){g.push("M",o(e(y),h),s,l(e(m.reverse()),h),"Z")}for(;++v<b;)a.call(this,c=u[v],v)?(m.push([d=+x.call(this,c,v),p=+_.call(this,c,v)]),y.push([+w.call(this,c,v),+T.call(this,c,v)])):m.length&&(M(),m=[],y=[]);return m.length&&M(),g.length?g.join(""):null}return d.x=function(e){return arguments.length?(t=n=e,d):n},d.x0=function(e){return arguments.length?(t=e,d):t},d.x1=function(e){return arguments.length?(n=e,d):n},d.y=function(e){return arguments.length?(r=i=e,d):i},d.y0=function(e){return arguments.length?(r=e,d):r},d.y1=function(e){return arguments.length?(i=e,d):i},d.defined=function(e){return arguments.length?(a=e,d):a},d.interpolate=function(e){return arguments.length?(u="function"==typeof e?o=e:(o=It.get(e)||Rt).key,l=o.reverse||o,s=o.closed?"M":"L",d):u},d.tension=function(e){return arguments.length?(h=e,d):h},d}function tn(e){return e.source}function nn(e){return e.target}function rn(e){return e.radius}function an(e){return[e.x,e.y]}function on(){return 64}function un(){return"circle"}function ln(e){var t=Math.sqrt(e/Math.PI);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}n.svg.line.radial=function(){var e=Ft(Kt);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Ht.reverse=zt,zt.reverse=Ht,n.svg.area=function(){return en(l)},n.svg.area.radial=function(){var e=en(Kt);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},n.svg.chord=function(){var e=tn,t=nn,n=rn,r=Pt,i=$t;function a(n,r){var i,a,s=o(this,e,n,r),c=o(this,t,n,r);return"M"+s.p0+u(s.r,s.p1,s.a1-s.a0)+(a=c,(i=s).a0==a.a0&&i.a1==a.a1?l(s.r,s.p1,s.r,s.p0):l(s.r,s.p1,c.r,c.p0)+u(c.r,c.p1,c.a1-c.a0)+l(c.r,c.p1,s.r,s.p0))+"Z"}function o(e,t,a,o){var u=t.call(e,a,o),l=n.call(e,u,o),s=r.call(e,u,o)+Bt,c=i.call(e,u,o)+Bt;return{r:l,a0:s,a1:c,p0:[l*Math.cos(s),l*Math.sin(s)],p1:[l*Math.cos(c),l*Math.sin(c)]}}function u(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Math.PI)+",1 "+t}function l(e,t,n,r){return"Q 0,0 "+r}return a.radius=function(e){return arguments.length?(n=f(e),a):n},a.source=function(t){return arguments.length?(e=f(t),a):e},a.target=function(e){return arguments.length?(t=f(e),a):t},a.startAngle=function(e){return arguments.length?(r=f(e),a):r},a.endAngle=function(e){return arguments.length?(i=f(e),a):i},a},n.svg.diagonal=function(){var e=tn,t=nn,n=an;function r(r,i){var a=e.call(this,r,i),o=t.call(this,r,i),u=(a.y+o.y)/2,l=[a,{x:a.x,y:u},{x:o.x,y:u},o];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(t){return arguments.length?(e=f(t),r):e},r.target=function(e){return arguments.length?(t=f(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},n.svg.diagonal.radial=function(){var e=n.svg.diagonal(),t=an,r=e.projection;return e.projection=function(e){return arguments.length?r(function(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+Bt;return[n*Math.cos(r),n*Math.sin(r)]}}(t=e)):t},e},n.svg.mouse=n.mouse,n.svg.touches=n.touches,n.svg.symbol=function(){var e=un,t=on;function n(n,r){return(sn.get(e.call(this,n,r))||ln)(t.call(this,n,r))}return n.type=function(t){return arguments.length?(e=f(t),n):e},n.size=function(e){return arguments.length?(t=f(e),n):t},n};var sn=n.map({circle:ln,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*fn)),n=t*fn;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/cn),n=t*cn/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/cn),n=t*cn/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});n.svg.symbolTypes=sn.keys();var cn=Math.sqrt(3),fn=Math.tan(30*Math.PI/180);function hn(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function dn(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}n.svg.axis=function(){var e,t=n.scale.linear(),r="bottom",i=6,a=6,o=6,u=3,l=[10],s=null,c=0;function f(f){f.each(function(){var f,h=n.select(this),d=null==s?t.ticks?t.ticks.apply(t,l):t.domain():s,p=null==e?t.tickFormat?t.tickFormat.apply(t,l):String:e,g=function(e,t,n){if(r=[],n&&t.length>1){for(var r,i,a,o=ht(e.domain()),u=-1,l=t.length,s=(t[1]-t[0])/++n;++u<l;)for(i=n;--i>0;)(a=+t[u]-i*s)>=o[0]&&r.push(a);for(--u,i=0;++i<n&&(a=+t[u]+i*s)<o[1];)r.push(a)}return r}(t,d,c),m=h.selectAll(".minor").data(g,String),y=m.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),v=n.transition(m.exit()).style("opacity",1e-6).remove(),b=n.transition(m).style("opacity",1),x=h.selectAll("g").data(d,String),_=x.enter().insert("g","path").style("opacity",1e-6),w=n.transition(x.exit()).style("opacity",1e-6).remove(),T=n.transition(x).style("opacity",1),M=dt(t),S=h.selectAll(".domain").data([0]),k=(S.enter().append("path").attr("class","domain"),n.transition(S)),N=t.copy(),C=this.__chart__||N;this.__chart__=N,_.append("line").attr("class","tick"),_.append("text");var j=_.select("line"),A=T.select("line"),B=x.select("text").text(p),E=_.select("text"),D=T.select("text");switch(r){case"bottom":f=hn,y.attr("y2",a),b.attr("x2",0).attr("y2",a),j.attr("y2",i),E.attr("y",Math.max(i,0)+u),A.attr("x2",0).attr("y2",i),D.attr("x",0).attr("y",Math.max(i,0)+u),B.attr("dy",".71em").attr("text-anchor","middle"),k.attr("d","M"+M[0]+","+o+"V0H"+M[1]+"V"+o);break;case"top":f=hn,y.attr("y2",-a),b.attr("x2",0).attr("y2",-a),j.attr("y2",-i),E.attr("y",-(Math.max(i,0)+u)),A.attr("x2",0).attr("y2",-i),D.attr("x",0).attr("y",-(Math.max(i,0)+u)),B.attr("dy","0em").attr("text-anchor","middle"),k.attr("d","M"+M[0]+","+-o+"V0H"+M[1]+"V"+-o);break;case"left":f=dn,y.attr("x2",-a),b.attr("x2",-a).attr("y2",0),j.attr("x2",-i),E.attr("x",-(Math.max(i,0)+u)),A.attr("x2",-i).attr("y2",0),D.attr("x",-(Math.max(i,0)+u)).attr("y",0),B.attr("dy",".32em").attr("text-anchor","end"),k.attr("d","M"+-o+","+M[0]+"H0V"+M[1]+"H"+-o);break;case"right":f=dn,y.attr("x2",a),b.attr("x2",a).attr("y2",0),j.attr("x2",i),E.attr("x",Math.max(i,0)+u),A.attr("x2",i).attr("y2",0),D.attr("x",Math.max(i,0)+u).attr("y",0),B.attr("dy",".32em").attr("text-anchor","start"),k.attr("d","M"+o+","+M[0]+"H0V"+M[1]+"H"+o)}if(t.ticks)_.call(f,C),T.call(f,N),w.call(f,N),y.call(f,C),b.call(f,N),v.call(f,N);else{var O=N.rangeBand()/2,P=function(e){return N(e)+O};_.call(f,P),T.call(f,P)}})}return f.scale=function(e){return arguments.length?(t=e,f):t},f.orient=function(e){return arguments.length?(r=e,f):r},f.ticks=function(){return arguments.length?(l=arguments,f):l},f.tickValues=function(e){return arguments.length?(s=e,f):s},f.tickFormat=function(t){return arguments.length?(e=t,f):e},f.tickSize=function(e,t,n){if(!arguments.length)return i;var r=arguments.length-1;return i=+e,a=r>1?+t:i,o=r>0?+arguments[r]:i,f},f.tickPadding=function(e){return arguments.length?(u=+e,f):u},f.tickSubdivide=function(e){return arguments.length?(c=+e,f):c},f},n.svg.brush=function(){var e,t=z(u,"brushstart","brush","brushend"),r=null,i=null,a=gn[0],o=[[0,0],[0,0]];function u(e){e.each(function(){var e,t=n.select(this),o=t.selectAll(".background").data([0]),h=t.selectAll(".extent").data([0]),d=t.selectAll(".resize").data(a,String);t.style("pointer-events","all").on("mousedown.brush",f).on("touchstart.brush",f),o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),h.enter().append("rect").attr("class","extent").style("cursor","move"),d.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return pn[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),d.style("display",u.empty()?"none":null),d.exit().remove(),r&&(e=dt(r),o.attr("x",e[0]).attr("width",e[1]-e[0]),s(t)),i&&(e=dt(i),o.attr("y",e[0]).attr("height",e[1]-e[0]),c(t)),l(t)})}function l(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+o[+/e$/.test(e)][0]+","+o[+/^s/.test(e)][1]+")"})}function s(e){e.select(".extent").attr("x",o[0][0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1][0]-o[0][0])}function c(e){e.select(".extent").attr("y",o[0][1]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",o[1][1]-o[0][1])}function f(){var a,f,h=this,d=n.select(n.event.target),p=t.of(h,arguments),g=n.select(h),m=d.datum(),y=!/^(n|s)$/.test(m)&&r,v=!/^(e|w)$/.test(m)&&i,b=d.classed("extent"),x=M(),_=n.select(window).on("mousemove.brush",S).on("mouseup.brush",N).on("touchmove.brush",S).on("touchend.brush",N).on("keydown.brush",function(){32==n.event.keyCode&&(b||(a=null,x[0]-=o[1][0],x[1]-=o[1][1],b=2),R())}).on("keyup.brush",function(){32==n.event.keyCode&&2==b&&(x[0]+=o[1][0],x[1]+=o[1][1],b=0,R())});if(b)x[0]=o[0][0]-x[0],x[1]=o[0][1]-x[1];else if(m){var w=+/w$/.test(m),T=+/^n/.test(m);f=[o[1-w][0]-x[0],o[1-T][1]-x[1]],x[0]=o[w][0],x[1]=o[T][1]}else n.event.altKey&&(a=x.slice());function M(){var e=n.event.changedTouches;return e?n.touches(h,e)[0]:n.mouse(h)}function S(){var e=M(),t=!1;f&&(e[0]+=f[0],e[1]+=f[1]),b||(n.event.altKey?(a||(a=[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]),x[0]=o[+(e[0]<a[0])][0],x[1]=o[+(e[1]<a[1])][1]):a=null),y&&k(e,r,0)&&(s(g),t=!0),v&&k(e,i,1)&&(c(g),t=!0),t&&(l(g),p({type:"brush",mode:b?"move":"resize"}))}function k(t,n,r){var i,u,l=dt(n),s=l[0],c=l[1],f=x[r],h=o[1][r]-o[0][r];if(b&&(s-=f,c-=h+f),i=Math.max(s,Math.min(c,t[r])),b?u=(i+=f)+h:(a&&(f=Math.max(s,Math.min(c,2*a[r]-i))),f<i?(u=i,i=f):u=f),o[0][r]!==i||o[1][r]!==u)return e=null,o[0][r]=i,o[1][r]=u,!0}function N(){S(),g.style("pointer-events","all").selectAll(".resize").style("display",u.empty()?"none":null),n.select("body").style("cursor",null),_.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),p({type:"brushend"}),R()}g.style("pointer-events","none").selectAll(".resize").style("display",null),n.select("body").style("cursor",d.style("cursor")),p({type:"brushstart"}),S(),R()}return u.x=function(e){return arguments.length?(a=gn[!(r=e)<<1|!i],u):r},u.y=function(e){return arguments.length?(a=gn[!r<<1|!(i=e)],u):i},u.extent=function(t){var n,a,l,s,c;return arguments.length?(e=[[0,0],[0,0]],r&&(n=t[0],a=t[1],i&&(n=n[0],a=a[0]),e[0][0]=n,e[1][0]=a,r.invert&&(n=r(n),a=r(a)),a<n&&(c=n,n=a,a=c),o[0][0]=0|n,o[1][0]=0|a),i&&(l=t[0],s=t[1],r&&(l=l[1],s=s[1]),e[0][1]=l,e[1][1]=s,i.invert&&(l=i(l),s=i(s)),s<l&&(c=l,l=s,s=c),o[0][1]=0|l,o[1][1]=0|s),u):(t=e||o,r&&(n=t[0][0],a=t[1][0],e||(n=o[0][0],a=o[1][0],r.invert&&(n=r.invert(n),a=r.invert(a)),a<n&&(c=n,n=a,a=c))),i&&(l=t[0][1],s=t[1][1],e||(l=o[0][1],s=o[1][1],i.invert&&(l=i.invert(l),s=i.invert(s)),s<l&&(c=l,l=s,s=c))),r&&i?[[n,l],[a,s]]:r?[n,a]:i&&[l,s])},u.clear=function(){return e=null,o[0][0]=o[0][1]=o[1][0]=o[1][1]=0,u},u.empty=function(){return r&&o[0][0]===o[1][0]||i&&o[0][1]===o[1][1]},n.rebind(u,t,"on")};var pn={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},gn=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];n.behavior={},n.behavior.drag=function(){var e=z(r,"drag","dragstart","dragend"),t=null;function r(){this.on("mousedown.drag",i).on("touchstart.drag",i)}function i(){var r,i=this,a=e.of(i,arguments),o=n.event.target,u=c(),l=0,s=n.select(window).on("mousemove.drag",f).on("touchmove.drag",f).on("mouseup.drag",h,!0).on("touchend.drag",h,!0);function c(){var e=i.parentNode,t=n.event.changedTouches;return t?n.touches(e,t)[0]:n.mouse(e)}function f(){if(!i.parentNode)return h();var e=c(),t=e[0]-u[0],n=e[1]-u[1];l|=t|n,u=e,R(),a({type:"drag",x:e[0]+r[0],y:e[1]+r[1],dx:t,dy:n})}function h(){a({type:"dragend"}),l&&(R(),n.event.target===o&&s.on("click.drag",d,!0)),s.on("mousemove.drag",null).on("touchmove.drag",null).on("mouseup.drag",null).on("touchend.drag",null)}function d(){R(),s.on("click.drag",null)}r=t?[(r=t.apply(i,arguments)).x-u[0],r.y-u[1]]:[0,0],R(),a({type:"dragstart"})}return r.origin=function(e){return arguments.length?(t=e,r):t},n.rebind(r,e,"on")},n.behavior.zoom=function(){var e,t,r,i,a,o,u,l=[0,0],s=1,c=bn,f=z(h,"zoom");function h(){this.on("mousedown.zoom",y).on("mousewheel.zoom",v).on("mousemove.zoom",b).on("DOMMouseScroll.zoom",v).on("dblclick.zoom",x).on("touchstart.zoom",_).on("touchmove.zoom",w).on("touchend.zoom",_)}function d(e){return[(e[0]-l[0])/s,(e[1]-l[1])/s]}function p(e){s=Math.max(c[0],Math.min(c[1],e))}function g(e,t){t=function(e){return[e[0]*s+l[0],e[1]*s+l[1]]}(t),l[0]+=e[0]-t[0],l[1]+=e[1]-t[1]}function m(e){i&&i.domain(r.range().map(function(e){return(e-l[0])/s}).map(r.invert)),o&&o.domain(a.range().map(function(e){return(e-l[1])/s}).map(a.invert)),n.event.preventDefault(),e({type:"zoom",scale:s,translate:l})}function y(){var e=this,t=f.of(e,arguments),r=n.event.target,i=0,a=n.select(window).on("mousemove.zoom",function(){i=1,g(n.mouse(e),o),m(t)}).on("mouseup.zoom",function(){i&&R();a.on("mousemove.zoom",null).on("mouseup.zoom",null),i&&n.event.target===r&&a.on("click.zoom",u,!0)}),o=d(n.mouse(e));function u(){R(),a.on("click.zoom",null)}window.focus(),R()}function v(){e||(e=d(n.mouse(this))),p(Math.pow(2,.002*function(){mn||(mn=n.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var e,t=n.event;try{mn.scrollTop=1e3,mn.dispatchEvent(t),e=1e3-mn.scrollTop}catch(n){e=t.wheelDelta||5*-t.detail}return e}())*s),g(n.mouse(this),e),m(f.of(this,arguments))}function b(){e=null}function x(){var e=n.mouse(this),t=d(e);p(n.event.shiftKey?s/2:2*s),g(e,t),m(f.of(this,arguments))}function _(){var r=n.touches(this),i=Date.now();if(t=s,e={},r.forEach(function(t){e[t.identifier]=d(t)}),R(),1===r.length){if(i-u<500){var a=r[0],o=d(r[0]);p(2*s),g(a,o),m(f.of(this,arguments))}u=i}}function w(){var r=n.touches(this),i=r[0],a=e[i.identifier];if(o=r[1]){var o,l=e[o.identifier];i=[(i[0]+o[0])/2,(i[1]+o[1])/2],a=[(a[0]+l[0])/2,(a[1]+l[1])/2],p(n.event.scale*t)}g(i,a),u=null,m(f.of(this,arguments))}return h.translate=function(e){return arguments.length?(l=e.map(Number),h):l},h.scale=function(e){return arguments.length?(s=+e,h):s},h.scaleExtent=function(e){return arguments.length?(c=null==e?bn:e.map(Number),h):c},h.x=function(e){return arguments.length?(i=e,r=e.copy(),h):i},h.y=function(e){return arguments.length?(o=e,a=e.copy(),h):o},n.rebind(h,f,"on")};var mn,yn,vn,bn=[0,1/0];function xn(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=_n(e),r=_n(t),i=n.pop(),a=r.pop(),o=null;for(;i===a;)o=i,i=n.pop(),a=r.pop();return o}(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function _n(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function wn(e){e.fixed|=2}function Tn(e){e!==vn&&(e.fixed&=1)}function Mn(){vn.fixed&=1,yn=vn=null}function Sn(){vn.px=n.event.x,vn.py=n.event.y,yn.resume()}function kn(e){return 20}function Nn(e){return 1}n.layout={},n.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(xn(e[n]));return t}},n.layout.chord=function(){var e,t,r,i,a,o,u,l={},s=0;function c(){var l,c,h,d,p,g={},m=[],y=n.range(i),v=[];for(e=[],t=[],l=0,d=-1;++d<i;){for(c=0,p=-1;++p<i;)c+=r[d][p];m.push(c),v.push(n.range(i)),l+=c}for(a&&y.sort(function(e,t){return a(m[e],m[t])}),o&&v.forEach(function(e,t){e.sort(function(e,n){return o(r[t][e],r[t][n])})}),l=(2*Math.PI-s*i)/l,c=0,d=-1;++d<i;){for(h=c,p=-1;++p<i;){var b=y[d],x=v[b][p],_=r[b][x],w=c,T=c+=_*l;g[b+"-"+x]={index:b,subindex:x,startAngle:w,endAngle:T,value:_}}t[b]={index:b,startAngle:h,endAngle:c,value:(c-h)/l},c+=s}for(d=-1;++d<i;)for(p=d-1;++p<i;){var M=g[d+"-"+p],S=g[p+"-"+d];(M.value||S.value)&&e.push(M.value<S.value?{source:S,target:M}:{source:M,target:S})}u&&f()}function f(){e.sort(function(e,t){return u((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return l.matrix=function(n){return arguments.length?(i=(r=n)&&r.length,e=t=null,l):r},l.padding=function(n){return arguments.length?(s=n,e=t=null,l):s},l.sortGroups=function(n){return arguments.length?(a=n,e=t=null,l):a},l.sortSubgroups=function(t){return arguments.length?(o=t,e=null,l):o},l.sortChords=function(t){return arguments.length?(u=t,e&&f(),l):u},l.chords=function(){return e||c(),e},l.groups=function(){return t||c(),t},l},n.layout.force=function(){var e,t,r,i,a,o={},u=n.dispatch("start","tick","end"),s=[1,1],c=.9,h=kn,d=Nn,p=-30,g=.1,m=.8,y=[],v=[];function b(e){return function(t,n,r,i,a){if(t.point!==e){var o=t.cx-e.x,u=t.cy-e.y,l=1/Math.sqrt(o*o+u*u);if((i-n)*l<m){var s=t.charge*l*l;return e.px-=o*s,e.py-=u*s,!0}if(t.point&&isFinite(l)){s=t.pointCharge*l*l;e.px-=o*s,e.py-=u*s}}return!t.charge}}function x(e){wn(vn=e),yn=o}return o.tick=function(){if((t*=.99)<.005)return u.end({type:"end",alpha:t=0}),!0;var e,o,l,f,h,d,m,x,_,w=y.length,T=v.length;for(o=0;o<T;++o)f=(l=v[o]).source,(d=(x=(h=l.target).x-f.x)*x+(_=h.y-f.y)*_)&&(x*=d=t*i[o]*((d=Math.sqrt(d))-r[o])/d,_*=d,h.x-=x*(m=f.weight/(h.weight+f.weight)),h.y-=_*m,f.x+=x*(m=1-m),f.y+=_*m);if((m=t*g)&&(x=s[0]/2,_=s[1]/2,o=-1,m))for(;++o<w;)(l=y[o]).x+=(x-l.x)*m,l.y+=(_-l.y)*m;if(p)for(!function e(t,n,r){var i=0,a=0;t.charge=0;if(!t.leaf)for(var o,u=t.nodes,l=u.length,s=-1;++s<l;)null!=(o=u[s])&&(e(o,n,r),t.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=n*r[t.point.index];t.charge+=t.pointCharge=c,i+=c*t.point.x,a+=c*t.point.y}t.cx=i/t.charge;t.cy=a/t.charge}(e=n.geom.quadtree(y),t,a),o=-1;++o<w;)(l=y[o]).fixed||e.visit(b(l));for(o=-1;++o<w;)(l=y[o]).fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*c,l.y-=(l.py-(l.py=l.y))*c);u.tick({type:"tick",alpha:t})},o.nodes=function(e){return arguments.length?(y=e,o):y},o.links=function(e){return arguments.length?(v=e,o):v},o.size=function(e){return arguments.length?(s=e,o):s},o.linkDistance=function(e){return arguments.length?(h=f(e),o):h},o.distance=o.linkDistance,o.linkStrength=function(e){return arguments.length?(d=f(e),o):d},o.friction=function(e){return arguments.length?(c=e,o):c},o.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,o):p},o.gravity=function(e){return arguments.length?(g=e,o):g},o.theta=function(e){return arguments.length?(m=e,o):m},o.alpha=function(e){return arguments.length?(t?t=e>0?e:0:e>0&&(u.start({type:"start",alpha:t=e}),n.timer(o.tick)),o):t},o.start=function(){var e,t,n,u,l=y.length,c=v.length,f=s[0],g=s[1];for(e=0;e<l;++e)(u=y[e]).index=e,u.weight=0;for(r=[],i=[],e=0;e<c;++e)"number"==typeof(u=v[e]).source&&(u.source=y[u.source]),"number"==typeof u.target&&(u.target=y[u.target]),r[e]=h.call(this,u,e),i[e]=d.call(this,u,e),++u.source.weight,++u.target.weight;for(e=0;e<l;++e)u=y[e],isNaN(u.x)&&(u.x=m("x",f)),isNaN(u.y)&&(u.y=m("y",g)),isNaN(u.px)&&(u.px=u.x),isNaN(u.py)&&(u.py=u.y);if(a=[],"function"==typeof p)for(e=0;e<l;++e)a[e]=+p.call(this,y[e],e);else for(e=0;e<l;++e)a[e]=p;function m(e,t){for(var n,r=b(),i=-1,a=r.length;++i<a;)if(!isNaN(n=r[i][e]))return n;return Math.random()*t}function b(){if(!n){for(n=[],t=0;t<l;++t)n[t]=[];for(t=0;t<c;++t){var r=v[t];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}return n[e]}return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){e||(e=n.behavior.drag().origin(l).on("dragstart",x).on("drag",Sn).on("dragend",Mn)),this.on("mouseover.force",wn).on("mouseout.force",Tn).call(e)},n.rebind(o,u,"on")},n.layout.partition=function(){var e=n.layout.hierarchy(),t=[1,1];function r(n,r){var i=e.call(this,n,r);return function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,u,l,s=-1;for(r=t.value?r/t.value:0;++s<o;)e(u=a[s],n,l=u.value*r,i),n+=l}}(i[0],0,t[0],t[1]/function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,e(n[a]));return 1+r}(i[0])),i}return r.size=function(e){return arguments.length?(t=e,r):t},Hn(r,e)},n.layout.pie=function(){var e=Number,t=Cn,r=0,i=2*Math.PI;function a(o,u){var l=o.map(function(t,n){return+e.call(a,t,n)}),s=+("function"==typeof r?r.apply(this,arguments):r),c=(("function"==typeof i?i.apply(this,arguments):i)-r)/n.sum(l),f=n.range(o.length);null!=t&&f.sort(t===Cn?function(e,t){return l[t]-l[e]}:function(e,n){return t(o[e],o[n])});var h=[];return f.forEach(function(e){var t;h[e]={data:o[e],value:t=l[e],startAngle:s,endAngle:s+=t*c}}),h}return a.value=function(t){return arguments.length?(e=t,a):e},a.sort=function(e){return arguments.length?(t=e,a):t},a.startAngle=function(e){return arguments.length?(r=e,a):r},a.endAngle=function(e){return arguments.length?(i=e,a):i},a};var Cn={};function jn(e){return e.x}function An(e){return e.y}function Bn(e,t,n){e.y0=t,e.y=n}n.layout.stack=function(){var e=l,t=On,r=Pn,i=Bn,a=jn,o=An;function u(l,s){var c=l.map(function(t,n){return e.call(u,t,n)}),f=c.map(function(e,t){return e.map(function(e,t){return[a.call(u,e,t),o.call(u,e,t)]})}),h=t.call(u,f,s);c=n.permute(c,h),f=n.permute(f,h);var d,p,g,m=r.call(u,f,s),y=c.length,v=c[0].length;for(p=0;p<v;++p)for(i.call(u,c[0][p],g=m[p],f[0][p][1]),d=1;d<y;++d)i.call(u,c[d][p],g+=f[d-1][p][1],f[d][p][1]);return l}return u.values=function(t){return arguments.length?(e=t,u):e},u.order=function(e){return arguments.length?(t="function"==typeof e?e:En.get(e)||On,u):t},u.offset=function(e){return arguments.length?(r="function"==typeof e?e:Dn.get(e)||Pn,u):r},u.x=function(e){return arguments.length?(a=e,u):a},u.y=function(e){return arguments.length?(o=e,u):o},u.out=function(e){return arguments.length?(i=e,u):i},u};var En=n.map({"inside-out":function(e){var t,r,i=e.length,a=e.map($n),o=e.map(Fn),u=n.range(i).sort(function(e,t){return a[e]-a[t]}),l=0,s=0,c=[],f=[];for(t=0;t<i;++t)r=u[t],l<s?(l+=o[r],c.push(r)):(s+=o[r],f.push(r));return f.reverse().concat(c)},reverse:function(e){return n.range(e.length).reverse()},default:On}),Dn=n.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,o=[],u=0,l=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>u&&(u=r),o.push(r)}for(n=0;n<a;++n)l[n]=(u-o[n])/2;return l},wiggle:function(e){var t,n,r,i,a,o,u,l,s,c=e.length,f=e[0],h=f.length,d=[];for(d[0]=l=s=0,n=1;n<h;++n){for(t=0,i=0;t<c;++t)i+=e[t][n][1];for(t=0,a=0,u=f[n][0]-f[n-1][0];t<c;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*u);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/u;a+=o*e[t][n][1]}d[n]=l-=i?a/i*u:0,l<s&&(s=l)}for(n=0;n<h;++n)d[n]-=s;return d},expand:function(e){var t,n,r,i=e.length,a=e[0].length,o=1/i,u=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=o}for(n=0;n<a;++n)u[n]=0;return u},zero:Pn});function On(e){return n.range(e.length)}function Pn(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function $n(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;n<a;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function Fn(e){return e.reduce(qn,0)}function qn(e,t){return e+t[1]}function Ln(e,t){return In(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function In(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function Rn(e){return[n.min(e),n.max(e)]}function Hn(e,t){return n.rebind(e,t,"sort","children","value"),e.links=Wn,e.nodes=function(t){return Yn=!0,(e.nodes=e)(t)},e}function zn(e){return e.children}function Un(e){return e.value}function Qn(e,t){return t.value-e.value}function Wn(e){return n.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}n.layout.histogram=function(){var e=!0,t=Number,r=Rn,i=Ln;function a(a,o){for(var u,l,s=[],c=a.map(t,this),f=r.call(this,c,o),h=i.call(this,f,c,o),d=(o=-1,c.length),p=h.length-1,g=e?1:1/d;++o<p;)(u=s[o]=[]).dx=h[o+1]-(u.x=h[o]),u.y=0;if(p>0)for(o=-1;++o<d;)(l=c[o])>=f[0]&&l<=f[1]&&((u=s[n.bisect(h,l,1,p)-1]).y+=g,u.push(a[o]));return s}return a.value=function(e){return arguments.length?(t=e,a):t},a.range=function(e){return arguments.length?(r=f(e),a):r},a.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return In(t,e)}:f(e),a):i},a.frequency=function(t){return arguments.length?(e=!!t,a):e},a},n.layout.hierarchy=function(){var e=Qn,t=zn,n=Un;function r(i){var a=[];return function i(a,o,u){var l=t.call(r,a,o),s=Yn?a:{data:a};if(s.depth=o,u.push(s),l&&(c=l.length)){for(var c,f,h=-1,d=s.children=[],p=0,g=o+1;++h<c;)(f=i(l[h],g,u)).parent=s,d.push(f),p+=f.value;e&&d.sort(e),n&&(s.value=p)}else n&&(s.value=+n.call(r,a,o)||0);return s}(i,0,a),a}return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return function e(t,i){var a=t.children,o=0;if(a&&(u=a.length))for(var u,l=-1,s=i+1;++l<u;)o+=e(a[l],s);else n&&(o=+n.call(r,Yn?t:t.data,i)||0);return n&&(t.value=o),o}(e,0),e},r};var Yn=!1;function Vn(e,t){return e.value-t.value}function Jn(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Xn(e,t){e._pack_next=t,t._pack_prev=e}function Zn(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return i*i-n*n-r*r>.001}function Gn(e){if((t=e.children)&&(l=t.length)){var t,n,r,i,a,o,u,l,s=1/0,c=-1/0,f=1/0,h=-1/0;if(t.forEach(Kn),(n=t[0]).x=-n.r,n.y=0,b(n),l>1&&((r=t[1]).x=r.r,r.y=0,b(r),l>2))for(tr(n,r,i=t[2]),b(i),Jn(n,i),n._pack_prev=i,Jn(i,r),r=n._pack_next,a=3;a<l;a++){tr(n,r,i=t[a]);var d=0,p=1,g=1;for(o=r._pack_next;o!==r;o=o._pack_next,p++)if(Zn(o,i)){d=1;break}if(1==d)for(u=n._pack_prev;u!==o._pack_prev&&!Zn(u,i);u=u._pack_prev,g++);d?(p<g||p==g&&r.r<n.r?Xn(n,r=o):Xn(n=u,r),a--):(Jn(n,i),r=i,b(i))}var m=(s+c)/2,y=(f+h)/2,v=0;for(a=0;a<l;a++)(i=t[a]).x-=m,i.y-=y,v=Math.max(v,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=v,t.forEach(er)}function b(e){s=Math.min(e.x-e.r,s),c=Math.max(e.x+e.r,c),f=Math.min(e.y-e.r,f),h=Math.max(e.y+e.r,h)}}function Kn(e){e._pack_next=e._pack_prev=e}function er(e){delete e._pack_next,delete e._pack_prev}function tr(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,u=i*i+a*a,l=.5+((r*=r)-(o*=o))/(2*u),s=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+l*i+s*a,n.y=e.y+l*a-s*i}else n.x=e.x+r,n.y=e.y}function nr(e,t){return e.parent==t.parent?1:2}function rr(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function ir(e){var t,n=e.children;return n&&(t=n.length)?n[t-1]:e._tree.thread}function ar(e,t){var n=e.children;if(n&&(i=n.length))for(var r,i,a=-1;++a<i;)t(r=ar(n[a],t),e)>0&&(e=r);return e}function or(e,t){return e.x-t.x}function ur(e,t){return t.x-e.x}function lr(e,t){return e.depth-t.depth}function sr(e,t){!function e(n,r){var i=n.children;if(i&&(o=i.length))for(var a,o,u=null,l=-1;++l<o;)e(a=i[l],u),u=a;t(n,r)}(e,null)}function cr(e,t,n){e=e._tree;var r=n/((t=t._tree).number-e.number);e.change+=r,t.change-=r,t.shift+=n,t.prelim+=n,t.mod+=n}function fr(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function hr(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function dr(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function pr(e,t){var r=new RegExp("\r\n|["+e+"\r\n]","g"),i=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);function o(e,r){n.text(e,t,function(e){r(e&&o.parse(e))})}function u(t){return t.map(l).join(e)}function l(e){return i.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return o.parse=function(e){var t;return o.parseRows(e,function(e,n){if(n){for(var r={},i=-1,a=t.length;++i<a;)r[t[i]]=e[i];return r}return t=e,null})},o.parseRows=function(e,t){var n,i,o={},u={},l=[],s=0;function c(){if(r.lastIndex>=e.length)return u;if(i)return i=!1,o;var t=r.lastIndex;if(34===e.charCodeAt(t)){for(var n=t;n++<e.length;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;n++}r.lastIndex=n+2;var l=e.charCodeAt(n+1);return 13===l?(i=!0,10===e.charCodeAt(n+2)&&r.lastIndex++):10===l&&(i=!0),e.substring(t+1,n).replace(/""/g,'"')}var s=r.exec(e);return s?(i=s[0].charCodeAt(0)!==a,e.substring(t,s.index)):(r.lastIndex=e.length,e.substring(t))}for(r.lastIndex=0;(n=c())!==u;){for(var f=[];n!==o&&n!==u;)f.push(n),n=c();t&&!(f=t(f,s++))||l.push(f)}return l},o.format=function(e){return e.map(u).join("\n")},o}n.layout.pack=function(){var e=n.layout.hierarchy().sort(Vn),t=0,r=[1,1];function i(n,i){var a=e.call(this,n,i),o=a[0];o.x=0,o.y=0,sr(o,function(e){e.r=Math.sqrt(e.value)}),sr(o,Gn);var u=r[0],l=r[1],s=Math.max(2*o.r/u,2*o.r/l);if(t>0){var c=t*s/2;sr(o,function(e){e.r+=c}),sr(o,Gn),sr(o,function(e){e.r-=c}),s=Math.max(2*o.r/u,2*o.r/l)}return function e(t,n,r,i){var a=t.children;t.x=n+=i*t.x;t.y=r+=i*t.y;t.r*=i;if(a)for(var o=-1,u=a.length;++o<u;)e(a[o],n,r,i)}(o,u/2,l/2,1/s),a}return i.size=function(e){return arguments.length?(r=e,i):r},i.padding=function(e){return arguments.length?(t=+e,i):t},Hn(i,e)},n.layout.cluster=function(){var e=n.layout.hierarchy().sort(null).value(null),t=nr,r=[1,1];function i(i,a){var o,u=e.call(this,i,a),l=u[0],s=0;sr(l,function(e){var r=e.children;r&&r.length?(e.x=function(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}(r),e.y=function(e){return 1+n.max(e,function(e){return e.y})}(r)):(e.x=o?s+=t(e,o):0,e.y=0,o=e)});var c=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(l),f=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(l),h=c.x-t(c,f)/2,d=f.x+t(f,c)/2;return sr(l,function(e){e.x=(e.x-h)/(d-h)*r[0],e.y=(1-(l.y?e.y/l.y:1))*r[1]}),u}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=e,i):r},Hn(i,e)},n.layout.tree=function(){var e=n.layout.hierarchy().sort(null).value(null),t=nr,r=[1,1];function i(n,i){var a=e.call(this,n,i),o=a[0];function u(e,n,r){if(n){for(var i,a=e,o=e,u=n,l=e.parent.children[0],s=a._tree.mod,c=o._tree.mod,f=u._tree.mod,h=l._tree.mod;u=ir(u),a=rr(a),u&&a;)l=rr(l),(o=ir(o))._tree.ancestor=e,(i=u._tree.prelim+f-a._tree.prelim-s+t(u,a))>0&&(cr(fr(u,e,r),e,i),s+=i,c+=i),f+=u._tree.mod,s+=a._tree.mod,h+=l._tree.mod,c+=o._tree.mod;u&&!ir(o)&&(o._tree.thread=u,o._tree.mod+=f-c),a&&!rr(l)&&(l._tree.thread=a,l._tree.mod+=s-h,r=e)}return r}sr(o,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),function e(n,r){var i=n.children,a=n._tree;if(i&&(o=i.length)){for(var o,l,s,c=i[0],f=c,h=-1;++h<o;)e(s=i[h],l),f=u(s,l,f),l=s;!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]._tree).prelim+=n,t.mod+=n,n+=t.shift+(r+=t.change)}(n);var d=.5*(c._tree.prelim+s._tree.prelim);r?(a.prelim=r._tree.prelim+t(n,r),a.mod=a.prelim-d):a.prelim=d}else r&&(a.prelim=r._tree.prelim+t(n,r))}(o),function e(t,n){t.x=t._tree.prelim+n;var r=t.children;if(r&&(i=r.length)){var i,a=-1;for(n+=t._tree.mod;++a<i;)e(r[a],n)}}(o,-o._tree.prelim);var l=ar(o,ur),s=ar(o,or),c=ar(o,lr),f=l.x-t(l,s)/2,h=s.x+t(s,l)/2,d=c.depth||1;return sr(o,function(e){e.x=(e.x-f)/(h-f)*r[0],e.y=e.depth/d*r[1],delete e._tree}),a}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=e,i):r},Hn(i,e)},n.layout.treemap=function(){var e,t=n.layout.hierarchy(),r=Math.round,i=[1,1],a=null,o=hr,u=!1,l=.5*(1+Math.sqrt(5));function s(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function c(e){var t=e.children;if(t&&t.length){var n,r,i,a=o(e),u=[],l=t.slice(),f=1/0,p=Math.min(a.dx,a.dy);for(s(l,a.dx*a.dy/e.value),u.area=0;(i=l.length)>0;)u.push(n=l[i-1]),u.area+=n.area,(r=h(u,p))<=f?(l.pop(),f=r):(u.area-=u.pop().area,d(u,p,a,!1),p=Math.min(a.dx,a.dy),u.length=u.area=0,f=1/0);u.length&&(d(u,p,a,!0),u.length=u.area=0),t.forEach(c)}}function f(e){var t=e.children;if(t&&t.length){var n,r=o(e),i=t.slice(),a=[];for(s(i,r.dx*r.dy/e.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(d(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);t.forEach(f)}}function h(e,t){for(var n,r=e.area,i=0,a=1/0,o=-1,u=e.length;++o<u;)(n=e[o].area)&&(n<a&&(a=n),n>i&&(i=n));return t*=t,(r*=r)?Math.max(t*i*l/r,r/(t*a*l)):1/0}function d(e,t,n,i){var a,o=-1,u=e.length,l=n.x,s=n.y,c=t?r(e.area/t):0;if(t==n.dx){for((i||c>n.dy)&&(c=n.dy);++o<u;)(a=e[o]).x=l,a.y=s,a.dy=c,l+=a.dx=Math.min(n.x+n.dx-l,c?r(a.area/c):0);a.z=!0,a.dx+=n.x+n.dx-l,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++o<u;)(a=e[o]).x=l,a.y=s,a.dx=c,s+=a.dy=Math.min(n.y+n.dy-s,c?r(a.area/c):0);a.z=!1,a.dy+=n.y+n.dy-s,n.x+=c,n.dx-=c}}function p(n){var r=e||t(n),a=r[0];return a.x=0,a.y=0,a.dx=i[0],a.dy=i[1],e&&t.revalue(a),s([a],a.dx*a.dy/a.value),(e?f:c)(a),u&&(e=r),r}return p.size=function(e){return arguments.length?(i=e,p):i},p.padding=function(e){if(!arguments.length)return a;function t(t){return dr(t,e)}var n;return o=null==(a=e)?hr:"function"==(n=typeof e)?function(t){var n=e.call(p,t,t.depth);return null==n?hr(t):dr(t,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(e=[e,e,e,e],t):t,p},p.round=function(e){return arguments.length?(r=e?Math.round:Number,p):r!=Number},p.sticky=function(t){return arguments.length?(u=t,e=null,p):u},p.ratio=function(e){return arguments.length?(l=e,p):l},Hn(p,t)},n.csv=pr(",","text/csv"),n.tsv=pr("\t","text/tab-separated-values"),n.geo={};var gr=Math.PI/180;function mr(e,t){return function(n){return n&&e.hasOwnProperty(n.type)?e[n.type](n):t}}function yr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function vr(e,t){br.hasOwnProperty(e.type)&&br[e.type](e,t)}n.geo.azimuthal=function(){var e,t,n,r,i,a="orthographic",o=200,u=[480,250];function l(e){var n,l=e[0]*gr-t,s=e[1]*gr,c=Math.cos(l),f=Math.sin(l),h=Math.cos(s),d=Math.sin(s),p="orthographic"!==a?i*d+r*h*c:null,g="stereographic"===a?1/(1+p):"gnomonic"===a?1/p:"equidistant"===a?(n=Math.acos(p))?n/Math.sin(n):0:"equalarea"===a?Math.sqrt(2/(1+p)):1,m=g*(i*h*c-r*d);return[o*(g*h*f)+u[0],o*m+u[1]]}return l.invert=function(e){var n=(e[0]-u[0])/o,l=(e[1]-u[1])/o,s=Math.sqrt(n*n+l*l),c="stereographic"===a?2*Math.atan(s):"gnomonic"===a?Math.atan(s):"equidistant"===a?s:"equalarea"===a?2*Math.asin(.5*s):Math.asin(s),f=Math.sin(c),h=Math.cos(c);return[(t+Math.atan2(n*f,s*r*h+l*i*f))/gr,Math.asin(h*i-(s?l*f*r/s:0))/gr]},l.mode=function(e){return arguments.length?(a=e+"",l):a},l.origin=function(a){return arguments.length?(t=(e=a)[0]*gr,n=e[1]*gr,r=Math.cos(n),i=Math.sin(n),l):e},l.scale=function(e){return arguments.length?(o=+e,l):o},l.translate=function(e){return arguments.length?(u=[+e[0],+e[1]],l):u},l.origin([0,0])},n.geo.albers=function(){var e,t,n,r,i=[-98,38],a=[29.5,45.5],o=1e3,u=[480,250];function l(i){var a=t*(gr*i[0]-e),l=Math.sqrt(n-2*t*Math.sin(gr*i[1]))/t;return[o*l*Math.sin(a)+u[0],o*(l*Math.cos(a)-r)+u[1]]}function s(){var o=gr*a[0],u=gr*a[1],s=gr*i[1],c=Math.sin(o),f=Math.cos(o);return e=gr*i[0],t=.5*(c+Math.sin(u)),n=f*f+2*t*c,r=Math.sqrt(n-2*t*Math.sin(s))/t,l}return l.invert=function(i){var a=(i[0]-u[0])/o,l=(i[1]-u[1])/o,s=r+l,c=Math.atan2(a,s),f=Math.sqrt(a*a+s*s);return[(e+c/t)/gr,Math.asin((n-f*f*t*t)/(2*t))/gr]},l.origin=function(e){return arguments.length?(i=[+e[0],+e[1]],s()):i},l.parallels=function(e){return arguments.length?(a=[+e[0],+e[1]],s()):a},l.scale=function(e){return arguments.length?(o=+e,l):o},l.translate=function(e){return arguments.length?(u=[+e[0],+e[1]],l):u},s()},n.geo.albersUsa=function(){var e=n.geo.albers(),t=n.geo.albers().origin([-160,60]).parallels([55,65]),r=n.geo.albers().origin([-160,20]).parallels([8,18]),i=n.geo.albers().origin([-60,10]).parallels([8,18]);function a(n){var a=n[0],o=n[1];return(o>50?t:a<-140?r:o<21?i:e)(n)}return a.scale=function(n){return arguments.length?(e.scale(n),t.scale(.6*n),r.scale(n),i.scale(1.5*n),a.translate(e.translate())):e.scale()},a.translate=function(n){if(!arguments.length)return e.translate();var o=e.scale()/1e3,u=n[0],l=n[1];return e.translate(n),t.translate([u-400*o,l+170*o]),r.translate([u-190*o,l+200*o]),i.translate([u+580*o,l+430*o]),a},a.scale(e.scale())},n.geo.bonne=function(){var e,t,n,r,i=200,a=[480,250];function o(o){var u=o[0]*gr-e,l=o[1]*gr-t;if(n){var s=r+n-l,c=u*Math.cos(l)/s;u=s*Math.sin(c),l=s*Math.cos(c)-r}else u*=Math.cos(l),l*=-1;return[i*u+a[0],i*l+a[1]]}return o.invert=function(t){var o=(t[0]-a[0])/i,u=(t[1]-a[1])/i;if(n){var l=r+u,s=Math.sqrt(o*o+l*l);u=r+n-s,o=e+s*Math.atan2(o,l)/Math.cos(u)}else u*=-1,o/=Math.cos(u);return[o/gr,u/gr]},o.parallel=function(e){return arguments.length?(r=1/Math.tan(n=e*gr),o):n/gr},o.origin=function(n){return arguments.length?(e=n[0]*gr,t=n[1]*gr,o):[e/gr,t/gr]},o.scale=function(e){return arguments.length?(i=+e,o):i},o.translate=function(e){return arguments.length?(a=[+e[0],+e[1]],o):a},o.origin([0,0]).parallel(45)},n.geo.equirectangular=function(){var e=500,t=[480,250];function n(n){var r=n[0]/360,i=-n[1]/360;return[e*r+t[0],e*i+t[1]]}return n.invert=function(n){return[360*((n[0]-t[0])/e),-360*((n[1]-t[1])/e)]},n.scale=function(t){return arguments.length?(e=+t,n):e},n.translate=function(e){return arguments.length?(t=[+e[0],+e[1]],n):t},n},n.geo.mercator=function(){var e=500,t=[480,250];function n(n){var r=n[0]/360,i=-Math.log(Math.tan(Math.PI/4+n[1]*gr/2))/gr/360;return[e*r+t[0],e*Math.max(-.5,Math.min(.5,i))+t[1]]}return n.invert=function(n){var r=(n[0]-t[0])/e,i=(n[1]-t[1])/e;return[360*r,2*Math.atan(Math.exp(-360*i*gr))/gr-90]},n.scale=function(t){return arguments.length?(e=+t,n):e},n.translate=function(e){return arguments.length?(t=[+e[0],+e[1]],n):t},n},n.geo.path=function(){var e=4.5,t=yr(e),r=n.geo.albersUsa(),i=[];function a(n,r){"function"==typeof e&&(t=yr(e.apply(this,arguments))),u(n);var a=i.length?i.join(""):null;return i=[],a}function o(e){return r(e).join(",")}var u=mr({FeatureCollection:function(e){for(var t=e.features,n=-1,r=t.length;++n<r;)i.push(u(t[n].geometry))},Feature:function(e){u(e.geometry)},Point:function(e){i.push("M",o(e.coordinates),t)},MultiPoint:function(e){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)i.push("M",o(n[r]),t)},LineString:function(e){var t=e.coordinates,n=-1,r=t.length;for(i.push("M");++n<r;)i.push(o(t[n]),"L");i.pop()},MultiLineString:function(e){for(var t,n,r,a=e.coordinates,u=-1,l=a.length;++u<l;){for(n=-1,r=(t=a[u]).length,i.push("M");++n<r;)i.push(o(t[n]),"L");i.pop()}},Polygon:function(e){for(var t,n,r,a=e.coordinates,u=-1,l=a.length;++u<l;)if(n=-1,(r=(t=a[u]).length-1)>0){for(i.push("M");++n<r;)i.push(o(t[n]),"L");i[i.length-1]="Z"}},MultiPolygon:function(e){for(var t,n,r,a,u,l,s=e.coordinates,c=-1,f=s.length;++c<f;)for(n=-1,r=(t=s[c]).length;++n<r;)if(u=-1,(l=(a=t[n]).length-1)>0){for(i.push("M");++u<l;)i.push(o(a[u]),"L");i[i.length-1]="Z"}},GeometryCollection:function(e){for(var t=e.geometries,n=-1,r=t.length;++n<r;)i.push(u(t[n]))}}),l=a.area=mr({FeatureCollection:function(e){for(var t=0,n=e.features,r=-1,i=n.length;++r<i;)t+=l(n[r]);return t},Feature:function(e){return l(e.geometry)},Polygon:function(e){return s(e.coordinates)},MultiPolygon:function(e){for(var t=0,n=e.coordinates,r=-1,i=n.length;++r<i;)t+=s(n[r]);return t},GeometryCollection:function(e){for(var t=0,n=e.geometries,r=-1,i=n.length;++r<i;)t+=l(n[r]);return t}},0);function s(e){for(var t=h(e[0]),n=0,r=e.length;++n<r;)t-=h(e[n]);return t}function c(e){for(var t=n.geom.polygon(e[0].map(r)),i=t.area(),a=t.centroid(i<0?(i*=-1,1):-1),o=a[0],u=a[1],l=i,s=0,c=e.length;++s<c;)i=(t=n.geom.polygon(e[s].map(r))).area(),o-=(a=t.centroid(i<0?(i*=-1,1):-1))[0],u-=a[1],l-=i;return[o,u,6*l]}var f=a.centroid=mr({Feature:function(e){return f(e.geometry)},Polygon:function(e){var t=c(e.coordinates);return[t[0]/t[2],t[1]/t[2]]},MultiPolygon:function(e){for(var t,n=e.coordinates,r=0,i=0,a=0,o=-1,u=n.length;++o<u;)r+=(t=c(n[o]))[0],i+=t[1],a+=t[2];return[r/a,i/a]}});function h(e){return Math.abs(n.geom.polygon(e.map(r)).area())}return a.projection=function(e){return r=e,a},a.pointRadius=function(n){return"function"==typeof n?e=n:t=yr(e=+n),a},a},n.geo.bounds=function(e){var t=1/0,n=1/0,r=-1/0,i=-1/0;return vr(e,function(e,a){e<t&&(t=e),e>r&&(r=e),a<n&&(n=a),a>i&&(i=a)}),[[t,n],[r,i]]};var br={Feature:function(e,t){vr(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=0,i=n.length;r<i;r++)vr(n[r].geometry,t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=0,i=n.length;r<i;r++)vr(n[r],t)},LineString:xr,MultiLineString:function(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)for(var a=n[r],o=0,u=a.length;o<u;o++)t.apply(null,a[o])},MultiPoint:xr,MultiPolygon:function(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)for(var a=n[r][0],o=0,u=a.length;o<u;o++)t.apply(null,a[o])},Point:function(e,t){t.apply(null,e.coordinates)},Polygon:function(e,t){for(var n=e.coordinates[0],r=0,i=n.length;r<i;r++)t.apply(null,n[r])}};function xr(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)t.apply(null,n[r])}function _r(e){return e.source}function wr(e){return e.target}function Tr(){var e,t,n,r,i,a,o,u,l,s,c,f,h,d;function p(e){var t=Math.sin(e*=h)*d,n=Math.sin(h-e)*d,o=n*i+t*c,u=n*a+t*f,l=n*r+t*s;return[Math.atan2(u,o)/gr,Math.atan2(l,Math.sqrt(o*o+u*u))/gr]}return p.distance=function(){return null==h&&(d=1/Math.sin(h=Math.acos(Math.max(-1,Math.min(1,r*s+n*l*Math.cos(o-e)))))),h},p.source=function(o){var u=Math.cos(e=o[0]*gr),l=Math.sin(e);return n=Math.cos(t=o[1]*gr),r=Math.sin(t),i=n*u,a=n*l,h=null,p},p.target=function(e){var t=Math.cos(o=e[0]*gr),n=Math.sin(o);return l=Math.cos(u=e[1]*gr),s=Math.sin(u),c=l*t,f=l*n,h=null,p},p}function Mr(e,t){var n=Tr().source(e).target(t);return n.distance(),n}n.geo.circle=function(){var e=[0,0],t=89.99,r=t*gr,i=n.geo.greatArc().source(e).target(l);function a(){}function o(e){return i.distance(e)<r}a.clip=function(t){return"function"==typeof e&&i.source(e.apply(this,arguments)),u(t)||null};var u=mr({FeatureCollection:function(e){var t=e.features.map(u).filter(l);return t&&((e=Object.create(e)).features=t,e)},Feature:function(e){var t=u(e.geometry);return t&&((e=Object.create(e)).geometry=t,e)},Point:function(e){return o(e.coordinates)&&e},MultiPoint:function(e){var t=e.coordinates.filter(o);return t.length&&{type:e.type,coordinates:t}},LineString:function(e){var t=s(e.coordinates);return t.length&&((e=Object.create(e)).coordinates=t,e)},MultiLineString:function(e){var t=e.coordinates.map(s).filter(function(e){return e.length});return t.length&&((e=Object.create(e)).coordinates=t,e)},Polygon:function(e){var t=e.coordinates.map(s);return t[0].length&&((e=Object.create(e)).coordinates=t,e)},MultiPolygon:function(e){var t=e.coordinates.map(function(e){return e.map(s)}).filter(function(e){return e[0].length});return t.length&&((e=Object.create(e)).coordinates=t,e)},GeometryCollection:function(e){var t=e.geometries.map(u).filter(l);return t.length&&((e=Object.create(e)).geometries=t,e)}});function s(e){for(var t,n,a,o,u,l=-1,s=e.length,c=[];++l<s;)(u=i.distance(a=e[l]))<r?(n&&c.push(Mr(n,a)((o-r)/(o-u))),c.push(a),t=n=null):(n=a,!t&&c.length&&(c.push(Mr(c[c.length-1],n)((r-o)/(u-o))),t=n)),o=u;return t=e[0],!(n=c[0])||a[0]!==t[0]||a[1]!==t[1]||a[0]===n[0]&&a[1]===n[1]||c.push(n),function(e){var t,n,r,a=0,o=e.length,u=o?[e[0]]:e,l=i.source();for(;++a<o;)for(r=i.source(e[a-1])(e[a]).coordinates,t=0,n=r.length;++t<n;)u.push(r[t]);return i.source(l),u}(c)}return a.origin=function(t){return arguments.length?("function"!=typeof(e=t)&&i.source(e),a):e},a.angle=function(e){return arguments.length?(r=(t=+e)*gr,a):t},n.rebind(a,i,"precision")},n.geo.greatArc=function(){var e,t,n=_r,r=wr,i=6*gr,a=Tr();function o(){for(var n=o.distance.apply(this,arguments),r=0,u=i/n,l=[e];(r+=u)<1;)l.push(a(r));return l.push(t),{type:"LineString",coordinates:l}}return o.distance=function(){return"function"==typeof n&&a.source(e=n.apply(this,arguments)),"function"==typeof r&&a.target(t=r.apply(this,arguments)),a.distance()},o.source=function(t){return arguments.length?("function"!=typeof(n=t)&&a.source(e=n),o):n},o.target=function(e){return arguments.length?("function"!=typeof(r=e)&&a.target(t=r),o):r},o.precision=function(e){return arguments.length?(i=e*gr,o):i/gr},o},n.geo.greatCircle=n.geo.circle,n.geom={},n.geom.contour=function(e,t){var n=t||function(e){var t=0,n=0;for(;;){if(e(t,n))return[t,n];0===t?(t=n+1,n=0):(t-=1,n+=1)}}(e),r=[],i=n[0],a=n[1],o=0,u=0,l=NaN,s=NaN,c=0;do{c=0,e(i-1,a-1)&&(c+=1),e(i,a-1)&&(c+=2),e(i-1,a)&&(c+=4),e(i,a)&&(c+=8),6===c?(o=-1===s?-1:1,u=0):9===c?(o=0,u=1===l?-1:1):(o=Sr[c],u=kr[c]),o!=l&&u!=s&&(r.push([i,a]),l=o,s=u),i+=o,a+=u}while(n[0]!=i||n[1]!=a);return r};var Sr=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],kr=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN];function Nr(e,t,n,r){var i,a,o,u,l,s;return a=(i=r[e])[0],o=i[1],u=(i=r[t])[0],l=i[1],s=(i=r[n])[0],(i[1]-o)*(u-a)-(l-o)*(s-a)>0}function Cr(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function jr(e,t,n,r){var i=e[0],a=t[0],o=n[0],u=r[0],l=e[1],s=t[1],c=n[1],f=a-i,h=u-o,d=s-l,p=r[1]-c,g=(h*(l-c)-p*(i-o))/(p*f-h*d);return[i+g*f,l+g*d]}n.geom.hull=function(e){if(e.length<3)return[];var t,n,r,i,a,o,u,l,s,c,f=e.length,h=f-1,d=[],p=[],g=0;for(t=1;t<f;++t)e[t][1]<e[g][1]?g=t:e[t][1]==e[g][1]&&(g=e[t][0]<e[g][0]?t:g);for(t=0;t<f;++t)t!==g&&(i=e[t][1]-e[g][1],r=e[t][0]-e[g][0],d.push({angle:Math.atan2(i,r),index:t}));for(d.sort(function(e,t){return e.angle-t.angle}),s=d[0].angle,l=d[0].index,u=0,t=1;t<h;++t)n=d[t].index,s==d[t].angle?(r=e[l][0]-e[g][0])*r+(i=e[l][1]-e[g][1])*i>=(a=e[n][0]-e[g][0])*a+(o=e[n][1]-e[g][1])*o?d[t].index=-1:(d[u].index=-1,s=d[t].angle,u=t,l=n):(s=d[t].angle,u=t,l=n);for(p.push(g),t=0,n=0;t<2;++n)-1!==d[n].index&&(p.push(d[n].index),t++);for(c=p.length;n<h;++n)if(-1!==d[n].index){for(;!Nr(p[c-2],p[c-1],d[n].index,e);)--c;p[c++]=d[n].index}var m=[];for(t=0;t<c;++t)m.push(e[p[t]]);return m},n.geom.polygon=function(e){return e.area=function(){for(var t=0,n=e.length,r=e[n-1][0]*e[0][1],i=e[n-1][1]*e[0][0];++t<n;)r+=e[t-1][0]*e[t][1],i+=e[t-1][1]*e[t][0];return.5*(i-r)},e.centroid=function(t){var n,r,i=-1,a=e.length,o=0,u=0,l=e[a-1];for(arguments.length||(t=-1/(6*e.area()));++i<a;)n=l,l=e[i],r=n[0]*l[1]-l[0]*n[1],o+=(n[0]+l[0])*r,u+=(n[1]+l[1])*r;return[o*t,u*t]},e.clip=function(t){for(var n,r,i,a,o,u,l=-1,s=e.length,c=e[s-1];++l<s;){for(n=t.slice(),t.length=0,a=e[l],o=n[(i=n.length)-1],r=-1;++r<i;)Cr(u=n[r],c,a)?(Cr(o,c,a)||t.push(jr(o,u,c,a)),t.push(u)):Cr(o,c,a)&&t.push(jr(o,u,c,a)),o=u;c=a}return t},e},n.geom.voronoi=function(e){var t=e.map(function(){return[]});return Br(e,function(e){var n,r,i,a,o,u;1===e.a&&e.b>=0?(n=e.ep.r,r=e.ep.l):(n=e.ep.l,r=e.ep.r),1===e.a?(o=n?n.y:-1e6,i=e.c-e.b*o,u=r?r.y:1e6,a=e.c-e.b*u):(i=n?n.x:-1e6,o=e.c-e.a*i,a=r?r.x:1e6,u=e.c-e.a*a);var l=[i,o],s=[a,u];t[e.region.l.index].push(l,s),t[e.region.r.index].push(l,s)}),t.map(function(t,n){var r=e[n][0],i=e[n][1];return t.forEach(function(e){e.angle=Math.atan2(e[0]-r,e[1]-i)}),t.sort(function(e,t){return e.angle-t.angle}).filter(function(e,n){return!n||e.angle-t[n-1].angle>1e-10})})};var Ar={l:"r",r:"l"};function Br(e,t){var n={list:e.map(function(e,t){return{index:t,x:e[0],y:e[1]}}).sort(function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}),bottomSite:null},r={list:[],leftEnd:null,rightEnd:null,init:function(){r.leftEnd=r.createHalfEdge(null,"l"),r.rightEnd=r.createHalfEdge(null,"l"),r.leftEnd.r=r.rightEnd,r.rightEnd.l=r.leftEnd,r.list.unshift(r.leftEnd,r.rightEnd)},createHalfEdge:function(e,t){return{edge:e,side:t,vertex:null,l:null,r:null}},insert:function(e,t){t.l=e,t.r=e.r,e.r.l=t,e.r=t},leftBound:function(e){var t=r.leftEnd;do{t=t.r}while(t!=r.rightEnd&&i.rightOf(t,e));return t=t.l},del:function(e){e.l.r=e.r,e.r.l=e.l,e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[Ar[e.side]]}},i={bisect:function(e,t){var n={region:{l:e,r:t},ep:{l:null,r:null}},r=t.x-e.x,i=t.y-e.y,a=r>0?r:-r,o=i>0?i:-i;return n.c=e.x*r+e.y*i+.5*(r*r+i*i),a>o?(n.a=1,n.b=i/r,n.c/=r):(n.b=1,n.a=r/i,n.c/=i),n},intersect:function(e,t){var n=e.edge,r=t.edge;if(!n||!r||n.region.r==r.region.r)return null;var i=n.a*r.b-n.b*r.a;if(Math.abs(i)<1e-10)return null;var a,o,u=(n.c*r.b-r.c*n.b)/i,l=(r.c*n.a-n.c*r.a)/i,s=n.region.r,c=r.region.r;s.y<c.y||s.y==c.y&&s.x<c.x?(a=e,o=n):(a=t,o=r);var f=u>=o.region.r.x;return f&&"l"===a.side||!f&&"r"===a.side?null:{x:u,y:l}},rightOf:function(e,t){var n=e.edge,r=n.region.r,i=t.x>r.x;if(i&&"l"===e.side)return 1;if(!i&&"r"===e.side)return 0;if(1===n.a){var a=t.y-r.y,o=t.x-r.x,u=0,l=0;if(!i&&n.b<0||i&&n.b>=0?l=u=a>=n.b*o:(l=t.x+t.y*n.b>n.c,n.b<0&&(l=!l),l||(u=1)),!u){var s=r.x-n.region.l.x;l=n.b*(o*o-a*a)<s*a*(1+2*o/s+n.b*n.b),n.b<0&&(l=!l)}}else{var c=n.c-n.a*t.x,f=t.y-c,h=t.x-r.x,d=c-r.y;l=f*f>h*h+d*d}return"l"===e.side?l:!l},endPoint:function(e,n,r){e.ep[n]=r,e.ep[Ar[n]]&&t(e)},distance:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}},a={list:[],insert:function(e,t,n){e.vertex=t,e.ystar=t.y+n;for(var r=0,i=a.list,o=i.length;r<o;r++){var u=i[r];if(!(e.ystar>u.ystar||e.ystar==u.ystar&&t.x>u.vertex.x))break}i.splice(r,0,e)},del:function(e){for(var t=0,n=a.list,r=n.length;t<r&&n[t]!=e;++t);n.splice(t,1)},empty:function(){return 0===a.list.length},nextEvent:function(e){for(var t=0,n=a.list,r=n.length;t<r;++t)if(n[t]==e)return n[t+1];return null},min:function(){var e=a.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return a.list.shift()}};r.init(),n.bottomSite=n.list.shift();for(var o,u,l,s,c,f,h,d,p,g,m,y,v,b=n.list.shift();;)if(a.empty()||(o=a.min()),b&&(a.empty()||b.y<o.y||b.y==o.y&&b.x<o.x))u=r.leftBound(b),l=r.right(u),h=r.rightRegion(u),y=i.bisect(h,b),f=r.createHalfEdge(y,"l"),r.insert(u,f),(g=i.intersect(u,f))&&(a.del(u),a.insert(u,g,i.distance(g,b))),u=f,f=r.createHalfEdge(y,"r"),r.insert(u,f),(g=i.intersect(f,l))&&a.insert(f,g,i.distance(g,b)),b=n.list.shift();else{if(a.empty())break;u=a.extractMin(),s=r.left(u),l=r.right(u),c=r.right(l),h=r.leftRegion(u),d=r.rightRegion(l),m=u.vertex,i.endPoint(u.edge,u.side,m),i.endPoint(l.edge,l.side,m),r.del(u),a.del(l),r.del(l),v="l",h.y>d.y&&(p=h,h=d,d=p,v="r"),y=i.bisect(h,d),f=r.createHalfEdge(y,v),r.insert(s,f),i.endPoint(y,Ar[v],m),(g=i.intersect(s,f))&&(a.del(s),a.insert(s,g,i.distance(g,h))),(g=i.intersect(f,c))&&a.insert(f,g,i.distance(g,h))}for(u=r.right(r.leftEnd);u!=r.rightEnd;u=r.right(u))t(u.edge)}function Er(e){return{x:e[0],y:e[1]}}n.geom.delaunay=function(e){var t=e.map(function(){return[]}),n=[];return Br(e,function(n){t[n.region.l.index].push(e[n.region.r.index])}),t.forEach(function(t,r){var i=e[r],a=i[0],o=i[1];t.forEach(function(e){e.angle=Math.atan2(e[0]-a,e[1]-o)}),t.sort(function(e,t){return e.angle-t.angle});for(var u=0,l=t.length-1;u<l;u++)n.push([i,t[u],t[u+1]])}),n},n.geom.quadtree=function(e,t,n,r,i){var a,o=-1,u=e.length;if(u&&isNaN(e[0].x)&&(e=e.map(Er)),arguments.length<5)if(3===arguments.length)i=r=n,n=t;else{for(t=n=1/0,r=i=-1/0;++o<u;)(a=e[o]).x<t&&(t=a.x),a.y<n&&(n=a.y),a.x>r&&(r=a.x),a.y>i&&(i=a.y);var l=r-t,s=i-n;l>s?i=n+l:r=t+s}function c(e,t,n,r,i,a){if(!isNaN(t.x)&&!isNaN(t.y))if(e.leaf){var o=e.point;o?Math.abs(o.x-t.x)+Math.abs(o.y-t.y)<.01?f(e,t,n,r,i,a):(e.point=null,f(e,o,n,r,i,a),f(e,t,n,r,i,a)):e.point=t}else f(e,t,n,r,i,a)}function f(e,t,n,r,i,a){var o=.5*(n+i),u=.5*(r+a),l=t.x>=o,s=t.y>=u,f=(s<<1)+l;e.leaf=!1,l?n=o:i=o,s?r=u:a=u,c(e=e.nodes[f]||(e.nodes[f]={leaf:!0,nodes:[],point:null}),t,n,r,i,a)}var h={leaf:!0,nodes:[],point:null,add:function(e){c(h,e,t,n,r,i)}};return h.visit=function(e){!function e(t,n,r,i,a,o){if(!t(n,r,i,a,o)){var u=.5*(r+a),l=.5*(i+o),s=n.nodes;s[0]&&e(t,s[0],r,i,u,l),s[1]&&e(t,s[1],u,i,a,l),s[2]&&e(t,s[2],r,l,u,o),s[3]&&e(t,s[3],u,l,a,o)}}(e,h,t,n,r,i)},e.forEach(h.add),h},n.time={};var Dr=Date,Or=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Pr(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Pr.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){$r.setUTCDate.apply(this._,arguments)},setDay:function(){$r.setUTCDay.apply(this._,arguments)},setFullYear:function(){$r.setUTCFullYear.apply(this._,arguments)},setHours:function(){$r.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){$r.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){$r.setUTCMinutes.apply(this._,arguments)},setMonth:function(){$r.setUTCMonth.apply(this._,arguments)},setSeconds:function(){$r.setUTCSeconds.apply(this._,arguments)},setTime:function(){$r.setTime.apply(this._,arguments)}};var $r=Date.prototype,Fr=Or,qr=Fr.map(Rr),Lr=["January","February","March","April","May","June","July","August","September","October","November","December"],Ir=Lr.map(Rr);function Rr(e){return e.substring(0,3)}function Hr(e,t,n,r){for(var i,a,o=0,u=t.length,l=n.length;o<u;){if(r>=l)return-1;if(37==(i=t.charCodeAt(o++))){if(!(a=ni[t.charAt(o++)])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function zr(e){return new RegExp("^(?:"+e.map(n.requote).join("|")+")","i")}function Ur(e){for(var t=new a,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}n.time.format=function(e){var t=e.length;function n(n){for(var r,i,a=[],o=-1,u=0;++o<t;)37==e.charCodeAt(o)&&(a.push(e.substring(u,o),(i=ti[r=e.charAt(++o)])?i(n):r),u=o+1);return a.push(e.substring(u,o)),a.join("")}return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Hr(n,e,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=new Dr;return r.setFullYear(n.y,n.m,n.d),r.setHours(n.H,n.M,n.S,n.L),r},n.toString=function(){return e},n};var Qr=n.format("02d"),Wr=n.format("03d"),Yr=n.format("04d"),Vr=n.format("2d"),Jr=zr(Fr),Xr=zr(qr),Zr=zr(Lr),Gr=Ur(Lr),Kr=zr(Ir),ei=Ur(Ir),ti={a:function(e){return qr[e.getDay()]},A:function(e){return Fr[e.getDay()]},b:function(e){return Ir[e.getMonth()]},B:function(e){return Lr[e.getMonth()]},c:n.time.format("%a %b %e %H:%M:%S %Y"),d:function(e){return Qr(e.getDate())},e:function(e){return Vr(e.getDate())},H:function(e){return Qr(e.getHours())},I:function(e){return Qr(e.getHours()%12||12)},j:function(e){return Wr(1+n.time.dayOfYear(e))},L:function(e){return Wr(e.getMilliseconds())},m:function(e){return Qr(e.getMonth()+1)},M:function(e){return Qr(e.getMinutes())},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e){return Qr(e.getSeconds())},U:function(e){return Qr(n.time.sundayOfYear(e))},w:function(e){return e.getDay()},W:function(e){return Qr(n.time.mondayOfYear(e))},x:n.time.format("%m/%d/%y"),X:n.time.format("%H:%M:%S"),y:function(e){return Qr(e.getFullYear()%100)},Y:function(e){return Yr(e.getFullYear()%1e4)},Z:function(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=~~(Math.abs(t)/60),i=Math.abs(t)%60;return n+Qr(r)+Qr(i)},"%":function(e){return"%"}},ni={a:function(e,t,n){Xr.lastIndex=0;var r=Xr.exec(t.substring(n));return r?n+=r[0].length:-1},A:function(e,t,n){Jr.lastIndex=0;var r=Jr.exec(t.substring(n));return r?n+=r[0].length:-1},b:function(e,t,n){Kr.lastIndex=0;var r=Kr.exec(t.substring(n));return r?(e.m=ei.get(r[0].toLowerCase()),n+=r[0].length):-1},B:function(e,t,n){Zr.lastIndex=0;var r=Zr.exec(t.substring(n));return r?(e.m=Gr.get(r[0].toLowerCase()),n+=r[0].length):-1},c:function(e,t,n){return Hr(e,ti.c.toString(),t,n)},d:ri,e:ri,H:ii,I:ii,L:function(e,t,n){ai.lastIndex=0;var r=ai.exec(t.substring(n,n+3));return r?(e.L=+r[0],n+=r[0].length):-1},m:function(e,t,n){ai.lastIndex=0;var r=ai.exec(t.substring(n,n+2));return r?(e.m=r[0]-1,n+=r[0].length):-1},M:function(e,t,n){ai.lastIndex=0;var r=ai.exec(t.substring(n,n+2));return r?(e.M=+r[0],n+=r[0].length):-1},p:function(e,t,n){var r=oi.get(t.substring(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:function(e,t,n){ai.lastIndex=0;var r=ai.exec(t.substring(n,n+2));return r?(e.S=+r[0],n+=r[0].length):-1},x:function(e,t,n){return Hr(e,ti.x.toString(),t,n)},X:function(e,t,n){return Hr(e,ti.X.toString(),t,n)},y:function(e,t,n){ai.lastIndex=0;var r=ai.exec(t.substring(n,n+2));return r?(e.y=(i=+r[0],i+(i>68?1900:2e3)),n+=r[0].length):-1;var i},Y:function(e,t,n){ai.lastIndex=0;var r=ai.exec(t.substring(n,n+4));return r?(e.y=+r[0],n+=r[0].length):-1}};function ri(e,t,n){ai.lastIndex=0;var r=ai.exec(t.substring(n,n+2));return r?(e.d=+r[0],n+=r[0].length):-1}function ii(e,t,n){ai.lastIndex=0;var r=ai.exec(t.substring(n,n+2));return r?(e.H=+r[0],n+=r[0].length):-1}var ai=/^\s*\d+/;var oi=n.map({am:0,pm:1});n.time.format.utc=function(e){var t=n.time.format(e);function r(e){try{var n=new(Dr=Pr);return n._=e,t(n)}finally{Dr=Date}}return r.parse=function(e){try{Dr=Pr;var n=t.parse(e);return n&&n._}finally{Dr=Date}},r.toString=t.toString,r};var ui=n.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");function li(e){return e.toISOString()}function si(e,t,n){function r(t){var n=e(t),r=a(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new Dr(n-1)),1),n}function a(e,n){return t(e=new Dr(+e),n),e}function o(e,r,a){var o=i(e),u=[];if(a>1)for(;o<r;)n(o)%a||u.push(new Date(+o)),t(o,1);else for(;o<r;)u.push(new Date(+o)),t(o,1);return u}e.floor=e,e.round=r,e.ceil=i,e.offset=a,e.range=o;var u=e.utc=ci(e);return u.floor=u,u.round=ci(r),u.ceil=ci(i),u.offset=ci(a),u.range=function(e,t,n){try{Dr=Pr;var r=new Pr;return r._=e,o(r,t,n)}finally{Dr=Date}},e}function ci(e){return function(t,n){try{Dr=Pr;var r=new Pr;return r._=t,e(r,n)._}finally{Dr=Date}}}function fi(e,t,r){function i(t){return e(t)}return i.invert=function(t){return hi(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(hi)},i.nice=function(e){return i.domain(pt(i.domain(),function(){return e}))},i.ticks=function(r,a){var o,u,l,s=(o=i.domain(),u=o[0],l=o[o.length-1],u<l?[u,l]:[l,u]);if("function"!=typeof r){var c=(s[1]-s[0])/r,f=n.bisect(mi,c);if(f==mi.length)return t.year(s,r);if(!f)return e.ticks(r).map(hi);Math.log(c/mi[f-1])<Math.log(mi[f]/c)&&--f,a=(r=t[f])[1],r=r[0].range}return r(s[0],new Date(+s[1]+1),a)},i.tickFormat=function(){return r},i.copy=function(){return fi(e.copy(),t,r)},n.rebind(i,e,"range","rangeRound","interpolate","clamp")}function hi(e){return new Date(e)}function di(e){return function(t){for(var n=e.length-1,r=e[n];!r[1](t);)r=e[--n];return r[0](t)}}function pi(e){var t=new Date(e,0,1);return t.setFullYear(e),t}function gi(e){var t=e.getFullYear(),n=pi(t);return t+(e-n)/(pi(t+1)-n)}n.time.format.iso=Date.prototype.toISOString?li:ui,li.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},li.toString=ui.toString,n.time.second=si(function(e){return new Dr(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),n.time.seconds=n.time.second.range,n.time.seconds.utc=n.time.second.utc.range,n.time.minute=si(function(e){return new Dr(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),n.time.minutes=n.time.minute.range,n.time.minutes.utc=n.time.minute.utc.range,n.time.hour=si(function(e){var t=e.getTimezoneOffset()/60;return new Dr(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),n.time.hours=n.time.hour.range,n.time.hours.utc=n.time.hour.utc.range,n.time.day=si(function(e){var t=new Dr(0,e.getMonth(),e.getDate());return t.setFullYear(e.getFullYear()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),n.time.days=n.time.day.range,n.time.days.utc=n.time.day.utc.range,n.time.dayOfYear=function(e){var t=n.time.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},Or.forEach(function(e,t){e=e.toLowerCase(),t=7-t;var r=n.time[e]=si(function(e){return(e=n.time.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var r=n.time.year(e).getDay();return Math.floor((n.time.dayOfYear(e)+(r+t)%7)/7)-(r!==t)});n.time[e+"s"]=r.range,n.time[e+"s"].utc=r.utc.range,n.time[e+"OfYear"]=function(e){var r=n.time.year(e).getDay();return Math.floor((n.time.dayOfYear(e)+(r+t)%7)/7)}}),n.time.week=n.time.sunday,n.time.weeks=n.time.sunday.range,n.time.weeks.utc=n.time.sunday.utc.range,n.time.weekOfYear=n.time.sundayOfYear,n.time.month=si(function(e){return(e=n.time.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),n.time.months=n.time.month.range,n.time.months.utc=n.time.month.utc.range,n.time.year=si(function(e){return(e=n.time.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),n.time.years=n.time.year.range,n.time.years.utc=n.time.year.utc.range;var mi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],yi=[[n.time.second,1],[n.time.second,5],[n.time.second,15],[n.time.second,30],[n.time.minute,1],[n.time.minute,5],[n.time.minute,15],[n.time.minute,30],[n.time.hour,1],[n.time.hour,3],[n.time.hour,6],[n.time.hour,12],[n.time.day,1],[n.time.day,2],[n.time.week,1],[n.time.month,1],[n.time.month,3],[n.time.year,1]],vi=[[n.time.format("%Y"),function(e){return!0}],[n.time.format("%B"),function(e){return e.getMonth()}],[n.time.format("%b %d"),function(e){return 1!=e.getDate()}],[n.time.format("%a %d"),function(e){return e.getDay()&&1!=e.getDate()}],[n.time.format("%I %p"),function(e){return e.getHours()}],[n.time.format("%I:%M"),function(e){return e.getMinutes()}],[n.time.format(":%S"),function(e){return e.getSeconds()}],[n.time.format(".%L"),function(e){return e.getMilliseconds()}]],bi=n.scale.linear(),xi=di(vi);yi.year=function(e,t){return bi.domain(e.map(gi)).ticks(t).map(pi)},n.time.scale=function(){return fi(n.scale.linear(),yi,xi)};var _i=yi.map(function(e){return[e[0].utc,e[1]]}),wi=di([[n.time.format.utc("%Y"),function(e){return!0}],[n.time.format.utc("%B"),function(e){return e.getUTCMonth()}],[n.time.format.utc("%b %d"),function(e){return 1!=e.getUTCDate()}],[n.time.format.utc("%a %d"),function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],[n.time.format.utc("%I %p"),function(e){return e.getUTCHours()}],[n.time.format.utc("%I:%M"),function(e){return e.getUTCMinutes()}],[n.time.format.utc(":%S"),function(e){return e.getUTCSeconds()}],[n.time.format.utc(".%L"),function(e){return e.getUTCMilliseconds()}]]);function Ti(e){var t=new Date(Date.UTC(e,0,1));return t.setUTCFullYear(e),t}function Mi(e){var t=e.getUTCFullYear(),n=Ti(t);return t+(e-n)/(Ti(t+1)-n)}_i.year=function(e,t){return bi.domain(e.map(Mi)).ticks(t).map(Ti)},n.time.scale.utc=function(){return fi(n.scale.linear(),_i,wi)}}(),function(){var e,t={},n={},r={};(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,a=Function.prototype,o=r.push,u=r.slice,l=r.concat,s=i.toString,c=i.hasOwnProperty,f=r.forEach,h=r.map,d=r.reduce,p=r.reduceRight,g=r.filter,m=r.every,y=r.some,v=r.indexOf,b=r.lastIndexOf,x=Array.isArray,_=Object.keys,w=a.bind,T=function(e){return e instanceof T?e:this instanceof T?void(this._wrapped=e):new T(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=T),exports._=T):e._=T,T.VERSION="1.4.3";var M=T.each=T.forEach=function(e,t,r){if(null!=e)if(f&&e.forEach===f)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,a=e.length;a>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(T.has(e,o)&&t.call(r,e[o],o,e)===n)return};T.map=T.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(M(e,function(e,i,a){r[r.length]=t.call(n,e,i,a)}),r)};var S="Reduce of empty array with no initial value";T.reduce=T.foldl=T.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduce===d)return r&&(t=T.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(M(e,function(e,a,o){i?n=t.call(r,n,e,a,o):(n=e,i=!0)}),!i)throw new TypeError(S);return n},T.reduceRight=T.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduceRight===p)return r&&(t=T.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var a=e.length;if(a!==+a){var o=T.keys(e);a=o.length}if(M(e,function(u,l,s){l=o?o[--a]:--a,i?n=t.call(r,n,e[l],l,s):(n=e[l],i=!0)}),!i)throw new TypeError(S);return n},T.find=T.detect=function(e,t,n){var r;return k(e,function(e,i,a){return t.call(n,e,i,a)?(r=e,!0):void 0}),r},T.filter=T.select=function(e,t,n){var r=[];return null==e?r:g&&e.filter===g?e.filter(t,n):(M(e,function(e,i,a){t.call(n,e,i,a)&&(r[r.length]=e)}),r)},T.reject=function(e,t,n){return T.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},T.every=T.all=function(e,t,r){t||(t=T.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(M(e,function(e,a,o){return(i=i&&t.call(r,e,a,o))?void 0:n}),!!i)};var k=T.some=T.any=function(e,t,r){t||(t=T.identity);var i=!1;return null==e?i:y&&e.some===y?e.some(t,r):(M(e,function(e,a,o){return i||(i=t.call(r,e,a,o))?n:void 0}),!!i)};T.contains=T.include=function(e,t){return null!=e&&(v&&e.indexOf===v?-1!=e.indexOf(t):k(e,function(e){return e===t}))},T.invoke=function(e,t){var n=u.call(arguments,2);return T.map(e,function(e){return(T.isFunction(t)?t:e[t]).apply(e,n)})},T.pluck=function(e,t){return T.map(e,function(e){return e[t]})},T.where=function(e,t){return T.isEmpty(t)?[]:T.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},T.max=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&T.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return M(e,function(e,i,a){var o=t?t.call(n,e,i,a):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},T.min=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&T.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return M(e,function(e,i,a){var o=t?t.call(n,e,i,a):e;r.computed>o&&(r={value:e,computed:o})}),r.value},T.shuffle=function(e){var t,n=0,r=[];return M(e,function(e){t=T.random(n++),r[n-1]=r[t],r[t]=e}),r};var N=function(e){return T.isFunction(e)?e:function(t){return t[e]}};T.sortBy=function(e,t,n){var r=N(t);return T.pluck(T.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var C=function(e,t,n,r){var i={},a=N(t||T.identity);return M(e,function(t,o){var u=a.call(n,t,o,e);r(i,u,t)}),i};T.groupBy=function(e,t,n){return C(e,t,n,function(e,t,n){(T.has(e,t)?e[t]:e[t]=[]).push(n)})},T.countBy=function(e,t,n){return C(e,t,n,function(e,t){T.has(e,t)||(e[t]=0),e[t]++})},T.sortedIndex=function(e,t,n,r){for(var i=(n=null==n?T.identity:N(n)).call(r,t),a=0,o=e.length;o>a;){var u=a+o>>>1;i>n.call(r,e[u])?a=u+1:o=u}return a},T.toArray=function(e){return e?T.isArray(e)?u.call(e):e.length===+e.length?T.map(e,T.identity):T.values(e):[]},T.size=function(e){return null==e?0:e.length===+e.length?e.length:T.keys(e).length},T.first=T.head=T.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},T.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},T.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},T.rest=T.tail=T.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},T.compact=function(e){return T.filter(e,T.identity)};var j=function(e,t,n){return M(e,function(e){T.isArray(e)?t?o.apply(n,e):j(e,t,n):n.push(e)}),n};T.flatten=function(e,t){return j(e,t,[])},T.without=function(e){return T.difference(e,u.call(arguments,1))},T.uniq=T.unique=function(e,t,n,r){T.isFunction(t)&&(r=n,n=t,t=!1);var i=n?T.map(e,n,r):e,a=[],o=[];return M(i,function(n,r){(t?r&&o[o.length-1]===n:T.contains(o,n))||(o.push(n),a.push(e[r]))}),a},T.union=function(){return T.uniq(l.apply(r,arguments))},T.intersection=function(e){var t=u.call(arguments,1);return T.filter(T.uniq(e),function(e){return T.every(t,function(t){return T.indexOf(t,e)>=0})})},T.difference=function(e){var t=l.apply(r,u.call(arguments,1));return T.filter(e,function(e){return!T.contains(t,e)})},T.zip=function(){for(var e=u.call(arguments),t=T.max(T.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=T.pluck(e,""+r);return n},T.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},T.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return e[r=T.sortedIndex(e,t)]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(v&&e.indexOf===v)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},T.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},T.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,a=Array(r);r>i;)a[i++]=e,e+=n;return a};var A=function(){};T.bind=function(e,t){var n,r;if(e.bind===w&&w)return w.apply(e,u.call(arguments,1));if(!T.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(u.call(arguments)));A.prototype=e.prototype;var i=new A;A.prototype=null;var a=e.apply(i,n.concat(u.call(arguments)));return Object(a)===a?a:i}},T.bindAll=function(e){var t=u.call(arguments,1);return 0==t.length&&(t=T.functions(e)),M(t,function(t){e[t]=T.bind(e[t],e)}),e},T.memoize=function(e,t){var n={};return t||(t=T.identity),function(){var r=t.apply(this,arguments);return T.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},T.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=function(e){return T.delay.apply(T,[e,1].concat(u.call(arguments,1)))},T.throttle=function(e,t){var n,r,i,a,o=0,u=function(){o=new Date,i=null,a=e.apply(n,r)};return function(){var l=new Date,s=t-(l-o);return n=this,r=arguments,0>=s?(clearTimeout(i),i=null,o=l,a=e.apply(n,r)):i||(i=setTimeout(u,s)),a}},T.debounce=function(e,t,n){var r,i;return function(){var a=this,o=arguments,u=n&&!r;return clearTimeout(r),r=setTimeout(function(){r=null,n||(i=e.apply(a,o))},t),u&&(i=e.apply(a,o)),i}},T.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},T.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},T.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},T.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},T.keys=_||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)T.has(e,n)&&(t[t.length]=n);return t},T.values=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push(e[n]);return t},T.pairs=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push([n,e[n]]);return t},T.invert=function(e){var t={};for(var n in e)T.has(e,n)&&(t[e[n]]=n);return t},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=function(e){return M(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},T.pick=function(e){var t={},n=l.apply(r,u.call(arguments,1));return M(n,function(n){n in e&&(t[n]=e[n])}),t},T.omit=function(e){var t={},n=l.apply(r,u.call(arguments,1));for(var i in e)T.contains(n,i)||(t[i]=e[i]);return t},T.defaults=function(e){return M(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e};var B=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof T&&(e=e._wrapped),t instanceof T&&(t=t._wrapped);var i=s.call(e);if(i!=s.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=n.length;a--;)if(n[a]==e)return r[a]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(u=(o=e.length)==t.length)for(;o--&&(u=B(e[o],t[o],n,r)););}else{var l=e.constructor,c=t.constructor;if(l!==c&&!(T.isFunction(l)&&l instanceof l&&T.isFunction(c)&&c instanceof c))return!1;for(var f in e)if(T.has(e,f)&&(o++,!(u=T.has(t,f)&&B(e[f],t[f],n,r))))break;if(u){for(f in t)if(T.has(t,f)&&!o--)break;u=!o}}return n.pop(),r.pop(),u};T.isEqual=function(e,t){return B(e,t,[],[])},T.isEmpty=function(e){if(null==e)return!0;if(T.isArray(e)||T.isString(e))return 0===e.length;for(var t in e)if(T.has(e,t))return!1;return!0},T.isElement=function(e){return!(!e||1!==e.nodeType)},T.isArray=x||function(e){return"[object Array]"==s.call(e)},T.isObject=function(e){return e===Object(e)},M(["Arguments","Function","String","Number","Date","RegExp"],function(e){T["is"+e]=function(t){return s.call(t)=="[object "+e+"]"}}),T.isArguments(arguments)||(T.isArguments=function(e){return!(!e||!T.has(e,"callee"))}),T.isFunction=function(e){return"function"==typeof e},T.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},T.isNaN=function(e){return T.isNumber(e)&&e!=+e},T.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==s.call(e)},T.isNull=function(e){return null===e},T.isUndefined=function(e){return void 0===e},T.has=function(e,t){return c.call(e,t)},T.noConflict=function(){return e._=t,this},T.identity=function(e){return e},T.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},T.random=function(e,t){return null==t&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var E={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};E.unescape=T.invert(E.escape);var D={escape:RegExp("["+T.keys(E.escape).join("")+"]","g"),unescape:RegExp("("+T.keys(E.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(e){T[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return E[e][t]})}}),T.result=function(e,t){if(null==e)return null;var n=e[t];return T.isFunction(n)?n.call(e):n},T.mixin=function(e){M(T.functions(e),function(t){var n=T[t]=e[t];T.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),q.call(this,n.apply(T,e))}})};var O=0;T.uniqueId=function(e){var t=""+ ++O;return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(e,t,n){n=T.defaults({},n,T.templateSettings);var r=RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(r,function(t,n,r,o,u){return a+=e.slice(i,u).replace(F,function(e){return"\\"+$[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),i=u+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=Function(n.variable||"obj","_",a)}catch(e){throw e.source=a,e}if(t)return o(t,T);var u=function(e){return o.call(this,e,T)};return u.source="function("+(n.variable||"obj")+"){\n"+a+"}",u},T.chain=function(e){return T(e).chain()};var q=function(e){return this._chain?T(e).chain():e};T.mixin(T),M(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];T.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],q.call(this,n)}}),M(["concat","join","slice"],function(e){var t=r[e];T.prototype[e]=function(){return q.call(this,t.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),r={getInsertionPoint:function(e){return _.chain(_.range(e,10)).reverse().map(function(e){return'g[data-index="'+e+'"]'}).value().join(", ")},colorClass:function(e,t){var n=e.getAttribute("class");return(null!==n?n.replace(/color\d+/g,""):"")+" color"+t}};function i(e,t,n,r){var i,a=_.chain(t).pluck("data").flatten().value();return i={x:d3.extent(a,function(e){return e.x}),y:d3.extent(a,function(e){return e.y})},_.each([n,r],function(t,n){var r,o=n?"y":"x";i[o]=d3.extent(a,function(e){return e[o]}),"ordinal"!==t&&_.each([o+"Min",o+"Max"],function(n,a){var u,l,s,c,f;"time"!==t&&(u=i[o],c=u[0],f=u[1],c===f&&(c-=s=Math.max(Math.round(c/10),4),f+=s),l=f-c,c=c?c-l/10:c,f=f?f+l/10:f,r=[c=u[0]>0?Math.max(c,0):c,f=u[1]<0?Math.min(f,0):f]),e.hasOwnProperty(n)&&null!==e[n]?i[o][a]=e[n]:"time"!==t&&(i[o][a]=r[a])})}),i}n.ordinal=function(e,t,n,r){var i=function(e,t){return _.chain(e).pluck("data").flatten().pluck(t).uniq().filter(function(e){return null!=e}).value().sort(d3.ascending)}(e,t);return d3.scale.ordinal().domain(i).rangeRoundBands(n,.25)},n.linear=function(e,t,n,r){return d3.scale.linear().domain(r).nice().rangeRound(n)},n.exponential=function(e,t,n,r){return d3.scale.pow().exponent(.65).domain(r).nice().rangeRound(n)},n.time=function(e,t,n,r){return d3.time.scale().domain(_.map(r,function(e){return new Date(e)})).range(n)},n.xy=function(t,n,r,a){var o=t._options,u=i(o,n,r,a),l={},s=[o.axisPaddingLeft,t._width],c=[t._height,o.axisPaddingTop];return _.each([r,a],function(t,r){var i=0===r?"x":"y",a=0===r?s:c,o=e.getScale(t);l[i]=o(n,i,a,u[i])}),l},function(){var e=2,n="g.bar",i=r.getInsertionPoint(e);t.bar={postUpdateScale:function(e,t,n,r){e.xScale2=d3.scale.ordinal().domain(d3.range(0,n.length)).rangeRoundBands([0,e.xScale.rangeBand()],.08)},enter:function(t,a,o,u,l){var s,c,f=t.yZero;(s=t._g.selectAll(n+o).data(u,function(e){return e.className})).enter().insert("g",i).attr("data-index",e).style("opacity",0).attr("class",function(e,t){return _.uniq((o+e.className).split(".")).join(" ")+" bar "+r.colorClass(this,t)}).attr("transform",function(e,n){return"translate("+t.xScale2(n)+",0)"}),(c=s.selectAll("rect").data(function(e){return e.data},function(e){return e.x})).enter().append("rect").attr("width",0).attr("rx",3).attr("ry",3).attr("x",function(e){return t.xScale(e.x)+t.xScale2.rangeBand()/2}).attr("height",function(e){return Math.abs(f-t.yScale(e.y))}).attr("y",function(e){return e.y<0?f:t.yScale(e.y)}).on("mouseover",l.mouseover).on("mouseout",l.mouseout).on("click",l.click),a.barGroups=s,a.bars=c},update:function(e,t,n){var i=e.yZero;t.barGroups.attr("class",function(e,t){return r.colorClass(this,t)}).transition().duration(n).style("opacity",1).attr("transform",function(t,n){return"translate("+e.xScale2(n)+",0)"}),t.bars.transition().duration(n).attr("width",e.xScale2.rangeBand()).attr("x",function(t){return e.xScale(t.x)}).attr("height",function(t){return Math.abs(i-e.yScale(t.y))}).attr("y",function(t){return t.y<0?i:e.yScale(t.y)})},exit:function(e,t,n){t.bars.exit().transition().duration(n).attr("width",0).remove(),t.barGroups.exit().transition().duration(n).style("opacity",0).remove()},destroy:function(e,t,n){var r=e.xScale2?e.xScale2.rangeBand()/2:0;delete e.xScale2,t.bars.transition().duration(n).attr("width",0).attr("x",function(t){return e.xScale(t.x)+r})}}}(),function(){var e=3,n="g.line",i=r.getInsertionPoint(e);t.line={enter:function(t,a,o,u,l){var s,c,f,h=t._options.interpolation,d=function(e,n){return t.xScale2||t.xScale.rangeBand?t.xScale(e.x)+t.xScale.rangeBand()/2:t.xScale(e.x)},p=function(e){return t.yScale(e.y)},g=d3.svg.line().x(d).interpolate(h),m=d3.svg.area().x(d).y1(t.yZero).interpolate(h);function y(e){return[e.data]}(s=t._g.selectAll(n+o).data(u,function(e){return e.className})).enter().insert("g",i).attr("data-index",e).attr("class",function(e,t){return _.uniq((o+e.className).split(".")).join(" ")+" line "+r.colorClass(this,t)}),(c=s.selectAll("path.fill").data(y)).enter().append("path").attr("class","fill").style("opacity",0).attr("d",m.y0(p)),(f=s.selectAll("path.line").data(y)).enter().append("path").attr("class","line").style("opacity",0).attr("d",g.y(p)),a.lineContainers=s,a.lineFills=c,a.linePaths=f,a.lineX=d,a.lineY=p,a.lineA=m,a.line=g},update:function(e,t,n){t.lineContainers.attr("class",function(e,t){return r.colorClass(this,t)}),t.lineFills.transition().duration(n).style("opacity",1).attr("d",t.lineA.y0(t.lineY)),t.linePaths.transition().duration(n).style("opacity",1).attr("d",t.line.y(t.lineY))},exit:function(e,t){t.linePaths.exit().style("opacity",0).remove(),t.lineFills.exit().style("opacity",0).remove(),t.lineContainers.exit().remove()},destroy:function(e,t,n){t.linePaths.transition().duration(n).style("opacity",0),t.lineFills.transition().duration(n).style("opacity",0)}}}(),function(){var e=t.line;t["line-dotted"]={enter:function(t,n,r,i,a){var o;e.enter(t,n,r,i,a),(o=n.lineContainers.selectAll("circle").data(function(e){return e.data},function(e){return e.x})).enter().append("circle").style("opacity",0).attr("cx",n.lineX).attr("cy",n.lineY).attr("r",5).on("mouseover",a.mouseover).on("mouseout",a.mouseout).on("click",a.click),n.lineCircles=o},update:function(t,n,r){e.update.apply(null,_.toArray(arguments)),n.lineCircles.transition().duration(r).style("opacity",1).attr("cx",n.lineX).attr("cy",n.lineY)},exit:function(t,n){n.lineCircles.exit().remove(),e.exit.apply(null,_.toArray(arguments))},destroy:function(t,n,r){e.destroy.apply(null,_.toArray(arguments)),n.lineCircles&&n.lineCircles.transition().duration(r).style("opacity",0)}}}(),function(){var e=t["line-dotted"];function n(e){function t(e,t){return e+t.y}return _.map(e,function(e){var n=e.data.length,r=_.clone(e.data);for(e=_.clone(e);n;)r[n-=1]=_.clone(e.data[n]),r[n].y0=e.data[n].y,r[n].y=_.reduce(_.first(e.data,n),t,e.data[n].y);return _.extend(e,{data:r})})}function r(e){e.hasOwnProperty("cumulativeOMainData")&&(e._mainData=e.cumulativeOMainData,delete e.cumulativeOMainData,e._compData=e.cumulativeOCompData,delete e.cumulativeOCompData)}t.cumulative={preUpdateScale:function(e,t){r(e),e.cumulativeOMainData=e._mainData,e._mainData=n(e._mainData),e.cumulativeOCompData=e._compData,e._compData=n(e._compData)},enter:function(t,n,r,i,a){e.enter(t,n,r,i,a)},update:e.update,exit:e.exit,destroy:function(t,n,i){r(t),e.destroy.apply(null,_.toArray(arguments))}}}();var a=[[]],o={mouseover:function(e,t){},mouseout:function(e,t){},click:function(e,t){},axisPaddingTop:0,axisPaddingRight:0,axisPaddingBottom:5,axisPaddingLeft:20,paddingTop:0,paddingRight:0,paddingBottom:20,paddingLeft:60,tickHintX:10,tickFormatX:function(e){return e},tickHintY:10,tickFormatY:function(e){return e},xMin:null,xMax:null,yMin:null,yMax:null,dataFormatX:function(e){return e},dataFormatY:function(e){return e},unsupported:function(e){d3.select(e).text("SVG is not supported on your browser")},empty:function(e,t,n){},notempty:function(e,t){},timing:750,interpolation:"monotone",sortX:function(e,t){return e.x||t.x?e.x<t.x?-1:1:0}};function e(e,t,n,r){var i,a,u=this;if(u._options=r=_.defaults(r||{},o),!1==(!!(a=document).createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect))return r.unsupported(n);u._selector=n,u._container=d3.select(n),u._drawSvg(),u._mainStorage={},u._compStorage={},t=_.clone(t),e&&!t.type&&(t.type=e),u.setData(t),d3.select(window).on("resize.for."+n,function(){i&&clearTimeout(i),i=setTimeout(function(){i=null,u._resize()},500)})}e.setVis=function(e,n){if(t.hasOwnProperty(e))throw'Cannot override vis type "'+e+'".';t[e]=n},e.getVis=function(e){if(!t.hasOwnProperty(e))throw'Vis type "'+e+'" does not exist.';return _.clone(t[e])},e.setScale=function(e,t){if(n.hasOwnProperty(e))throw'Scale type "'+e+'" already exists.';n[e]=t},e.getScale=function(e){if(!n.hasOwnProperty(e))throw'Scale type "'+e+'" does not exist.';return n[e]},e.visutils=r,_.defaults(e.prototype,{setType:function(e,n){if(!this._type||e!==this._type){if(!t.hasOwnProperty(e))throw'Vis type "'+e+'" is not defined.';this._type&&this._destroy(this._vis,this._mainStorage),this._type=e,this._vis=t[e],n||this._draw()}},setData:function(e){var t=this._options,n=_.clone(e);if(!e.hasOwnProperty("main"))throw'No "main" key found in given chart data.';switch(e.type){case"bar":e.xScale="ordinal";break;case void 0:e.type=this._type}function r(e){var n=_.map(_.clone(e.data),function(e){var n=_.clone(e);return e.hasOwnProperty("x")&&(n.x=t.dataFormatX(e.x)),e.hasOwnProperty("y")&&(n.y=t.dataFormatY(e.y)),n}).sort(t.sortX);return _.extend(_.clone(e),{data:n})}t.xMin=isNaN(parseInt(e.xMin,10))?t.xMin:e.xMin,t.xMax=isNaN(parseInt(e.xMax,10))?t.xMax:e.xMax,t.yMin=isNaN(parseInt(e.yMin,10))?t.yMin:e.yMin,t.yMax=isNaN(parseInt(e.yMax,10))?t.yMax:e.yMax,this._vis&&this._destroy(this._vis,this._mainStorage),this.setType(e.type,!0),n.main=_.map(n.main,r),this._mainData=n.main,this._xScaleType=n.xScale,this._yScaleType=n.yScale,n.hasOwnProperty("comp")?(n.comp=_.map(n.comp,r),this._compData=n.comp):this._compData=[],this._draw()},setScale:function(e,t){switch(e){case"x":this._xScaleType=t;break;case"y":this._yScaleType=t;break;default:throw'Cannot change scale of unknown axis "'+e+'".'}this._draw()},_drawSvg:function(){var e,t,n,r=this._container,i=this._options,o=parseInt(r.style("width").replace("px",""),10),u=parseInt(r.style("height").replace("px",""),10);(e=r.selectAll("svg").data(a)).enter().append("svg").attr("height",u).attr("width",o).attr("class","xchart"),e.transition().attr("width",o).attr("height",u),(t=e.selectAll("g").data(a)).enter().append("g").attr("transform","translate("+i.paddingLeft+","+i.paddingTop+")"),(n=t.selectAll("g.scale").data(a)).enter().append("g").attr("class","scale"),this._svg=e,this._g=t,this._gScale=n,this._height=u-i.paddingTop-i.paddingBottom-i.axisPaddingTop-i.axisPaddingBottom,this._width=o-i.paddingLeft-i.paddingRight-i.axisPaddingLeft-i.axisPaddingRight},_resize:function(e){this._drawSvg(),this._draw()},_drawAxes:function(){if(!this._noData){var e,t,n,r,i,o,u=this._options,l=this._gScale.transition().duration(u.timing),s=u.tickHintX,c=u.tickHintY,f=this._height+u.axisPaddingTop+u.axisPaddingBottom;d3.svg.line().x(function(e){return e});r=d3.svg.axis().scale(this.xScale).ticks(s).tickSize(-this._height).tickFormat(u.tickFormatX).orient("bottom"),(n=this._gScale.selectAll("g.axisX").data(a)).enter().append("g").attr("class","axis axisX").attr("transform","translate(0,"+f+")"),n.call(r),(o=this._gScale.selectAll(".axisX g")[0]).length>this._width/80&&(o.sort(function(e,t){var n=/translate\(([^,)]+)/;return e=e.getAttribute("transform").match(n),t=t.getAttribute("transform").match(n),parseFloat(e[1],10)-parseFloat(t[1],10)}),d3.selectAll(o).filter(function(e,t){return t%(Math.ceil(o.length/s)+1)}).remove()),i=d3.svg.axis().scale(this.yScale).ticks(c).tickSize(-this._width-u.axisPaddingRight-u.axisPaddingLeft).tickFormat(u.tickFormatY).orient("left"),this._gScale.selectAll("g.axisY").data(a).enter().append("g").attr("class","axis axisY").attr("transform","translate(0,0)"),l.selectAll("g.axisY").call(i),(e=this._gScale.selectAll("g.axisZero").data([[]])).enter().append("g").attr("class","axisZero"),(t=e.selectAll("line").data([[]])).enter().append("line").attr("x1",0).attr("x2",this._width+u.axisPaddingLeft+u.axisPaddingRight).attr("y1",this.yZero).attr("y2",this.yZero),t.transition().duration(u.timing).attr("y1",this.yZero).attr("y2",this.yZero)}},_updateScale:function(){var e,t,r=this,i=function(){return _.union(r._mainData,r._compData)},a=i(),o=r._vis;delete r.xScale,delete r.yScale,delete r.yZero,o.hasOwnProperty("preUpdateScale")&&o.preUpdateScale(r,a,r._mainData,r._compData),a=i(),e=n.xy(r,a,r._xScaleType,r._yScaleType),r.xScale=e.x,r.yScale=e.y,t=r.yScale.domain()[0],r.yZero=t>0?r.yScale(t):r.yScale(0),o.hasOwnProperty("postUpdateScale")&&o.postUpdateScale(r,a,r._mainData,r._compData)},_enter:function(e,t,n,r){var i={click:this._options.click,mouseover:this._options.mouseover,mouseout:this._options.mouseout};this._checkVisMethod(e,"enter"),e.enter(this,t,r,n,i)},_update:function(e,t){this._checkVisMethod(e,"update"),e.update(this,t,this._options.timing)},_exit:function(e,t){this._checkVisMethod(e,"exit"),e.exit(this,t,this._options.timing)},_destroy:function(e,t){this._checkVisMethod(e,"destroy");try{e.destroy(this,t,this._options.timing)}catch(e){}},_draw:function(){var e,n,r=this,i=r._options;r._noData=0===_.flatten(_.pluck(r._mainData,"data").concat(_.pluck(r._compData,"data"))).length,r._updateScale(),r._drawAxes(),r._enter(r._vis,r._mainStorage,r._mainData,".main"),r._exit(r._vis,r._mainStorage),r._update(r._vis,r._mainStorage),e=_.chain(r._compData).groupBy(function(e){return e.type}),n=e.keys(),_.each(r._compStorage,function(e,i){if(-1===n.indexOf(i).value()){var a=t[i];r._enter(a,e,[],".comp."+i.replace(/\W+/g,"")),r._exit(a,e)}}),e.each(function(e,n){var i,a=t[n];r._compStorage.hasOwnProperty(n)||(r._compStorage[n]={}),i=r._compStorage[n],r._enter(a,i,e,".comp."+n.replace(/\W+/g,"")),r._exit(a,i),r._update(a,i)}),r._noData?i.empty(r,r._selector,r._mainData):i.notempty(r,r._selector)},_checkVisMethod:function(e,t){if(!e[t])throw'Required method "'+t+'" not found on vis type "'+this._type+'".'}}),"function"==typeof define&&define.amd&&"object"==typeof define.amd?define(function(){return e}):window.xChart=e}(),function(){var e=!0,t=null,n=!1;function r(e){return function(){return e}}var i,a=Object,o=Array,u=RegExp,l=Date,s=String,c=Number,f=Math,h="undefined"!=typeof global?global:this,d=a.defineProperty&&a.defineProperties,p="Array,Boolean,Date,Function,Number,String,RegExp".split(","),g=w(p[0]),m=w(p[1]),y=w(p[2]),v=w(p[3]),b=w(p[4]),x=w(p[5]),_=w(p[6]);function w(e){return function(t){return a.prototype.toString.call(t)==="[object "+e+"]"}}function T(e){e.SugarMethods||(k(e,"SugarMethods",{}),M(e,n,n,{restore:function(){var t=0===arguments.length,n=N(arguments);P(e.SugarMethods,function(r,i){(t||n.indexOf(r)>-1)&&k(i.wa?e.prototype:e,r,i.method)})},extend:function(t,r,i){M(e,i!==n,r,t)}}))}function M(t,r,i,a){var o,u=r?t.prototype:t;T(t),P(a,function(a,l){o=u[a],"function"==typeof i&&(l=function(t,n,r){return function(){return!t||r!==e&&r.apply(this,arguments)?n.apply(this,arguments):t.apply(this,arguments)}}(u[a],l,i)),i===n&&u[a]||k(u,a,l),t.SugarMethods[a]={wa:r,method:l,Da:o}})}function S(e,t,n,r,i){var a={};(r=x(r)?r.split(","):r).forEach(function(e,t){i(a,e,t)}),M(e,t,n,a)}function k(t,r,i){d?a.defineProperty(t,r,{value:i,configurable:e,enumerable:n,writable:e}):t[r]=i}function N(e,t){var n,r=[];for(n=0;n<e.length;n++)r.push(e[n]),t&&t.call(e,e[n],n);return r}function C(e,t,n){N(o.prototype.concat.apply([],o.prototype.slice.call(e,n||0)),t)}function j(e){if(!e||!e.call)throw new TypeError("Callback is not callable")}function A(e){return void 0!==e}function B(e){return void 0===e}function E(e){return e&&"object"==typeof e}function D(e){return!!e&&"[object Object]"===a.prototype.toString.call(e)&&"hasOwnProperty"in e}function O(e,t){return a.hasOwnProperty.call(e,t)}function P(e,t){for(var r in e)if(O(e,r)&&t.call(e,r,e[r],e)===n)break}function $(e,t){return P(t,function(n){e[n]=t[n]}),e}function F(e){$(this,e)}function q(e,t,n,r){var i=[];e=parseInt(e);for(var a=r<0;!a&&e<=t||a&&e>=t;)i.push(e),n&&n.call(this,e),e+=r||1;return i}function L(e,t,n){n=f[n||"round"];var r=f.pow(10,f.abs(t||0));return t<0&&(r=1/r),n(e*r)/r}function I(e,t){return L(e,t,"floor")}function R(e,t,n,r){return r=z(t-(r=f.abs(e).toString(r||10)).replace(/\.\d+/,"").length,"0")+r,(n||e<0)&&(r=(e<0?"-":"+")+r),r}function H(e){if(e>=11&&e<=13)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function z(e,t){return o(f.max(0,A(e)?e:1)+1).join(t||"")}function U(e,t){var n=e.toString().match(/[^/]*$/)[0];return t&&(n=(n+t).split("").sort().join("").replace(/([gimy])\1+/g,"$1")),n}function Q(e){return x(e)||(e=s(e)),e.replace(/([\\/'*+?|()\[\]{}.^$])/g,"\\$1")}function W(e,n){var r,i,o,u,l,c,f=typeof e;if("string"===f)return e;if(o=a.prototype.toString.call(e),r=D(e),i="[object Array]"===o,e!=t&&r||i){if(n||(n=[]),n.length>1)for(c=n.length;c--;)if(n[c]===e)return"CYC";for(n.push(e),r=s(e.constructor),u=i?e:a.keys(e).sort(),c=0;c<u.length;c++)r+=(l=i?c:u[c])+W(e[l],n);n.pop()}else r=1/e==-1/0?"-0":s(e&&e.valueOf?e.valueOf():e);return f+o+r}function Y(e){var t=a.prototype.toString.call(e);return"[object Date]"===t||"[object Array]"===t||"[object String]"===t||"[object Number]"===t||"[object RegExp]"===t||"[object Boolean]"===t||"[object Arguments]"===t||D(e)}function V(e,t,r){var i,a=[],o=e.length,u=t[t.length-1]!==n;return N(t,function(t){if(m(t))return n;u&&(t%=o)<0&&(t=o+t),i=r?e.charAt(t)||"":e[t],a.push(i)}),a.length<2?a[0]:a}function J(r,i){S(i,e,n,r,function(e,n){e[n+("equal"===n?"s":"")]=function(){return a[n].apply(t,[this].concat(N(arguments)))}})}function X(e,t,n,r){var i=e.length,a=-1==r,o=a?i-1:0;for((n=isNaN(n)?o:parseInt(n>>0))<0&&(n=i+n),(!a&&n<0||a&&n>=i)&&(n=o);a&&n>=0||!a&&n<i;){if(e[n]===t)return n;n+=r}return-1}function Z(e,t,n,r){var i=e.length,a=0,o=A(n);if(j(t),0==i&&!o)throw new TypeError("Reduce called on empty array with no initial value");for(o?n=n:(n=e[r?i-1:a],a++);a<i;)(o=r?i-a-1:a)in e&&(n=t(n,e[o],o,e)),a++;return n}function G(e){if(0===e.length)throw new TypeError("First argument must be defined")}function K(t,r,i,a){var o=e;return t===r?e:_(r)&&x(t)?u(r).test(t):v(r)?r.apply(i,a):D(r)&&E(t)?(P(r,function(e){K(t[e],r[e],i,[t[e],t])||(o=n)}),o):Y(t)&&Y(r)?W(t)===W(r):t===r}function ee(e,t,n,r){return B(t)?e:v(t)?t.apply(n,r||[]):v(e[t])?e[t].call(e):e[t]}function te(t,r,i,a){var o,u;for(i<0&&(i=t.length+i),u=isNaN(i)?0:i,i=a===e?t.length+u:t.length;u<i;){if(!((o=u%t.length)in t))return ne(t,r,u);if(r.call(t,t[o],o,t)===n)break;u++}}function ne(e,t,n){var r,i=[];for(r in e)r in e&&r>>>0==r&&4294967295!=r&&r>=n&&i.push(parseInt(r));return i.sort().each(function(n){return t.call(e,e[n],n,e)}),e}function re(e,t,r,i,a){var o,u;return te(e,function(e,r,i){if(K(e,t,i,[e,r,i]))return o=e,u=r,n},r,i),a?u:o}function ie(e,t){var n,r=[],i={};return te(e,function(a,o){n=t?ee(a,t,e,[a,o,e]):a,se(i,n)||r.push(a)}),r}function ae(e,t,n){var r=[],i={};return t.each(function(e){se(i,e)}),e.each(function(e){var t=W(e),a=!Y(e);if(le(i,t,e,a)!=n){var o=0;if(a)for(t=i[t];o<t.length;)t[o]===e?t.splice(o,1):o+=1;else delete i[t];r.push(e)}}),r}function oe(e,t,n){t=t||1/0,n=n||0;var r=[];return te(e,function(e){g(e)&&n<t?r=r.concat(oe(e,t,n+1)):r.push(e)}),r}function ue(e){var t=[];return N(e,function(e){t=t.concat(e)}),t}function le(e,t,n,r){var i=t in e;return r&&(e[t]||(e[t]=[]),i=-1!==e[t].indexOf(n)),i}function se(e,t){var n=W(t),r=!Y(t),i=le(e,n,t,r);return r?e[n].push(t):e[n]=t,i}function ce(e,t,n,r){var i,a=[],o="max"===n,u="min"===n,l=Array.isArray(e);return P(e,function(n){var r=e[n];if(B(n=ee(r,t,e,l?[r,parseInt(n),e]:[])))throw new TypeError("Cannot compare with undefined");n===i?a.push(r):(B(i)||o&&n>i||u&&n<i)&&(a=[r],i=n)}),l||(a=oe(a,1)),r?a:a[0]}function fe(e){return o[me]&&(e=e.toLowerCase()),e.replace(o[ge],"")}function he(e,t){var n=e.charAt(t);return(o[ye]||{})[n]||n}function de(e){var n=o[pe];return e?n.indexOf(e):t}F.prototype.constructor=a,T(a),P(p,function(e,t){T(h[t])}),M(a,n,n,{keys:function(e){var t=[];if(!E(e)&&!_(e)&&!v(e))throw new TypeError("Object required");return P(e,function(e){t.push(e)}),t}}),M(o,n,n,{isArray:function(e){return g(e)}}),M(o,e,n,{every:function(t,r){var i=this.length,a=0;for(G(arguments);a<i;){if(a in this&&!t.call(r,this[a],a,this))return n;a++}return e},some:function(t,r){var i=this.length,a=0;for(G(arguments);a<i;){if(a in this&&t.call(r,this[a],a,this))return e;a++}return n},map:function(e,t){var n=this.length,r=0,i=Array(n);for(G(arguments);r<n;)r in this&&(i[r]=e.call(t,this[r],r,this)),r++;return i},filter:function(e,t){var n=this.length,r=0,i=[];for(G(arguments);r<n;)r in this&&e.call(t,this[r],r,this)&&i.push(this[r]),r++;return i},indexOf:function(e,t){return x(this)?this.indexOf(e,t):X(this,e,t,1)},lastIndexOf:function(e,t){return x(this)?this.lastIndexOf(e,t):X(this,e,t,-1)},forEach:function(e,t){var n=this.length,r=0;for(j(e);r<n;)r in this&&e.call(t,this[r],r,this),r++},reduce:function(e,t){return Z(this,e,t)},reduceRight:function(t,n){return Z(this,t,n,e)}}),M(Function,e,n,{bind:function(e){var t,n=this,r=N(arguments).slice(1);if(!v(this))throw new TypeError("Function.prototype.bind called on a non-function");return(t=function(){return n.apply(n.prototype&&this instanceof n?this:e,r.concat(N(arguments)))}).prototype=this.prototype,t}}),M(l,n,n,{now:function(){return(new l).getTime()}}),function(){var t="\t\n\v\f\r   ᠎             \u2028\u2029　\ufeff".match(/^\s+$/);try{s.prototype.trim.call([1])}catch(e){t=n}M(s,e,!t,{trim:function(){return this.toString().trimLeft().trimRight()},trimLeft:function(){return this.replace(u("^[\t\n\v\f\r   ᠎             \u2028\u2029　\ufeff]+"),"")},trimRight:function(){return this.replace(u("[\t\n\v\f\r   ᠎             \u2028\u2029　\ufeff]+$"),"")}})}(),i=(i=new l(l.UTC(1999,11,31))).toISOString&&"1999-12-31T00:00:00.000Z"===i.toISOString(),S(l,e,!i,"toISOString,toJSON",function(e,t){e[t]=function(){return R(this.getUTCFullYear(),4)+"-"+R(this.getUTCMonth()+1,2)+"-"+R(this.getUTCDate(),2)+"T"+R(this.getUTCHours(),2)+":"+R(this.getUTCMinutes(),2)+":"+R(this.getUTCSeconds(),2)+"."+R(this.getUTCMilliseconds(),3)+"Z"}});var pe="AlphanumericSortOrder",ge="AlphanumericSortIgnore",me="AlphanumericSortIgnoreCase",ye="AlphanumericSortEquivalents";function ve(e){return e&&e.valueOf&&(e=e.valueOf()),a.keys(e)}function be(e,t){S(a,n,n,e,function(e,n){e[n]=function(e,r,i){var a=ve(e);return i=o.prototype[n].call(a,function(n){return t?ee(e[n],r,e,[n,e[n],e]):K(e[n],r,e,[n,e[n],e])},i),g(i)&&(i=i.reduce(function(t,n){return t[n]=e[n],t},{})),i}}),J(e,F)}M(o,n,n,{create:function(){var e,t=[];return N(arguments,function(n){if(E(n))try{(e=o.prototype.slice.call(n,0)).length>0&&(n=e)}catch(e){}t=t.concat(n)}),t}}),M(o,e,n,{find:function(e,t,n){return re(this,e,t,n)},findAll:function(e,t,n){var r=[];return te(this,function(t,n,i){K(t,e,i,[t,n,i])&&r.push(t)},t,n),r},findIndex:function(t,n,r){return B(t=re(this,t,n,r,e))?-1:t},count:function(e){return B(e)?this.length:this.findAll(e).length},removeAt:function(e,t){if(B(e))return this;B(t)&&(t=e);for(var n=0;n<=t-e;n++)this.splice(e,1);return this},include:function(e,t){return this.clone().add(e,t)},exclude:function(){return o.prototype.remove.apply(this.clone(),arguments)},clone:function(){return $([],this)},unique:function(e){return ie(this,e)},flatten:function(e){return oe(this,e)},union:function(){return ie(this.concat(ue(arguments)))},intersect:function(){return ae(this,ue(arguments),n)},subtract:function(){return ae(this,ue(arguments),e)},at:function(){return V(this,arguments)},first:function(e){return B(e)?this[0]:(e<0&&(e=0),this.slice(0,e))},last:function(e){return B(e)?this[this.length-1]:this.slice(this.length-e<0?0:this.length-e)},from:function(e){return this.slice(e)},to:function(e){return B(e)&&(e=this.length),this.slice(0,e)},min:function(e,t){return ce(this,e,"min",t)},max:function(e,t){return ce(this,e,"max",t)},least:function(e,t){return ce(this.groupBy.apply(this,[e]),"length","min",t)},most:function(e,t){return ce(this.groupBy.apply(this,[e]),"length","max",t)},sum:function(e){return(e=e?this.map(e):this).length>0?e.reduce(function(e,t){return e+t}):0},average:function(e){return(e=e?this.map(e):this).length>0?e.sum()/e.length:0},inGroups:function(e,t){var n=arguments.length>1,r=this,i=[],a=L(this.length/e,void 0,"ceil");return q(0,e-1,function(e){e*=a;var o=r.slice(e,e+a);n&&o.length<a&&q(1,a-o.length,function(){o=o.add(t)}),i.push(o)}),i},inGroupsOf:function(e,n){var r,i=[],a=this.length,o=this;return 0===a||0===e?o:(B(e)&&(e=1),B(n)&&(n=t),q(0,L(a/e,void 0,"ceil")-1,function(t){for(r=o.slice(e*t,e*t+e);r.length<e;)r.push(n);i.push(r)}),i)},isEmpty:function(){return 0==this.compact().length},sortBy:function(e,n){var r=this.clone();return r.sort(function(i,a){var o,u;if(o=ee(i,e,r,[i]),u=ee(a,e,r,[a]),x(o)&&x(u)){u=u;var l,s,c,f,h=0,d=0;o=fe(o=o),u=fe(u);do{c=he(o,h),f=he(u,h),l=de(c),s=de(f),-1!==l&&-1!==s||(l=o.charCodeAt(h)||t,s=u.charCodeAt(h)||t),(c=c!==o.charAt(h))!==(f=f!==u.charAt(h))&&0===d&&(d=c-f),h+=1}while(l!=t&&s!=t&&l===s);o=l===s?d:l<s?-1:1}else o=o<u?-1:o>u?1:0;return o*(n?-1:1)}),r},randomize:function(){for(var e,t,n=this.concat(),r=n.length;r;e=parseInt(f.random()*r),t=n[--r],n[r]=n[e],n[e]=t);return n},zip:function(){var e=N(arguments);return this.map(function(n,r){return[n].concat(e.map(function(e){return r in e?e[r]:t}))})},sample:function(e){var t=this.randomize();return arguments.length>0?t.slice(0,e):t[0]},each:function(e,t,n){return te(this,e,t,n),this},add:function(e,t){return b(c(t))&&!isNaN(t)||(t=this.length),o.prototype.splice.apply(this,[t,0].concat(e)),this},remove:function(){var e,t=this;return N(arguments,function(n){for(e=0;e<t.length;)K(t[e],n,t,[t[e],e,t])?t.splice(e,1):e++}),t},compact:function(e){var n=[];return te(this,function(r){g(r)?n.push(r.compact()):e&&r?n.push(r):!e&&r!=t&&r.valueOf()==r.valueOf()&&n.push(r)}),n},groupBy:function(e,t){var n,r=this,i={};return te(r,function(t,a){n=ee(t,e,r,[t,a,r]),i[n]||(i[n]=[]),i[n].push(t)}),t&&P(i,t),i},none:function(){return!this.any.apply(this,arguments)}}),M(o,e,n,{all:o.prototype.every,any:o.prototype.some,insert:o.prototype.add}),M(a,n,n,{map:function(e,t){return ve(e).reduce(function(n,r){return n[r]=ee(e[r],t,e,[r,e[r],e]),n},{})},reduce:function(e){var t=ve(e).map(function(t){return e[t]});return t.reduce.apply(t,N(arguments).slice(1))},each:function(e,t){return j(t),P(e,t),e},size:function(e){return ve(e).length}});var xe="any,all,none,count,find,findAll,isEmpty".split(","),_e="sum,average,min,max,least,most".split(","),we="map,reduce,size".split(","),Te=xe.concat(_e).concat(we);S(o,e,function(){var e=arguments;return e.length>0&&!v(e[0])},"map,every,all,some,any,none,filter",function(e,t){e[t]=function(e){return this[t](function(n,r){return"map"===t?ee(n,e,this,[n,r,this]):K(n,e,this,[n,r,this])})}}),function(){o[pe]="AÁÀÂÃĄBCĆČÇDĎÐEÉÈĚÊËĘFGĞHıIÍÌİÎÏJKLŁMNŃŇÑOÓÒÔPQRŘSŚŠŞTŤUÚÙŮÛÜVWXYÝZŹŻŽÞÆŒØÕÅÄÖ".split("").map(function(e){return e+e.toLowerCase()}).join("");var t={};te("AÁÀÂÃÄ,CÇ,EÉÈÊË,IÍÌİÎÏ,OÓÒÔÕÖ,Sß,UÚÙÛÜ".split(","),function(e){var n=e.charAt(0);te(e.slice(1).split(""),function(e){t[e]=n,t[e.toLowerCase()]=n.toLowerCase()})}),o[me]=e,o[ye]=t}(),be(xe),be(_e,e),J(we,F);var Me,Se,ke,Ne,Ce,je=["ampm","hour","minute","second","ampm","utc","offset_sign","offset_hours","offset_minutes","ampm"],Ae="({t})?\\s*(\\d{1,2}(?:[,.]\\d+)?)(?:{h}([0-5]\\d(?:[,.]\\d+)?)?{m}(?::?([0-5]\\d(?:[,.]\\d+)?){s})?\\s*(?:({t})|(Z)|(?:([+-])(\\d{2,2})(?::?(\\d{2,2}))?)?)?|\\s*({t}))",Be={},Ee=[],De=[{ba:"f{1,4}|ms|milliseconds",format:function(e){return Je(e,"Milliseconds")}},{ba:"ss?|seconds",format:function(e){return Je(e,"Seconds")}},{ba:"mm?|minutes",format:function(e){return Je(e,"Minutes")}},{ba:"hh?|hours|12hr",format:function(e){return 0===(e=Je(e,"Hours"))?12:e-12*I(e/13)}},{ba:"HH?|24hr",format:function(e){return Je(e,"Hours")}},{ba:"dd?|date|day",format:function(e){return Je(e,"Date")}},{ba:"dow|weekday",la:e,format:function(e,t,n){return e=Je(e,"Day"),t.weekdays[e+7*(n-1)]}},{ba:"MM?",format:function(e){return Je(e,"Month")+1}},{ba:"mon|month",la:e,format:function(e,t,n){return e=Je(e,"Month"),t.months[e+12*(n-1)]}},{ba:"y{2,4}|year",format:function(e){return Je(e,"FullYear")}},{ba:"[Tt]{1,2}",format:function(e,t,n,r){return 0==t.ampm.length?"":(e=Je(e,"Hours"),t=t.ampm[I(e/12)],1===r.length&&(t=t.slice(0,1)),"T"===r.slice(0,1)&&(t=t.toUpperCase()),t)}},{ba:"z{1,4}|tz|timezone",text:e,format:function(e,t,n,r){return e=e.getUTCOffset(),"z"!=r&&"zz"!=r||(e=e.replace(/(\d{2})(\d{2})/,function(e,t){return R(t,r.length)})),e}},{ba:"iso(tz|timezone)",format:function(t){return t.getUTCOffset(e)}},{ba:"ord",format:function(e){return(e=Je(e,"Date"))+H(e)}}],Oe=[{$:"year",method:"FullYear",ja:e,da:function(e){return 24*(365+(e?e.isLeapYear()?1:0:.25))*60*60*1e3}},{$:"month",method:"Month",ja:e,da:function(e,t){var n,r=30.4375;return e&&t<=(n=e.daysInMonth()).days()&&(r=n),24*r*60*60*1e3},error:.919},{$:"week",method:"Week",da:r(6048e5)},{$:"day",method:"Date",ja:e,da:r(864e5)},{$:"hour",method:"Hours",da:r(36e5)},{$:"minute",method:"Minutes",da:r(6e4)},{$:"second",method:"Seconds",da:r(1e3)},{$:"millisecond",method:"Milliseconds",da:r(1)}],Pe={};function $e(e){$(this,e),this.ga=Ee.concat()}function Fe(e,t){var r;if(x(e)||(e=""),r=Pe[e]||Pe[e.slice(0,2)],t===n&&!r)throw Error("Invalid locale.");return r||Se}function qe(e,t,n,r){e.ga.unshift({Ba:r,xa:e,Aa:u("^"+t+"$","i"),to:n})}function Le(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function Ie(e){return e.filter(function(e){return!!e}).join("|")}function Re(e,t){var n;return D(e[0])?e:b(e[0])&&!b(e[1])?[e[0]]:x(e[0])&&t?[He(e[0]),e[1]]:(n={},Ne.forEach(function(t,r){n[t.$]=e[r]}),[n])}function He(e,t){var n={};return(match=e.match(/^(\d+)?\s?(\w+?)s?$/i))&&(B(t)&&(t=parseInt(match[1])||1),n[match[2].toLowerCase()]=t),n}function ze(e){return function(e){return e.replace(ke,function(e,t,r){var i,a,o=0,u=1;return t?e:(r.split("").reverse().forEach(function(e){var t=(e=Be[e])>9;t?(i&&(o+=u),u*=e/(a||1),a=e):(i===n&&(u*=10),o+=u*e),i=t}),i&&(o+=u),o)})}(e=e.trim().replace(/^(just )?now|\.+$/i,""))}function Ue(t,r,i,a){var o,u,s,c,f,h,d,p,g,m=new l,v=n;return m.utc(a),y(t)?m.utc(t.isUTC()).setTime(t.getTime()):b(t)?m.setTime(t):D(t)?(m.set(t,e),c=t):x(t)&&(o=Fe(r),t=ze(t),o&&P(o.sa(),function(i,a){var y=t.match(a.Aa);if(y)return u=(s=a).xa,(c=function(e,t){var n,r,i={};return t.forEach(function(t,a){B(n=e[a+1])||""===n||("year"===t&&(i.Ca=n.replace(/'/,"")),r=parseFloat(n.replace(/'/,"").replace(/,/,".")),i[t]=isNaN(r)?n.toLowerCase():r)}),i}(y,s.to)).utc&&m.utc(),u.ma=s,c.timestamp?(c=c.timestamp,n):(s.Ba&&!x(c.month)&&(x(c.date)||o.va(r))&&(p=c.month,c.month=c.date,c.date=p),c.year&&2===c.Ca.length&&(c.year=100*L(Je(new l,"FullYear")/100)-100*L(c.year/100)+c.year),c.month&&(c.month=u.getMonth(c.month),c.shift&&!c.unit&&(c.unit=u.units[7])),c.weekday&&c.date?delete c.weekday:c.weekday&&(c.weekday=u.getWeekday(c.weekday),c.shift&&!c.unit&&(c.unit=u.units[5])),c.day&&(p=u.ha[c.day])?(c.day=p.value,m.reset(),v=e):c.day&&(h=u.getWeekday(c.day))>-1&&(delete c.day,c.num&&c.month?(g=function(){var e=m.getWeekday();m.setWeekday(7*(c.num-1)+(e>h?h+7:h))},c.day=1):c.weekday=h),c.date&&!b(c.date)&&(c.date=u.ta(c.date)),u.za(c.ampm)&&c.hour<12?c.hour+=12:u.ya(c.ampm)&&12===c.hour&&(c.hour=0),("offset_hours"in c||"offset_minutes"in c)&&(m.utc(),c.offset_minutes=c.offset_minutes||0,c.offset_minutes+=60*c.offset_hours,"-"===c.offset_sign&&(c.offset_minutes*=-1),c.minute-=c.offset_minutes),c.unit&&(v=e,d=u.oa(c.num),f=u.ra(c.unit),(c.shift||c.edge)&&(d*=(p=u.ha[c.shift])?p.value:0,"month"===f&&A(c.date)&&(m.set({day:c.date},e),delete c.date),"year"===f&&A(c.month)&&(m.set({month:c.month,day:c.date},e),delete c.month,delete c.date)),c.sign&&(p=u.ha[c.sign])&&(d*=p.value),A(c.weekday)&&(m.set({weekday:c.weekday},e),delete c.weekday),c[f]=(c[f]||0)+d),"-"===c.year_sign&&(c.year*=-1),Ce.slice(1,4).forEach(function(e,t){var n=c[e.$],r=n%1;r&&(c[Ce[t].$]=L(r*("second"===e.$?1e3:60)),c[e.$]=I(n))}),n)}),s?v?m.advance(c):(m._utc&&m.reset(),Ve(m,c,e,n,i)):(m=t?new l(t):new l,a&&m.addMinutes(m.getTimezoneOffset())),c&&c.edge&&(p=u.ha[c.edge],P(Ce.slice(4),function(e,t){if(A(c[t.$]))return f=t.$,n}),"year"===f?c.fa="month":"month"!==f&&"week"!==f||(c.fa="day"),m[(p.value<0?"endOf":"beginningOf")+Le(f)](),-2===p.value&&m.reset()),g&&g(),m.utc(n)),{ea:m,set:c}}function Qe(e){var t,n=f.abs(e),r=n,i=0;return Ce.slice(1).forEach(function(e,a){(t=I(L(n/e.da()*10)/10))>=1&&(r=t,i=a+1)}),[r,i,e]}function We(e,t,n,r){var i,a=Fe(r),o=u(/^[A-Z]/);return e.isValid()?(Date[t]?t=Date[t]:v(t)&&(i=Qe(e.millisecondsFromNow()),t=t.apply(e,i.concat(a))),!t&&n?(0===(i=i||Qe(e.millisecondsFromNow()))[1]&&(i[1]=1,i[0]=1),a.ua(i)):(t=a[t=t||"long"]||t,De.forEach(function(n){t=t.replace(u("\\{("+n.ba+")(\\d)?\\}",n.la?"i":""),function(t,r,i){t=n.format(e,a,i||1,r),i=r.length;var u=r.match(/^(.)\1+$/);return n.la?(3===i&&(t=t.slice(0,3)),(u||r.match(o))&&(t=Le(t))):u&&!n.text&&(t=(b(t)?R(t,i):t.toString()).slice(-i)),t})}),t)):"Invalid Date"}function Ye(r,i,a,o){var u,l,s,c=0,f=0,h=0;return u=Ue(i,t,t,o),a>0&&(f=h=a,l=e),u.ea.isValid()?(u.set&&u.set.fa&&(Oe.forEach(function(e){e.$===u.set.fa&&(c=e.da(u.ea,r-u.ea)-1)}),i=Le(u.set.fa),(u.set.edge||u.set.shift)&&u.ea["beginningOf"+i](),"month"===u.set.fa&&(s=u.ea.clone()["endOf"+i]().getTime()),!l&&u.set.sign&&"millisecond"!=u.set.fa&&(f=50,h=-50)),l=r.getTime(),i=u.ea.getTime(),s=function(e,t,n){t=new Date(t),23!==Je(e=new Date(n).utc(e.isUTC()),"Hours")&&(t=t.getTimezoneOffset(),e=e.getTimezoneOffset(),t!==e&&(n+=(e-t).minutes()));return n}(r,i,s=s||i+c),l>=i-f&&l<=s+h):n}function Ve(e,t,r,i,a){function o(e){return A(t[e])?t[e]:t[e+"s"]}function u(e){return A(o(e))}var s,c,f;if(b(t)&&i)t={milliseconds:t};else if(b(t))return e.setTime(t),e;return A(t.date)&&(t.day=t.date),P(Ce,function(i,a){var o="day"===a.$;if(u(a.$)||o&&u("weekday"))return t.fa=a.$,c=+i,n;!r||"week"===a.$||o&&u("week")||Xe(e,a.method,o?1:0)}),Oe.forEach(function(n){var r,a=n.$;n=n.method,B(r=o(a))||(i?("week"===a&&(r=(t.day||0)+7*r,n="Date"),r=r*i+Je(e,n)):"month"===a&&u("day")&&Xe(e,"Date",15),Xe(e,n,r),i&&"month"===a&&((a=r)<0&&(a=a%12+12),a%12!=Je(e,"Month")&&Xe(e,"Date",0)))}),i||u("day")||!u("weekday")||(s=o("weekday"),e.setWeekday(s)),f=new l,(-1===a&&e>f||1===a&&e<f)&&P(Ce.slice(c+1),function(t,r){if((r.ja||"week"===r.$&&u("weekday"))&&!(u(r.$)||"day"===r.$&&u("weekday")))return e[r.ia](a),n}),e}function Je(e,t){return e["get"+(e._utc?"UTC":"")+t]()}function Xe(e,t,n){return e["set"+(e._utc?"UTC":"")+t](n)}function Ze(e,t,n){var r,i={h:0,m:1,s:2};return t=t||Me,e.replace(/{([a-z])}/g,function(e,a){var o=[],u="h"===a,l=u&&!n;return"t"===a?t.ampm.join("|"):(u&&o.push(":"),(r=t.timeSuffixes[i[a]])&&o.push(r+"\\s*"),0===o.length?"":"(?:"+o.join("|")+")"+(l?"":"?"))})}function Ge(e,t,n){var r,i;return b(e[1])?r=Re(e)[0]:(r=e[0],i=e[1]),Ue(r,i,t,n).ea}function Ke(e,t,n,r,i){var a;e.timers||(e.timers=[]),b(t)||(t=0),e.timers.push(setTimeout(function(){e.timers.splice(a,1),n.apply(r,i||[])},t)),a=e.timers.length}function et(e,t,r,i,a,o){var u=e.toFixed(20),l=u.search(/\./);return(l-=u=u.search(/[1-9]/))>0&&(l-=1),a=f.max(f.min((l/3).floor(),a===n?r.length:a),-i),i=r.charAt(a+i-1),l<-9&&(a=-3,t=l.abs()-9,i=r.slice(0,1)),(e/(o?2..pow(10*a):10..pow(3*a))).round(t||0).format()+i.trim()}$e.prototype={getMonth:function(e){return b(e)?e-1:this.months.indexOf(e)%12},getWeekday:function(e){return this.weekdays.indexOf(e)%7},oa:function(e){var t;return b(e)?e:e&&-1!==(t=this.numbers.indexOf(e))?(t+1)%10:1},ta:function(e){var t=this;return e.replace(u(this.num,"g"),function(e){return t.oa(e)||""})},ra:function(e){return Me.units[this.units.indexOf(e)%8]},ua:function(e){return this.na(e,e[2]>0?"future":"past")},qa:function(e){return this.na(Qe(e),"duration")},va:function(t){return"en"===(t=t||this.code)||"en-US"===t?e:this.variant},ya:function(e){return e===this.ampm[0]},za:function(e){return e&&e===this.ampm[1]},na:function(e,t){var n,r,i=e[0],a=e[1],o=e[2],u=this[t]||this.relative;return v(u)?u.call(this,i,a,o,t):(r=this.units[8*(this.plural&&i>1?1:0)+a]||this.units[a],this.capitalizeUnit&&(r=Le(r)),n=this.modifiers.filter(function(e){return"sign"==e.name&&e.value==(o>0?1:-1)})[0],u.replace(/\{(.*?)\}/g,function(e,t){switch(t){case"num":return i;case"unit":return r;case"sign":return n.src}}))},sa:function(){return this.ma?[this.ma].concat(this.ga):this.ga},addFormat:function(e,t,n,r,i){var a,o=n||[],u=this;e=(e=e.replace(/\s+/g,"[-,. ]*")).replace(/\{([^,]+?)\}/g,function(e,t){var r,i,a,l=t.match(/\?$/);a=t.match(/^(\d+)\??$/);var s=t.match(/(\d)(?:-(\d))?/),c=t.replace(/[^a-z]+$/,"");return a?r=u.tokens[a[1]]:u[c]?r=u[c]:u[c+"s"]&&(r=u[c+"s"],s&&(i=[],r.forEach(function(e,t){var n=t%(u.units?8:r.length);n>=s[1]&&n<=(s[2]||s[1])&&i.push(e)}),r=i),r=Ie(r)),a?a="(?:"+r+")":(n||o.push(c),a="("+r+")"),l&&(a+="?"),a}),t?(t=Ze(Ae,u,i),i=["t","[\\s\\u3000]"].concat(u.timeMarker),a=e.match(/\\d\{\d,\d\}\)+\??$/),qe(u,"(?:"+t+")[,\\s\\u3000]+?"+e,je.concat(o),r),qe(u,e+"(?:[,\\s]*(?:"+i.join("|")+(a?"+":"*")+")"+t+")?",o.concat(je),r)):qe(u,e,o,r)}},l.extend({create:function(){return Ge(arguments)},past:function(){return Ge(arguments,-1)},future:function(){return Ge(arguments,1)},addLocale:function(t,r){return function(t,r){function i(e){var t=s[e];x(t)?s[e]=t.split(","):t||(s[e]=[])}function a(e,t){return(e=e.split("+").map(function(e){return e.replace(/(.+):(.+)$/,function(e,t,n){return n.split("|").map(function(e){return t+e}).join("|")})}).join("|")).split("|").forEach(t)}function o(e,t,n){var r=[];s[e].forEach(function(e,i){t&&(e+="+"+e.slice(0,3)),a(e,function(e,t){r[t*n+i]=e.toLowerCase()})}),s[e]=r}function u(e,t,n){return e="\\d{"+e+","+t+"}",n&&(e+="|(?:"+Ie(s.numbers)+")+"),e}function l(e,t){s[e]=s[e]||t}var s,c,f;return s=new $e(r),i("modifiers"),"months,weekdays,units,numbers,articles,tokens,timeMarker,ampm,timeSuffixes,dateParse,timeParse".split(",").forEach(i),o("months",c=!s.monthSuffix,12),o("weekdays",c,7),o("units",n,8),o("numbers",n,10),l("code",t),l("date",u(1,2,s.digitDate)),l("year","'\\d{2}|"+u(4,4)),l("num",(f=["\\d+"].concat(s.articles),s.numbers&&(f=f.concat(s.numbers)),Ie(f))),function(){var e=[];s.ha={},s.modifiers.forEach(function(t){var n=t.name;a(t.src,function(r){var i=s[n];s.ha[r]=t,e.push({name:n,src:r,value:t.value}),s[n]=i?i+"|"+r:r})}),s.day+="|"+Ie(s.weekdays),s.modifiers=e}(),s.monthSuffix&&(s.month=u(1,2),s.months=q(1,12).map(function(e){return e+s.monthSuffix})),s.full_month=u(1,2)+"|"+Ie(s.months),s.timeSuffixes.length>0&&s.addFormat(Ze(Ae,s),n,je),s.addFormat("{day}",e),s.addFormat("{month}"+(s.monthSuffix||"")),s.addFormat("{year}"+(s.yearSuffix||"")),s.timeParse.forEach(function(t){s.addFormat(t,e)}),s.dateParse.forEach(function(e){s.addFormat(e)}),Pe[t]=s}(t,r)},setLocale:function(e){var t=Fe(e,n);return Se=t,e&&e!=t.code&&(t.code=e),t},getLocale:function(e){return e?Fe(e,n):Se},addFormat:function(e,t,n){qe(Fe(n),e,t)}},n,n),l.extend({set:function(){var e=Re(arguments);return Ve(this,e[0],e[1])},setWeekday:function(e){if(!B(e))return Xe(this,"Date",Je(this,"Date")+e-Je(this,"Day"))},setWeek:function(e){if(!B(e))return Je(this,"Date"),Xe(this,"Month",0),Xe(this,"Date",7*e+1),this.getTime()},getWeek:function(){var e=this,t=Je(e=e.clone(),"Day")||7;return e.addDays(4-t).reset(),1+I(e.daysSince(e.clone().beginningOfYear())/7)},getUTCOffset:function(t){var n=this._utc?0:this.getTimezoneOffset(),r=t===e?":":"";return!n&&t?"Z":R(L(-n/60),2,e)+r+R(n%60,2)},utc:function(t){return k(this,"_utc",t===e||0===arguments.length),this},isUTC:function(){return!!this._utc||0===this.getTimezoneOffset()},advance:function(){var t=Re(arguments,e);return Ve(this,t[0],t[1],1)},rewind:function(){var t=Re(arguments,e);return Ve(this,t[0],t[1],-1)},isValid:function(){return!isNaN(this.getTime())},isAfter:function(e,t){return this.getTime()>l.create(e).getTime()-(t||0)},isBefore:function(e,t){return this.getTime()<l.create(e).getTime()+(t||0)},isBetween:function(e,t,n){var r=this.getTime();e=l.create(e).getTime();var i=l.create(t).getTime();return t=f.min(e,i),e=f.max(e,i),t-(n=n||0)<r&&e+n>r},isLeapYear:function(){var e=Je(this,"FullYear");return e%4==0&&e%100!=0||e%400==0},daysInMonth:function(){return 32-Je(new l(Je(this,"FullYear"),Je(this,"Month"),32),"Date")},format:function(e,t){return We(this,e,n,t)},relative:function(n,r){return x(n)&&(r=n,n=t),We(this,n,e,r)},is:function(t,n,r){var i,a;if(this.isValid()){if(x(t))switch(t=t.trim().toLowerCase(),a=this.clone().utc(r),e){case"future"===t:return this.getTime()>(new l).getTime();case"past"===t:return this.getTime()<(new l).getTime();case"weekday"===t:return Je(a,"Day")>0&&Je(a,"Day")<6;case"weekend"===t:return 0===Je(a,"Day")||6===Je(a,"Day");case(i=Me.weekdays.indexOf(t)%7)>-1:return Je(a,"Day")===i;case(i=Me.months.indexOf(t)%12)>-1:return Je(a,"Month")===i}return Ye(this,t,n,r)}},reset:function(t){var n,r={};return"date"===(t=t||"hours")&&(t="days"),n=Oe.some(function(e){return t===e.$||t===e.$+"s"}),r[t]=t.match(/^days?/)?1:0,n?this.set(r,e):this},clone:function(){var e=new l(this.getTime());return e.utc(this.isUTC()),e}}),l.extend({iso:function(){return this.toISOString()},getWeekday:l.prototype.getDay,getUTCWeekday:l.prototype.getUTCDay}),c.extend({duration:function(e){return Fe(e).qa(this)}}),Me=Se=l.addLocale("en",{plural:e,timeMarker:"at",ampm:"am,pm",months:"January,February,March,April,May,June,July,August,September,October,November,December",weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",units:"millisecond:|s,second:|s,minute:|s,hour:|s,day:|s,week:|s,month:|s,year:|s",numbers:"one,two,three,four,five,six,seven,eight,nine,ten",articles:"a,an,the",tokens:"the,st|nd|rd|th,of",short:"{Month} {d}, {yyyy}",long:"{Month} {d}, {yyyy} {h}:{mm}{tt}",full:"{Weekday} {Month} {d}, {yyyy} {h}:{mm}:{ss}{tt}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",modifiers:[{name:"day",src:"yesterday",value:-1},{name:"day",src:"today",value:0},{name:"day",src:"tomorrow",value:1},{name:"sign",src:"ago|before",value:-1},{name:"sign",src:"from now|after|from|in|later",value:1},{name:"edge",src:"last day",value:-2},{name:"edge",src:"end",value:-1},{name:"edge",src:"first day|beginning",value:1},{name:"shift",src:"last",value:-1},{name:"shift",src:"the|this",value:0},{name:"shift",src:"next",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{month} {year}","{shift} {unit=5-7}","{0?} {date}{1}","{0?} {edge} of {shift?} {unit=4-7?}{month?}{year?}"],timeParse:["{0} {num}{1} {day} of {month} {year?}","{weekday?} {month} {date}{1?} {year?}","{date} {month} {year}","{date} {month}","{shift} {weekday}","{shift} week {weekday}","{weekday} {2?} {shift} week","{num} {unit=4-5} {sign} {day}","{0?} {date}{1} of {month}","{0?}{month?} {date?}{1?} of {shift} {unit=6-7}"]}),Ce=Oe.concat().reverse(),(Ne=Oe.concat()).splice(2,1),S(l,e,n,Oe,function(t,n,r){function i(e){var t=(e/=h)%1,r=n.error||.999;return t&&f.abs(t%1)>r&&(e=L(e)),parseInt(e)}var a,o,u=n.$,s=Le(u),h=n.da();n.ia="add"+s+"s",a=function(e,t){return i(this.getTime()-l.create(e,t).getTime())},o=function(e,t){return i(l.create(e,t).getTime()-this.getTime())},t[u+"sAgo"]=o,t[u+"sUntil"]=o,t[u+"sSince"]=a,t[u+"sFromNow"]=a,t[n.ia]=function(e,t){var n={};return n[u]=e,this.advance(n,t)},function(e,t){function n(){return L(this*t)}function r(){return Ge(arguments)[e.ia](this)}function i(){return Ge(arguments)[e.ia](-this)}var a=e.$,o={};o[a]=n,o[a+"s"]=n,o[a+"Before"]=i,o[a+"sBefore"]=i,o[a+"Ago"]=i,o[a+"sAgo"]=i,o[a+"After"]=r,o[a+"sAfter"]=r,o[a+"FromNow"]=r,o[a+"sFromNow"]=r,c.extend(o)}(n,h),r<3&&["Last","This","Next"].forEach(function(e){t["is"+e+s]=function(){return this.is(e+" "+u)}}),r<4&&(t["beginningOf"+s]=function(){var t={};switch(u){case"year":t.year=Je(this,"FullYear");break;case"month":t.month=Je(this,"Month");break;case"day":t.day=Je(this,"Date");break;case"week":t.weekday=0}return this.set(t,e)},t["endOf"+s]=function(){var t={hours:23,minutes:59,seconds:59,milliseconds:999};switch(u){case"year":t.month=11,t.day=31;break;case"month":t.day=this.daysInMonth();break;case"week":t.weekday=6}return this.set(t,e)})}),Me.addFormat("([+-])?(\\d{4,4})[-.]?{full_month}[-.]?(\\d{1,2})?",e,["year_sign","year","month","date"],n,e),Me.addFormat("(\\d{1,2})[-.\\/]{full_month}(?:[-.\\/](\\d{2,4}))?",e,["date","month","year"],e),Me.addFormat("{full_month}[-.](\\d{4,4})",n,["month","year"]),Me.addFormat("\\/Date\\((\\d+(?:\\+\\d{4,4})?)\\)\\/",n,["timestamp"]),Me.addFormat(Ze(Ae,Me),n,je),Ee=Me.ga.slice(0,7).reverse(),Me.ga=Me.ga.slice(7).concat(Ee),S(l,e,n,"short,long,full",function(e,t){e[t]=function(e){return We(this,t,n,e)}}),"〇一二三四五六七八九十百千万".split("").forEach(function(e,t){t>9&&(t=f.pow(10,t-9)),Be[e]=t}),"０１２３４５６７８９".split("").forEach(function(e,t){Be[e]=t}),ke=u("([期週周])?([〇一二三四五六七八九十百千万０１２３４５６７８９]+)(?!昨)","g"),function(){var t="today,yesterday,tomorrow,weekday,weekend,future,past".split(","),r=Me.weekdays.slice(0,7),i=Me.months.slice(0,12);S(l,e,n,t.concat(r).concat(i),function(e,t){e["is"+Le(t)]=function(e){return this.is(t,0,e)}})}(),l.extend({utc:{create:function(){return Ge(arguments,0,e)},past:function(){return Ge(arguments,-1,e)},future:function(){return Ge(arguments,1,e)}}},n,n),l.extend({RFC1123:"{Dow}, {dd} {Mon} {yyyy} {HH}:{mm}:{ss} {tz}",RFC1036:"{Weekday}, {dd}-{Mon}-{yy} {HH}:{mm}:{ss} {tz}",ISO8601_DATE:"{yyyy}-{MM}-{dd}",ISO8601_DATETIME:"{yyyy}-{MM}-{dd}T{HH}:{mm}:{ss}.{fff}{isotz}"},n,n),DateRange=function(e,t){this.start=l.create(e),this.end=l.create(t)},DateRange.prototype.toString=function(){return this.isValid()?this.start.full()+".."+this.end.full():"Invalid DateRange"},M(DateRange,e,n,{isValid:function(){return this.start<this.end},duration:function(){return this.isValid()?this.end.getTime()-this.start.getTime():NaN},contains:function(e){var t=this;return(e.start&&e.end?[e.start,e.end]:[e]).every(function(e){return e>=t.start&&e<=t.end})},every:function(t,n){var r,i,a=this.start.clone(),o=[],u=0;for(x(t)?(a.advance(He(t,0),e),r=He(t),i="day"===t.toLowerCase()):r={milliseconds:t};a<=this.end;)o.push(a),n&&n(a,u),i&&23===Je(a,"Hours")?Xe(a=a.clone(),"Hours",48):a=a.clone().advance(r,e),u++;return o},union:function(e){return new DateRange(this.start<e.start?this.start:e.start,this.end>e.end?this.end:e.end)},intersect:function(e){return new DateRange(this.start>e.start?this.start:e.start,this.end<e.end?this.end:e.end)},clone:function(){return new DateRange(this.start,this.end)}}),S(DateRange,e,n,"Millisecond,Second,Minute,Hour,Day,Week,Month,Year",function(e,t){e["each"+t]=function(e){return this.every(t,e)}}),M(l,n,n,{range:function(e,t){return new DateRange(e,t)}}),M(Function,e,n,{lazy:function(t,r){function i(){c&&s.length>r-2||(s.push([this,arguments]),a())}var a,o,u,l=this,s=[],c=n;return r=r||1/0,o=L(t=t||1,void 0,"ceil"),u=L(o/t),a=function(){if(!c&&0!=s.length){for(var t=f.max(s.length-u,0);s.length>t;)Function.prototype.apply.apply(l,s.shift());Ke(i,o,function(){c=n,a()}),c=e}},i},delay:function(e){return Ke(this,e,this,this,N(arguments).slice(1)),this},throttle:function(e){return this.lazy(e,1)},debounce:function(e){var t=this;return function n(){n.cancel(),Ke(n,e,t,this,arguments)}},cancel:function(){if(g(this.timers))for(;this.timers.length>0;)clearTimeout(this.timers.shift());return this},after:function(e){var t=this,n=0,r=[];if(b(e)){if(0===e)return t.call(),t}else e=1;return function(){var i;if(r.push(N(arguments)),++n==e)return i=t.call(this,r),n=0,r=[],i}},once:function(){var e=this;return function(){return O(e,"memo")?e.memo:e.memo=e.apply(this,arguments)}},fill:function(){var e=this,n=N(arguments);return function(){var r=N(arguments);return n.forEach(function(e,n){(e!=t||n>=r.length)&&r.splice(n,0,e)}),e.apply(this,r)}}}),M(c,n,n,{random:function(e,t){var n,r;return 1==arguments.length&&(t=e,e=0),n=f.min(e||0,B(t)?1:t),r=f.max(e||0,B(t)?1:t)+1,I(f.random()*(r-n)+n)}}),M(c,e,n,{log:function(e){return f.log(this)/(e?f.log(e):1)},abbr:function(e){return et(this,e,"kmbt",0,4)},metric:function(e,t){return et(this,e,"nμm kMGTPE",4,B(t)?1:t)},bytes:function(t,n){return et(this,t,"kMGTPE",0,B(n)?4:n,e)+"B"},isInteger:function(){return this%1==0},isOdd:function(){return!isNaN(this)&&!this.isMultipleOf(2)},isEven:function(){return this.isMultipleOf(2)},isMultipleOf:function(e){return this%e==0},format:function(e,t,n){var r,i,a,o="";for(B(t)&&(t=","),B(n)&&(n="."),i=(r=(b(e)?L(this,e||0).toFixed(f.max(e,0)):this.toString()).replace(/^-/,"").split("."))[0],a=r[1],r=i.length;r>0;r-=3)r<i.length&&(o=t+o),o=i.slice(f.max(0,r-3),r)+o;return a&&(o+=n+z((e||0)-a.length,"0")+a),(this<0?"-":"")+o},hex:function(e){return this.pad(e||1,n,16)},upto:function(e,t,n){return q(this,e,t,n||1)},downto:function(e,t,n){return q(this,e,t,-(n||1))},times:function(e){if(e)for(var t=0;t<this;t++)e.call(this,t);return this.toNumber()},chr:function(){return s.fromCharCode(this)},pad:function(e,t,n){return R(this,e,t,n)},ordinalize:function(){var e=this.abs();return this+H(e=parseInt(e.toString().slice(-2)))},toNumber:function(){return parseFloat(this,10)}}),S(c,e,n,"round,floor,ceil",function(e,t){e[t]=function(e){return L(this,e,t)}}),S(c,e,n,"abs,pow,sin,asin,cos,acos,tan,atan,exp,pow,sqrt",function(e,t){e[t]=function(e,n){return f[t](this,e,n)}});var tt,nt,rt="isObject,isNaN".split(","),it="keys,values,select,reject,each,merge,clone,equal,watch,tap,has".split(",");function at(t,r,i){var a,o={};return P(t,function(t,u){a=n,C(r,function(n){(_(n)?n.test(t):E(n)?O(n,t):t===s(n))&&(a=e)},1),a===i&&(o[t]=u)}),o}M(a,n,e,{watch:function(t,n,r){if(d){var i=t[n];a.defineProperty(t,n,{enumerable:e,configurable:e,get:function(){return i},set:function(e){i=r.call(t,n,i,e)}})}}}),M(a,n,function(e,t){return v(t)},{keys:function(e,t){var n=a.keys(e);return n.forEach(function(n){t.call(e,n,e[n])}),n}}),M(a,n,n,{isObject:function(e){return D(e)},isNaN:function(e){return b(e)&&e.valueOf()!=e.valueOf()},equal:function(e,t){return Y(e)&&Y(t)?W(e)===W(t):e===t},extended:function(e){return new F(e)},merge:function(t,r,i,s){var c,f;if(t&&"string"!=typeof r)for(c in r)if(O(r,c)&&t){if(f=r[c],A(t[c])){if(s===n)continue;v(s)&&(f=s.call(r,c,t[c],r[c]))}if(i===e&&f&&E(f))if(y(f))f=new l(f.getTime());else{if(!_(f)){t[c]||(t[c]=o.isArray(f)?[]:{}),a.merge(t[c],r[c],i,s);continue}f=new u(f.source,U(f))}t[c]=f}return t},values:function(e,t){var n=[];return P(e,function(r,i){n.push(i),t&&t.call(e,i)}),n},clone:function(e,t){var n;return E(e)?(n=e instanceof F?new F:new e.constructor,a.merge(n,e,t)):e},fromQueryString:function(t,r){var i=a.extended();return(t=t&&t.toString?t.toString():"").replace(/^.*?\?/,"").split("&").forEach(function(t){2===(t=t.split("=")).length&&function t(r,i,a,o){var u,l,s;o!==n&&(l=i.match(/^(.+?)(\[.*\])$/))?(s=l[1],(i=l[2].replace(/^\[|\]$/g,"").split("][")).forEach(function(e){u=!e||e.match(/^\d+$/),!s&&g(r)&&(s=r.length),O(r,s)||(r[s]=u?[]:{}),r=r[s],s=e}),!s&&u&&(s=r.length.toString()),t(r,s,a)):r[i]=a.match(/^[+-]?\d+(\.\d+)?$/)?parseFloat(a):"true"===a?e:"false"===a?n:a}(i,t[0],decodeURIComponent(t[1]),r)}),i},tap:function(e,t){var n=t;return v(t)||(n=function(){t&&e[t]()}),n.call(e,e),e},has:function(e,t){return O(e,t)},select:function(t){return at(t,arguments,e)},reject:function(e){return at(e,arguments,n)}}),S(a,n,n,p,function(e,t){var n="is"+t;rt.push(n),e[n]=function(e){return a.prototype.toString.call(e)==="[object "+t+"]"}}),M(a,n,function(){return 0===arguments.length},{extend:function(){var e=rt.concat(it);void 0!==Te&&(e=e.concat(Te)),J(e,a)}}),J(it,F),M(u,n,n,{escape:function(e){return Q(e)}}),M(u,e,n,{getFlags:function(){return U(this)},setFlags:function(e){return u(this.source,e)},addFlag:function(e){return this.setFlags(U(this,e))},removeFlag:function(e){return this.setFlags(U(this).replace(e,""))}}),M(s,e,function(e){return _(e)||arguments.length>2},{startsWith:function(t,n,r){var i=this;return n&&(i=i.slice(n)),B(r)&&(r=e),t=_(t)?t.source.replace("^",""):Q(t),u("^"+t,r?"":"i").test(i)},endsWith:function(t,n,r){var i=this;return A(n)&&(i=i.slice(0,n)),B(r)&&(r=e),t=_(t)?t.source.replace("$",""):Q(t),u(t+"$",r?"":"i").test(i)}}),M(s,e,n,{escapeRegExp:function(){return Q(this)},escapeURL:function(e){return e?encodeURIComponent(this):encodeURI(this)},unescapeURL:function(e){return e?decodeURI(this):decodeURIComponent(this)},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2f;")},unescapeHTML:function(){return this.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&#x2f;/g,"/")},encodeBase64:function(){return tt(this)},decodeBase64:function(){return nt(this)},each:function(e,t){var n,r;if(v(e)?(t=e,e=/[\s\S]/g):e?x(e)?e=u(Q(e),"gi"):_(e)&&(e=u(e.source,U(e,"g"))):e=/[\s\S]/g,n=this.match(e)||[],t)for(r=0;r<n.length;r++)n[r]=t.call(this,n[r],r,n)||n[r];return n},shift:function(e){var t="";return e=e||0,this.codes(function(n){t+=s.fromCharCode(n+e)}),t},codes:function(e){for(var t=[],n=0;n<this.length;n++){var r=this.charCodeAt(n);t.push(r),e&&e.call(this,r,n)}return t},chars:function(e){return this.each(e)},words:function(e){return this.trim().each(/\S+/g,e)},lines:function(e){return this.trim().each(/^.*$/gm,e)},paragraphs:function(e){var t=this.trim().split(/[\r\n]{2,}/);return t.map(function(t){if(e)var n=e.call(t);return n||t})},isBlank:function(){return 0===this.trim().length},has:function(e){return-1!==this.search(_(e)?e:Q(e))},add:function(e,t){return t=B(t)?this.length:t,this.slice(0,t)+e+this.slice(t)},remove:function(e){return this.replace(e,"")},reverse:function(){return this.split("").reverse().join("")},compact:function(){return this.trim().replace(/([\r\n\s\u3000])+/g,function(e,t){return"　"===t?t:" "})},at:function(){return V(this,arguments,e)},from:function(e){return this.slice(e)},to:function(e){return B(e)&&(e=this.length),this.slice(0,e)},dasherize:function(){return this.underscore().replace(/_/g,"-")},underscore:function(){return this.replace(/[-\s]+/g,"_").replace(s.Inflector&&s.Inflector.acronymRegExp,function(e,t){return(t>0?"_":"")+e.toLowerCase()}).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()},camelize:function(e){return this.underscore().replace(/(^|_)([^_]+)/g,function(t,r,i,a){return t=i,t=(r=s.Inflector)&&r.acronyms[t],t=x(t)?t:void 0,a=e!==n||a>0,t?a?t:t.toLowerCase():a?i.capitalize():i})},spacify:function(){return this.underscore().replace(/_/g," ")},stripTags:function(){var e=this;return C(arguments.length>0?arguments:[""],function(t){e=e.replace(u("</?"+Q(t)+"[^<>]*>","gi"),"")}),e},removeTags:function(){var e=this;return C(arguments.length>0?arguments:["\\S+"],function(t){t=u("<("+t+")[^<>]*(?:\\/>|>.*?<\\/\\1>)","gi"),e=e.replace(t,"")}),e},truncate:function(e,t,r,i){var a="",o="",l=this.toString(),c="[\t\n\v\f\r   ᠎             \u2028\u2029　\ufeff]+",f="[^\t\n\v\f\r   ᠎             \u2028\u2029　\ufeff]*",h=u(c+f+"$");if(i=B(i)?"...":s(i),l.length<=e)return l;switch(r){case"left":e=l.length-e,a=i,l=l.slice(e),h=u("^"+f+c);break;case"middle":e=I(e/2),o=i+l.slice(l.length-e).trimLeft(),l=l.slice(0,e);break;default:e=e,o=i,l=l.slice(0,e)}return t===n&&this.slice(e,e+1).match(/\S/)&&(l=l.remove(h)),a+l+o},pad:function(e,t){return z(t,e)+this+z(t,e)},padLeft:function(e,t){return z(t,e)+this},padRight:function(e,t){return this+z(t,e)},first:function(e){return B(e)&&(e=1),this.substr(0,e)},last:function(e){return B(e)&&(e=1),this.substr(this.length-e<0?0:this.length-e)},repeat:function(e){var t="",n=this;if(!b(e)||e<1)return"";for(;e;)1&e&&(t+=n),(e>>=1)&&(n+=n);return t},toNumber:function(e){var t=this.replace(/,/g,"");return t.match(/\./)?parseFloat(t):parseInt(t,e||10)},capitalize:function(e){var t;return this.toLowerCase().replace(e?/[\s\S]/g:/^\S/,function(e){var n,r=e.toUpperCase();return n=t?e:r,t=r!==e,n})},assign:function(){var e={};return N(arguments,function(t,n){D(t)?$(e,t):e[n+1]=t}),this.replace(/\{([^{]+?)\}/g,function(t,n){return O(e,n)?e[n]:t})},namespace:function(e){return e=e||h,P(this.split("."),function(t,n){return!!(e=e[n])}),e}}),M(s,e,n,{insert:s.prototype.add}),function(e){if(this.btoa)tt=this.btoa,nt=this.atob;else{var t=/[^A-Za-z0-9\+\/\=]/g;tt=function(t){var n,r,i,a,o,u,l="",s=0;do{a=(n=t.charCodeAt(s++))>>2,n=(3&n)<<4|(r=t.charCodeAt(s++))>>4,o=(15&r)<<2|(i=t.charCodeAt(s++))>>6,u=63&i,isNaN(r)?o=u=64:isNaN(i)&&(u=64),l=l+e.charAt(a)+e.charAt(n)+e.charAt(o)+e.charAt(u)}while(s<t.length);return l},nt=function(n){var r,i,a,o,u,l="",c=0;if(n.match(t))throw Error("String contains invalid base64 characters");n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{r=(r=e.indexOf(n.charAt(c++)))<<2|(i=e.indexOf(n.charAt(c++)))>>4,i=(15&i)<<4|(o=e.indexOf(n.charAt(c++)))>>2,a=(3&o)<<6|(u=e.indexOf(n.charAt(c++))),l+=s.fromCharCode(r),64!=o&&(l+=s.fromCharCode(i)),64!=u&&(l+=s.fromCharCode(a))}while(c<n.length);return l}}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=")}();
